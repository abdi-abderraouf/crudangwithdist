"use strict";(self.webpackChunkcommerce=self.webpackChunkcommerce||[]).push([[179],{6291:(Ve,me,N)=>{N.d(me,{Dh:()=>ee,GT:()=>re,HU:()=>P,hO:()=>Mr,on:()=>_e,pX:()=>j,sI:()=>St,ss:()=>k,xv:()=>ue,yq:()=>qe});var m=N(341),Q=N(353),le=N(2868),X=N(8915),ne=N(7951),K=N(6435),ce=N(5867);function ie(){}Ve=N.hmd(Ve);class H{constructor(q,B=m.N){this.zone=q,this.delegate=B}now(){return this.delegate.now()}schedule(q,B,z){const oe=this.zone;return this.delegate.schedule(function(fe){oe.runGuarded(()=>{q.apply(this,[fe])})},B,z)}}class x{constructor(q){this.zone=q,this.task=null}call(q,B){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ie,{},ie,ie)),B.pipe((0,le.b)({next:z,complete:z,error:z})).subscribe(q).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class P{constructor(q){this.ngZone=q,this.outsideAngular=q.runOutsideAngular(()=>new H(Zone.current)),this.insideAngular=q.run(()=>new H(Zone.current,Q.z))}}function k(ze){return function(B){return(B=B.lift(new x(ze.ngZone))).pipe((0,X.R)(ze.outsideAngular),(0,ne.QV)(ze.insideAngular))}}const R=["ngOnDestroy"],j=(ze,q,B,z={})=>new Proxy(ze,{get:(oe,J)=>B.runOutsideAngular(()=>{var fe;if(ze[J])return(null===(fe=null==z?void 0:z.spy)||void 0===fe?void 0:fe.get)&&z.spy.get(J,ze[J]),ze[J];if(R.indexOf(J)>-1)return()=>{};const Ne=q.toPromise().then(ht=>{const It=ht&&ht[J];return"function"==typeof It?It.bind(ht):It&&It.then?It.then(Xe=>B.run(()=>Xe)):B.run(()=>It)});return new Proxy(()=>{},{get:(ht,It)=>Ne[It],apply:(ht,It,Xe)=>Ne.then(Le=>{var Fe;const je=Le&&Le(...Xe);return(null===(Fe=null==z?void 0:z.spy)||void 0===Fe?void 0:Fe.apply)&&z.spy.apply(J,Xe,je),je})})})}),re=(ze,q)=>{q.forEach(B=>{Object.getOwnPropertyNames(B.prototype||B).forEach(z=>{Object.defineProperty(ze.prototype,z,Object.getOwnPropertyDescriptor(B.prototype||B,z))})})},ee=new K.OlP("angularfire2.app.options"),ue=new K.OlP("angularfire2.app.nameOrConfig"),Ce=new K.GfV("6.1.5");function _e(ze,q,B){const oe="object"==typeof B&&B||{};oe.name=oe.name||"string"==typeof B&&B||"[DEFAULT]";const fe=ce.Z.apps.filter(Ne=>Ne&&Ne.name===oe.name)[0]||q.runOutsideAngular(()=>ce.Z.initializeApp(ze,oe));try{JSON.stringify(ze)!==JSON.stringify(fe.options)&&xe("error",`${fe.name} Firebase App already initialized with different options${Ve.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return fe}const qe=()=>{xe("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},xe=(ze,...q)=>{(0,K.X6Q)()&&"undefined"!=typeof console&&console[ze](...q)};function St(ze,q,B,z,oe){const[J,...fe]=globalThis.\u0275AngularfireInstanceCache.get(ze)||[];if(J){try{oe.some((Ne,ht)=>{const It=fe[ht];return Ne&&"object"==typeof Ne?JSON.stringify(Ne)!==JSON.stringify(It):Ne!==It})&&xe("error",`${q} was already initialized on the ${B.name} Firebase App instance with different settings.${Ve.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(Ne){}return J}{const Ne=z();return globalThis.\u0275AngularfireInstanceCache.set(ze,[Ne,...oe]),Ne}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Nt={provide:class Ue{},useFactory:_e,deps:[ee,K.R0b,[new K.FiY,ue]]};let Mr=(()=>{class ze{constructor(B){ce.Z.registerVersion("angularfire",Ce.full,B.toString()),ce.Z.registerVersion("angular",K.q4F.full)}static initializeApp(B,z){return{ngModule:ze,providers:[{provide:ee,useValue:B},{provide:ue,useValue:z}]}}}return ze.\u0275fac=function(B){return new(B||ze)(K.LFG(K.Lbi))},ze.\u0275mod=K.oAB({type:ze}),ze.\u0275inj=K.cJS({providers:[Nt]}),ze})()},8367:(Ve,me,N)=>{N.d(me,{Z:()=>Xe});var ne,xe,m=N(655),Q=N(492),le=N(2461),X=N(4003),K=((ne={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ne["bad-app-name"]="Illegal App name: '{$appName}",ne["duplicate-app"]="Firebase App named '{$appName}' already exists",ne["app-deleted"]="Firebase App named '{$appName}' already deleted",ne["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ne["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ne),ce=new Q.LL("app","Firebase",K),ie="@firebase/app",Se="[DEFAULT]",St=((xe={})[ie]="fire-core",xe["@firebase/analytics"]="fire-analytics",xe["@firebase/app-check"]="fire-app-check",xe["@firebase/auth"]="fire-auth",xe["@firebase/database"]="fire-rtdb",xe["@firebase/functions"]="fire-fn",xe["@firebase/installations"]="fire-iid",xe["@firebase/messaging"]="fire-fcm",xe["@firebase/performance"]="fire-perf",xe["@firebase/remote-config"]="fire-rc",xe["@firebase/storage"]="fire-gcs",xe["@firebase/firestore"]="fire-fst",xe["fire-js"]="fire-js",xe["firebase-wrapper"]="fire-js-all",xe),Nt=new X.Yd("@firebase/app"),Mr=function(){function Le(Fe,je,Tt){var bt=this;this.firebase_=Tt,this.isDeleted_=!1,this.name_=je.name,this.automaticDataCollectionEnabled_=je.automaticDataCollectionEnabled||!1,this.options_=(0,Q.p$)(Fe),this.container=new le.H0(je.name),this._addComponent(new le.wA("app",function(){return bt},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(st){return bt._addComponent(st)})}return Object.defineProperty(Le.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Fe){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Fe},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Le.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Le.prototype.delete=function(){var Fe=this;return new Promise(function(je){Fe.checkDestroyed_(),je()}).then(function(){return Fe.firebase_.INTERNAL.removeApp(Fe.name_),Promise.all(Fe.container.getProviders().map(function(je){return je.delete()}))}).then(function(){Fe.isDeleted_=!0})},Le.prototype._getService=function(Fe,je){var Tt;void 0===je&&(je=Se),this.checkDestroyed_();var bt=this.container.getProvider(Fe);return!bt.isInitialized()&&"EXPLICIT"===(null===(Tt=bt.getComponent())||void 0===Tt?void 0:Tt.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:je})},Le.prototype._removeServiceInstance=function(Fe,je){void 0===je&&(je=Se),this.container.getProvider(Fe).clearInstance(je)},Le.prototype._addComponent=function(Fe){try{this.container.addComponent(Fe)}catch(je){Nt.debug("Component "+Fe.name+" failed to register with FirebaseApp "+this.name,je)}},Le.prototype._addOrOverwriteComponent=function(Fe){this.container.addOrOverwriteComponent(Fe)},Le.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Le.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ce.create("app-deleted",{appName:this.name_})},Le}();Mr.prototype.name&&Mr.prototype.options||Mr.prototype.delete||console.log("dc");var z=function B(){var Le=function q(Le){var Fe={},je=new Map,Tt={__esModule:!0,initializeApp:function Zn(dt,ft){void 0===ft&&(ft={}),("object"!=typeof ft||null===ft)&&(ft={name:ft});var Cn=ft;void 0===Cn.name&&(Cn.name=Se);var Jt=Cn.name;if("string"!=typeof Jt||!Jt)throw ce.create("bad-app-name",{appName:String(Jt)});if((0,Q.r3)(Fe,Jt))throw ce.create("duplicate-app",{appName:Jt});var Ot=new Le(dt,Cn,Tt);return Fe[Jt]=Ot,Ot},app:st,registerVersion:function cn(dt,ft,xr){var Cn,Jt=null!==(Cn=St[dt])&&void 0!==Cn?Cn:dt;xr&&(Jt+="-"+xr);var Ot=Jt.match(/\s|\//),rn=ft.match(/\s|\//);if(Ot||rn){var In=['Unable to register library "'+Jt+'" with version "'+ft+'":'];return Ot&&In.push('library name "'+Jt+'" contains illegal characters (whitespace or "/")'),Ot&&rn&&In.push("and"),rn&&In.push('version name "'+ft+'" contains illegal characters (whitespace or "/")'),void Nt.warn(In.join(" "))}Gd(new le.wA(Jt+"-version",function(){return{library:Jt,version:ft}},"VERSION"))},setLogLevel:X.Ub,onLog:function ul(dt,ft){if(null!==dt&&"function"!=typeof dt)throw ce.create("invalid-log-argument");(0,X.Am)(dt,ft)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Gd,removeApp:function bt(dt){delete Fe[dt]},components:je,useAsService:function Go(dt,ft){return"serverAuth"===ft?null:ft}}};function st(dt){if(!(0,Q.r3)(Fe,dt=dt||Se))throw ce.create("no-app",{appName:dt});return Fe[dt]}function Gd(dt){var ft=dt.name;if(je.has(ft))return Nt.debug("There were multiple attempts to register component "+ft+"."),"PUBLIC"===dt.type?Tt[ft]:null;if(je.set(ft,dt),"PUBLIC"===dt.type){var xr=function(rn){if(void 0===rn&&(rn=st()),"function"!=typeof rn[ft])throw ce.create("invalid-app-argument",{appName:ft});return rn[ft]()};void 0!==dt.serviceProps&&(0,Q.ZB)(xr,dt.serviceProps),Tt[ft]=xr,Le.prototype[ft]=function(){for(var rn=[],In=0;In<arguments.length;In++)rn[In]=arguments[In];return this._getService.bind(this,ft).apply(this,dt.multipleInstances?rn:[])}}for(var Cn=0,Jt=Object.keys(Fe);Cn<Jt.length;Cn++)Fe[Jt[Cn]]._addComponent(dt);return"PUBLIC"===dt.type?Tt[ft]:null}return Tt.default=Tt,Object.defineProperty(Tt,"apps",{get:function yu(){return Object.keys(Fe).map(function(dt){return Fe[dt]})}}),st.App=Le,Tt}(Mr);return Le.INTERNAL=(0,m.pi)((0,m.pi)({},Le.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function Fe(je){(0,Q.ZB)(Le,je)},createSubscribe:Q.ne,ErrorFactory:Q.LL,deepExtend:Q.ZB}),Le}(),oe=function(){function Le(Fe){this.container=Fe}return Le.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(je){if(function J(Le){var Fe=Le.getComponent();return"VERSION"===(null==Fe?void 0:Fe.type)}(je)){var Tt=je.getImmediate();return Tt.library+"/"+Tt.version}return null}).filter(function(je){return je}).join(" ")},Le}();if((0,Q.jU)()&&void 0!==self.firebase){Nt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&Nt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ht=z.initializeApp;z.initializeApp=function(){for(var Le=[],Fe=0;Fe<arguments.length;Fe++)Le[Fe]=arguments[Fe];return(0,Q.UG)()&&Nt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ht.apply(void 0,Le)};var It=z;!function fe(Le,Fe){Le.INTERNAL.registerComponent(new le.wA("platform-logger",function(je){return new oe(je)},"PRIVATE")),Le.registerVersion(ie,"0.6.30",Fe),Le.registerVersion("fire-js","")}(It);const Xe=It},2461:(Ve,me,N)=>{N.d(me,{H0:()=>ie,wA:()=>le});var m=N(655),Q=N(492),le=function(){function H(x,P,k){this.name=x,this.instanceFactory=P,this.type=k,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return H.prototype.setInstantiationMode=function(x){return this.instantiationMode=x,this},H.prototype.setMultipleInstances=function(x){return this.multipleInstances=x,this},H.prototype.setServiceProps=function(x){return this.serviceProps=x,this},H.prototype.setInstanceCreatedCallback=function(x){return this.onInstanceCreated=x,this},H}(),X="[DEFAULT]",ne=function(){function H(x,P){this.name=x,this.container=P,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return H.prototype.get=function(x){var P=this.normalizeInstanceIdentifier(x);if(!this.instancesDeferred.has(P)){var k=new Q.BH;if(this.instancesDeferred.set(P,k),this.isInitialized(P)||this.shouldAutoInitialize())try{var R=this.getOrInitializeService({instanceIdentifier:P});R&&k.resolve(R)}catch(j){}}return this.instancesDeferred.get(P).promise},H.prototype.getImmediate=function(x){var P,k=this.normalizeInstanceIdentifier(null==x?void 0:x.identifier),R=null!==(P=null==x?void 0:x.optional)&&void 0!==P&&P;if(!this.isInitialized(k)&&!this.shouldAutoInitialize()){if(R)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:k})}catch(j){if(R)return null;throw j}},H.prototype.getComponent=function(){return this.component},H.prototype.setComponent=function(x){var P,k;if(x.name!==this.name)throw Error("Mismatching Component "+x.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=x,this.shouldAutoInitialize()){if(function ce(H){return"EAGER"===H.instantiationMode}(x))try{this.getOrInitializeService({instanceIdentifier:X})}catch(_e){}try{for(var R=(0,m.XA)(this.instancesDeferred.entries()),j=R.next();!j.done;j=R.next()){var re=(0,m.CR)(j.value,2),ue=re[1],Ue=this.normalizeInstanceIdentifier(re[0]);try{var Ce=this.getOrInitializeService({instanceIdentifier:Ue});ue.resolve(Ce)}catch(_e){}}}catch(_e){P={error:_e}}finally{try{j&&!j.done&&(k=R.return)&&k.call(R)}finally{if(P)throw P.error}}}},H.prototype.clearInstance=function(x){void 0===x&&(x=X),this.instancesDeferred.delete(x),this.instancesOptions.delete(x),this.instances.delete(x)},H.prototype.delete=function(){return(0,m.mG)(this,void 0,void 0,function(){var x;return(0,m.Jh)(this,function(P){switch(P.label){case 0:return x=Array.from(this.instances.values()),[4,Promise.all((0,m.ev)((0,m.ev)([],(0,m.CR)(x.filter(function(k){return"INTERNAL"in k}).map(function(k){return k.INTERNAL.delete()}))),(0,m.CR)(x.filter(function(k){return"_delete"in k}).map(function(k){return k._delete()}))))];case 1:return P.sent(),[2]}})})},H.prototype.isComponentSet=function(){return null!=this.component},H.prototype.isInitialized=function(x){return void 0===x&&(x=X),this.instances.has(x)},H.prototype.getOptions=function(x){return void 0===x&&(x=X),this.instancesOptions.get(x)||{}},H.prototype.initialize=function(x){var P,k;void 0===x&&(x={});var R=x.options,j=void 0===R?{}:R,re=this.normalizeInstanceIdentifier(x.instanceIdentifier);if(this.isInitialized(re))throw Error(this.name+"("+re+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ee=this.getOrInitializeService({instanceIdentifier:re,options:j});try{for(var ue=(0,m.XA)(this.instancesDeferred.entries()),Ue=ue.next();!Ue.done;Ue=ue.next()){var Ce=(0,m.CR)(Ue.value,2),qe=Ce[1];re===this.normalizeInstanceIdentifier(Ce[0])&&qe.resolve(ee)}}catch(Se){P={error:Se}}finally{try{Ue&&!Ue.done&&(k=ue.return)&&k.call(ue)}finally{if(P)throw P.error}}return ee},H.prototype.onInit=function(x,P){var k,R=this.normalizeInstanceIdentifier(P),j=null!==(k=this.onInitCallbacks.get(R))&&void 0!==k?k:new Set;j.add(x),this.onInitCallbacks.set(R,j);var re=this.instances.get(R);return re&&x(re,R),function(){j.delete(x)}},H.prototype.invokeOnInitCallbacks=function(x,P){var k,R,j=this.onInitCallbacks.get(P);if(j)try{for(var re=(0,m.XA)(j),ee=re.next();!ee.done;ee=re.next()){var ue=ee.value;try{ue(x,P)}catch(Ue){}}}catch(Ue){k={error:Ue}}finally{try{ee&&!ee.done&&(R=re.return)&&R.call(re)}finally{if(k)throw k.error}}},H.prototype.getOrInitializeService=function(x){var P=x.instanceIdentifier,k=x.options,R=void 0===k?{}:k,j=this.instances.get(P);if(!j&&this.component&&(j=this.component.instanceFactory(this.container,{instanceIdentifier:K(P),options:R}),this.instances.set(P,j),this.instancesOptions.set(P,R),this.invokeOnInitCallbacks(j,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,j)}catch(re){}return j||null},H.prototype.normalizeInstanceIdentifier=function(x){return void 0===x&&(x=X),this.component?this.component.multipleInstances?x:X:x},H.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},H}();function K(H){return H===X?void 0:H}var ie=function(){function H(x){this.name=x,this.providers=new Map}return H.prototype.addComponent=function(x){var P=this.getProvider(x.name);if(P.isComponentSet())throw new Error("Component "+x.name+" has already been registered with "+this.name);P.setComponent(x)},H.prototype.addOrOverwriteComponent=function(x){this.getProvider(x.name).isComponentSet()&&this.providers.delete(x.name),this.addComponent(x)},H.prototype.getProvider=function(x){if(this.providers.has(x))return this.providers.get(x);var P=new ne(x,this);return this.providers.set(x,P),P},H.prototype.getProviders=function(){return Array.from(this.providers.values())},H}()},4003:(Ve,me,N)=>{function m(){for(var k=0,R=0,j=arguments.length;R<j;R++)k+=arguments[R].length;var re=Array(k),ee=0;for(R=0;R<j;R++)for(var ue=arguments[R],Ue=0,Ce=ue.length;Ue<Ce;Ue++,ee++)re[ee]=ue[Ue];return re}N.d(me,{Am:()=>P,Ub:()=>x,Yd:()=>H,in:()=>X});var Q,le=[],X=(()=>{return(k=X||(X={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",X;var k})(),ne={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},K=X.INFO,ce=((Q={})[X.DEBUG]="log",Q[X.VERBOSE]="log",Q[X.INFO]="info",Q[X.WARN]="warn",Q[X.ERROR]="error",Q),ie=function(k,R){for(var j=[],re=2;re<arguments.length;re++)j[re-2]=arguments[re];if(!(R<k.logLevel)){var ee=(new Date).toISOString(),ue=ce[R];if(!ue)throw new Error("Attempted to log a message with an invalid logType (value: "+R+")");console[ue].apply(console,m(["["+ee+"]  "+k.name+":"],j))}},H=function(){function k(R){this.name=R,this._logLevel=K,this._logHandler=ie,this._userLogHandler=null,le.push(this)}return Object.defineProperty(k.prototype,"logLevel",{get:function(){return this._logLevel},set:function(R){if(!(R in X))throw new TypeError('Invalid value "'+R+'" assigned to `logLevel`');this._logLevel=R},enumerable:!1,configurable:!0}),k.prototype.setLogLevel=function(R){this._logLevel="string"==typeof R?ne[R]:R},Object.defineProperty(k.prototype,"logHandler",{get:function(){return this._logHandler},set:function(R){if("function"!=typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(R){this._userLogHandler=R},enumerable:!1,configurable:!0}),k.prototype.debug=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];this._userLogHandler&&this._userLogHandler.apply(this,m([this,X.DEBUG],R)),this._logHandler.apply(this,m([this,X.DEBUG],R))},k.prototype.log=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];this._userLogHandler&&this._userLogHandler.apply(this,m([this,X.VERBOSE],R)),this._logHandler.apply(this,m([this,X.VERBOSE],R))},k.prototype.info=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];this._userLogHandler&&this._userLogHandler.apply(this,m([this,X.INFO],R)),this._logHandler.apply(this,m([this,X.INFO],R))},k.prototype.warn=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];this._userLogHandler&&this._userLogHandler.apply(this,m([this,X.WARN],R)),this._logHandler.apply(this,m([this,X.WARN],R))},k.prototype.error=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];this._userLogHandler&&this._userLogHandler.apply(this,m([this,X.ERROR],R)),this._logHandler.apply(this,m([this,X.ERROR],R))},k}();function x(k){le.forEach(function(R){R.setLogLevel(k)})}function P(k,R){for(var j=function(Ue){var Ce=null;R&&R.level&&(Ce=ne[R.level]),Ue.userLogHandler=null===k?null:function(_e,qe){for(var xe=[],Se=2;Se<arguments.length;Se++)xe[Se-2]=arguments[Se];var St=xe.map(function(Nt){if(null==Nt)return null;if("string"==typeof Nt)return Nt;if("number"==typeof Nt||"boolean"==typeof Nt)return Nt.toString();if(Nt instanceof Error)return Nt.message;try{return JSON.stringify(Nt)}catch(Mr){return null}}).filter(function(Nt){return Nt}).join(" ");qe>=(null!=Ce?Ce:_e.logLevel)&&k({level:X[qe].toLowerCase(),message:St,args:xe,type:_e.name})}},re=0,ee=le;re<ee.length;re++)j(ee[re])}},492:(Ve,me,N)=>{N.d(me,{BH:()=>j,G6:()=>Mr,LL:()=>fe,Mn:()=>St,Sg:()=>re,UG:()=>Ue,ZB:()=>k,b$:()=>qe,d:()=>xe,jU:()=>Ce,m9:()=>Ht,ne:()=>Cn,p$:()=>P,r3:()=>st,ru:()=>_e,uI:()=>ue,w1:()=>Se,z$:()=>ee});var m=N(655),ne=function(L){for(var M=[],$=0,Z=0;Z<L.length;Z++){var G=L.charCodeAt(Z);G<128?M[$++]=G:G<2048?(M[$++]=G>>6|192,M[$++]=63&G|128):55296==(64512&G)&&Z+1<L.length&&56320==(64512&L.charCodeAt(Z+1))?(G=65536+((1023&G)<<10)+(1023&L.charCodeAt(++Z)),M[$++]=G>>18|240,M[$++]=G>>12&63|128,M[$++]=G>>6&63|128,M[$++]=63&G|128):(M[$++]=G>>12|224,M[$++]=G>>6&63|128,M[$++]=63&G|128)}return M},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(L,M){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var $=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[],G=0;G<L.length;G+=3){var de=L[G],$e=G+1<L.length,pt=$e?L[G+1]:0,wt=G+2<L.length,vt=wt?L[G+2]:0,pr=(15&pt)<<2|vt>>6,ro=63&vt;wt||(ro=64,$e||(pr=64)),Z.push($[de>>2],$[(3&de)<<4|pt>>4],$[pr],$[ro])}return Z.join("")},encodeString:function(L,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(L):this.encodeByteArray(ne(L),M)},decodeString:function(L,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(L):function(L){for(var M=[],$=0,Z=0;$<L.length;){var G=L[$++];if(G<128)M[Z++]=String.fromCharCode(G);else if(G>191&&G<224){var de=L[$++];M[Z++]=String.fromCharCode((31&G)<<6|63&de)}else if(G>239&&G<365){var wt=((7&G)<<18|(63&(de=L[$++]))<<12|(63&($e=L[$++]))<<6|63&L[$++])-65536;M[Z++]=String.fromCharCode(55296+(wt>>10)),M[Z++]=String.fromCharCode(56320+(1023&wt))}else{de=L[$++];var $e=L[$++];M[Z++]=String.fromCharCode((15&G)<<12|(63&de)<<6|63&$e)}}return M.join("")}(this.decodeStringToByteArray(L,M))},decodeStringToByteArray:function(L,M){this.init_();for(var $=M?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[],G=0;G<L.length;){var de=$[L.charAt(G++)],pt=G<L.length?$[L.charAt(G)]:0,vt=++G<L.length?$[L.charAt(G)]:64,yn=++G<L.length?$[L.charAt(G)]:64;if(++G,null==de||null==pt||null==vt||null==yn)throw Error();Z.push(de<<2|pt>>4),64!==vt&&(Z.push(pt<<4&240|vt>>2),64!==yn&&Z.push(vt<<6&192|yn))}return Z},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},H=function(L){return function(L){var M=ne(L);return ce.encodeByteArray(M,!0)}(L).replace(/\./g,"")};function P(L){return k(void 0,L)}function k(L,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:return new Date(M.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return M}for(var Z in M)!M.hasOwnProperty(Z)||!R(Z)||(L[Z]=k(L[Z],M[Z]));return L}function R(L){return"__proto__"!==L}var j=function(){function L(){var M=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function($,Z){M.resolve=$,M.reject=Z})}return L.prototype.wrapCallback=function(M){var $=this;return function(Z,G){Z?$.reject(Z):$.resolve(G),"function"==typeof M&&($.promise.catch(function(){}),1===M.length?M(Z):M(Z,G))}},L}();function re(L,M){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Z=M||"demo-project",G=L.iat||0,de=L.sub||L.user_id;if(!de)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var $e=(0,m.pi)({iss:"https://securetoken.google.com/"+Z,aud:Z,iat:G,exp:G+3600,auth_time:G,sub:de,user_id:de,firebase:{sign_in_provider:"custom",identities:{}}},L);return[H(JSON.stringify({alg:"none",type:"JWT"})),H(JSON.stringify($e)),""].join(".")}function ee(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ee())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function _e(){var L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return ee().indexOf("Electron/")>=0}function Se(){var L=ee();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function St(){return ee().indexOf("MSAppHost/")>=0}function Mr(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var J=function(L){function M($,Z,G){var de=L.call(this,Z)||this;return de.code=$,de.customData=G,de.name="FirebaseError",Object.setPrototypeOf(de,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(de,fe.prototype.create),de}return(0,m.ZT)(M,L),M}(Error),fe=function(){function L(M,$,Z){this.service=M,this.serviceName=$,this.errors=Z}return L.prototype.create=function(M){for(var $=[],Z=1;Z<arguments.length;Z++)$[Z-1]=arguments[Z];var G=$[0]||{},de=this.service+"/"+M,$e=this.errors[M],pt=$e?Ne($e,G):"Error",wt=this.serviceName+": "+pt+" ("+de+").",vt=new J(de,wt,G);return vt},L}();function Ne(L,M){return L.replace(ht,function($,Z){var G=M[Z];return null!=G?String(G):"<"+Z+"?>"})}var ht=/\{\$([^}]+)}/g;function st(L,M){return Object.prototype.hasOwnProperty.call(L,M)}function Cn(L,M){var $=new Jt(L,M);return $.subscribe.bind($)}!function(){function L(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var M=1;M<this.blockSize;++M)this.pad_[M]=0;this.reset()}L.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},L.prototype.compress_=function(M,$){$||($=0);var Z=this.W_;if("string"==typeof M)for(var G=0;G<16;G++)Z[G]=M.charCodeAt($)<<24|M.charCodeAt($+1)<<16|M.charCodeAt($+2)<<8|M.charCodeAt($+3),$+=4;else for(G=0;G<16;G++)Z[G]=M[$]<<24|M[$+1]<<16|M[$+2]<<8|M[$+3],$+=4;for(G=16;G<80;G++)Z[G]=4294967295&((de=Z[G-3]^Z[G-8]^Z[G-14]^Z[G-16])<<1|de>>>31);var yn,pr,$e=this.chain_[0],pt=this.chain_[1],wt=this.chain_[2],vt=this.chain_[3],kt=this.chain_[4];for(G=0;G<80;G++){G<40?G<20?(yn=vt^pt&(wt^vt),pr=1518500249):(yn=pt^wt^vt,pr=1859775393):G<60?(yn=pt&wt|vt&(pt|wt),pr=2400959708):(yn=pt^wt^vt,pr=3395469782);var de=($e<<5|$e>>>27)+yn+kt+pr+Z[G]&4294967295;kt=vt,vt=wt,wt=4294967295&(pt<<30|pt>>>2),pt=$e,$e=de}this.chain_[0]=this.chain_[0]+$e&4294967295,this.chain_[1]=this.chain_[1]+pt&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+vt&4294967295,this.chain_[4]=this.chain_[4]+kt&4294967295},L.prototype.update=function(M,$){if(null!=M){void 0===$&&($=M.length);for(var Z=$-this.blockSize,G=0,de=this.buf_,$e=this.inbuf_;G<$;){if(0===$e)for(;G<=Z;)this.compress_(M,G),G+=this.blockSize;if("string"==typeof M){for(;G<$;)if(de[$e]=M.charCodeAt(G),++G,++$e===this.blockSize){this.compress_(de),$e=0;break}}else for(;G<$;)if(de[$e]=M[G],++G,++$e===this.blockSize){this.compress_(de),$e=0;break}}this.inbuf_=$e,this.total_+=$}},L.prototype.digest=function(){var M=[],$=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&$,$/=256;this.compress_(this.buf_);var G=0;for(Z=0;Z<5;Z++)for(var de=24;de>=0;de-=8)M[G]=this.chain_[Z]>>de&255,++G;return M}}();var Jt=function(){function L(M,$){var Z=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(function(){M(Z)}).catch(function(G){Z.error(G)})}return L.prototype.next=function(M){this.forEachObserver(function($){$.next(M)})},L.prototype.error=function(M){this.forEachObserver(function($){$.error(M)}),this.close(M)},L.prototype.complete=function(){this.forEachObserver(function(M){M.complete()}),this.close()},L.prototype.subscribe=function(M,$,Z){var de,G=this;if(void 0===M&&void 0===$&&void 0===Z)throw new Error("Missing Observer.");de=function rn(L,M){if("object"!=typeof L||null===L)return!1;for(var $=0,Z=M;$<Z.length;$++){var G=Z[$];if(G in L&&"function"==typeof L[G])return!0}return!1}(M,["next","error","complete"])?M:{next:M,error:$,complete:Z},void 0===de.next&&(de.next=In),void 0===de.error&&(de.error=In),void 0===de.complete&&(de.complete=In);var $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{G.finalError?de.error(G.finalError):de.complete()}catch(pt){}}),this.observers.push(de),$e},L.prototype.unsubscribeOne=function(M){void 0===this.observers||void 0===this.observers[M]||(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},L.prototype.forEachObserver=function(M){if(!this.finalized)for(var $=0;$<this.observers.length;$++)this.sendOne($,M)},L.prototype.sendOne=function(M,$){var Z=this;this.task.then(function(){if(void 0!==Z.observers&&void 0!==Z.observers[M])try{$(Z.observers[M])}catch(G){"undefined"!=typeof console&&console.error&&console.error(G)}})},L.prototype.close=function(M){var $=this;this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then(function(){$.observers=void 0,$.onNoObservers=void 0}))},L}();function In(){}function Ht(L){return L&&L._delegate?L._delegate:L}},1954:(Ve,me,N)=>{var m=N(6435);let Q=null;function le(){return Q}const ce=new m.OlP("DocumentToken");let ie=(()=>{class t{historyGo(i){throw new Error("Not implemented")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m.Yz7({token:t,factory:function(){return function H(){return(0,m.LFG)(P)}()},providedIn:"platform"}),t})();const x=new m.OlP("Location Initialized");let P=(()=>{class t extends ie{constructor(i){super(),this._doc=i,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(i){const o=le().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",i,!1),()=>o.removeEventListener("popstate",i)}onHashChange(i){const o=le().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",i,!1),()=>o.removeEventListener("hashchange",i)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(i){this.location.pathname=i}pushState(i,o,u){k()?this._history.pushState(i,o,u):this.location.hash=u}replaceState(i,o,u){k()?this._history.replaceState(i,o,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ce))},t.\u0275prov=m.Yz7({token:t,factory:function(){return function R(){return new P((0,m.LFG)(ce))}()},providedIn:"platform"}),t})();function k(){return!!window.history.pushState}function j(t,e){if(0==t.length)return e;if(0==e.length)return t;let i=0;return t.endsWith("/")&&i++,e.startsWith("/")&&i++,2==i?t+e.substring(1):1==i?t+e:t+"/"+e}function re(t){const e=t.match(/#|\?|$/),i=e&&e.index||t.length;return t.slice(0,i-("/"===t[i-1]?1:0))+t.slice(i)}function ee(t){return t&&"?"!==t[0]?"?"+t:t}let ue=(()=>{class t{historyGo(i){throw new Error("Not implemented")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m.Yz7({token:t,factory:function(){return function Ue(t){const e=(0,m.LFG)(ce).location;return new _e((0,m.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),t})();const Ce=new m.OlP("appBaseHref");let _e=(()=>{class t extends ue{constructor(i,o){if(super(),this._platformLocation=i,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return j(this._baseHref,i)}path(i=!1){const o=this._platformLocation.pathname+ee(this._platformLocation.search),u=this._platformLocation.hash;return u&&i?`${o}${u}`:o}pushState(i,o,u,l){const f=this.prepareExternalUrl(u+ee(l));this._platformLocation.pushState(i,o,f)}replaceState(i,o,u,l){const f=this.prepareExternalUrl(u+ee(l));this._platformLocation.replaceState(i,o,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var o,u;null===(u=(o=this._platformLocation).historyGo)||void 0===u||u.call(o,i)}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ie),m.LFG(Ce,8))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),qe=(()=>{class t extends ue{constructor(i,o){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(i){const o=j(this._baseHref,i);return o.length>0?"#"+o:o}pushState(i,o,u,l){let f=this.prepareExternalUrl(u+ee(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(i,o,f)}replaceState(i,o,u,l){let f=this.prepareExternalUrl(u+ee(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(i,o,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var o,u;null===(u=(o=this._platformLocation).historyGo)||void 0===u||u.call(o,i)}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ie),m.LFG(Ce,8))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),xe=(()=>{class t{constructor(i,o){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=i;const u=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=re(Nt(u)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(i=!1){return this.normalize(this._platformStrategy.path(i))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(i,o=""){return this.path()==this.normalize(i+ee(o))}normalize(i){return t.stripTrailingSlash(function St(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Nt(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._platformStrategy.prepareExternalUrl(i)}go(i,o="",u=null){this._platformStrategy.pushState(u,"",i,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ee(o)),u)}replaceState(i,o="",u=null){this._platformStrategy.replaceState(u,"",i,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ee(o)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(i=0){var o,u;null===(u=(o=this._platformStrategy).historyGo)||void 0===u||u.call(o,i)}onUrlChange(i){this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(i="",o){this._urlChangeListeners.forEach(u=>u(i,o))}subscribe(i,o,u){return this._subject.subscribe({next:i,error:o,complete:u})}}return t.normalizeQueryParams=ee,t.joinWithSlash=j,t.stripTrailingSlash=re,t.\u0275fac=function(i){return new(i||t)(m.LFG(ue),m.LFG(ie))},t.\u0275prov=m.Yz7({token:t,factory:function(){return function Se(){return new xe((0,m.LFG)(ue),(0,m.LFG)(ie))}()},providedIn:"root"}),t})();function Nt(t){return t.replace(/\/index.html$/,"")}var q=(()=>((q=q||{})[q.Zero=0]="Zero",q[q.One=1]="One",q[q.Two=2]="Two",q[q.Few=3]="Few",q[q.Many=4]="Many",q[q.Other=5]="Other",q))();const dt=m.kL8;class rt{}let gr=(()=>{class t extends rt{constructor(i){super(),this.locale=i}getPluralCategory(i,o){switch(dt(o||this.locale)(i)){case q.Zero:return"zero";case q.One:return"one";case q.Two:return"two";case q.Few:return"few";case q.Many:return"many";default:return"other"}}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(m.soG))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();class wu{constructor(e,i,o,u){this.$implicit=e,this.ngForOf=i,this.index=o,this.count=u}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $o=(()=>{class t{constructor(i,o,u){this._viewContainer=i,this._template=o,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;if(!this._differ&&i)try{this._differ=this._differs.find(i).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${i}' of type '${function fl(t){return t.name||typeof t}(i)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const o=[];i.forEachOperation((u,l,f)=>{if(null==u.previousIndex){const g=this._viewContainer.createEmbeddedView(this._template,new wu(null,this._ngForOf,-1,-1),null===f?void 0:f),_=new tt(u,g);o.push(_)}else if(null==f)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const g=this._viewContainer.get(l);this._viewContainer.move(g,f);const _=new tt(u,g);o.push(_)}});for(let u=0;u<o.length;u++)this._perViewChange(o[u].view,o[u].record);for(let u=0,l=this._viewContainer.length;u<l;u++){const f=this._viewContainer.get(u);f.context.index=u,f.context.count=l,f.context.ngForOf=this._ngForOf}i.forEachIdentityChange(u=>{this._viewContainer.get(u.currentIndex).context.$implicit=u.item})}_perViewChange(i,o){i.context.$implicit=o.item}static ngTemplateContextGuard(i,o){return!0}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},t.\u0275dir=m.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class tt{constructor(e,i){this.record=e,this.view=i}}let qo=(()=>{class t{constructor(i,o){this._viewContainer=i,this._context=new Wd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){zo("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){zo("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,o){return!0}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(m.s_b),m.Y36(m.Rgc))},t.\u0275dir=m.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Wd{constructor(){this.$implicit=null,this.ngIf=null}}function zo(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Ko=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[{provide:rt,useClass:gr}]}),t})();let bb=(()=>{class t{}return t.\u0275prov=(0,m.Yz7)({token:t,providedIn:"root",factory:()=>new Fr((0,m.LFG)(ce),window)}),t})();class Fr{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const i=function Cm(t,e){const i=t.getElementById(e)||t.getElementsByName(e)[0];if(i)return i;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const o=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let u=o.currentNode;for(;u;){const l=u.shadowRoot;if(l){const f=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(f)return f}u=o.nextNode()}}return null}(this.document,e);i&&(this.scrollToElement(i),this.attemptFocus(i))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const i=this.window.history;i&&i.scrollRestoration&&(i.scrollRestoration=e)}}scrollToElement(e){const i=e.getBoundingClientRect(),o=i.left+this.window.pageXOffset,u=i.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(o-l[0],u-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qd(this.window.history)||Qd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qd(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Tm extends class Zd extends class K{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(t){Q||(Q=t)}(new Tm)}onAndCancel(e,i,o){return e.addEventListener(i,o,!1),()=>{e.removeEventListener(i,o,!1)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return(i=i||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return"window"===i?window:"document"===i?e:"body"===i?e.body:null}getBaseHref(e){const i=function Sm(){return At=At||document.querySelector("base"),At?At.getAttribute("href"):null}();return null==i?null:function Xt(t){gl=gl||document.createElement("a"),gl.setAttribute("href",t);const e=gl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(i)}resetBaseElement(){At=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ln(t,e){e=encodeURIComponent(e);for(const i of t.split(";")){const o=i.indexOf("="),[u,l]=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)];if(u.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let gl,At=null;const Am=new m.OlP("TRANSITION_ID"),ml=[{provide:m.ip1,useFactory:function RC(t,e,i){return()=>{i.get(m.CZH).donePromise.then(()=>{const o=le(),u=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let l=0;l<u.length;l++)o.remove(u[l])})}},deps:[Am,ce,m.zs3],multi:!0}];class Xn{static init(){(0,m.VLi)(new Xn)}addToWindow(e){m.dqk.getAngularTestability=(o,u=!0)=>{const l=e.findTestabilityInTree(o,u);if(null==l)throw new Error("Could not find testability for element.");return l},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(o=>{const u=m.dqk.getAllAngularTestabilities();let l=u.length,f=!1;const g=function(_){f=f||_,l--,0==l&&o(f)};u.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,i,o){if(null==i)return null;const u=e.getTestability(i);return null!=u?u:o?le().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null}}let Db=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();const Ks=new m.OlP("EventManagerPlugins");let ki=(()=>{class t{constructor(i,o){this._zone=o,this._eventNameToPlugin=new Map,i.forEach(u=>u.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,o,u){return this._findPluginFor(o).addEventListener(i,o,u)}addGlobalEventListener(i,o,u){return this._findPluginFor(o).addGlobalEventListener(i,o,u)}getZone(){return this._zone}_findPluginFor(i){const o=this._eventNameToPlugin.get(i);if(o)return o;const u=this._plugins;for(let l=0;l<u.length;l++){const f=u[l];if(f.supports(i))return this._eventNameToPlugin.set(i,f),f}throw new Error(`No event manager plugin found for event ${i}`)}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(Ks),m.LFG(m.R0b))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();class er{constructor(e){this._doc=e}addGlobalEventListener(e,i,o){const u=le().getGlobalEventTarget(this._doc,e);if(!u)throw new Error(`Unsupported event target ${u} for event ${i}`);return this.addEventListener(u,i,o)}}let Jd=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(i){const o=new Set;i.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),o.add(u))}),this.onStylesAdded(o)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),Yo=(()=>{class t extends Jd{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,o,u){i.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,u.push(o.appendChild(f))})}addHost(i){const o=[];this._addStylesToHost(this._stylesSet,i,o),this._hostNodes.set(i,o)}removeHost(i){const o=this._hostNodes.get(i);o&&o.forEach(Mm),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((o,u)=>{this._addStylesToHost(i,u,o)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(Mm))}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ce))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();function Mm(t){le().remove(t)}const fi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yl=/%COMP%/g;function Eu(t,e,i){for(let o=0;o<e.length;o++){let u=e[o];Array.isArray(u)?Eu(t,u,i):(u=u.replace(yl,t),i.push(u))}return i}function xm(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let he=(()=>{class t{constructor(i,o,u){this.eventManager=i,this.sharedStylesHost=o,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new ct(i)}createRenderer(i,o){if(!i||!o)return this.defaultRenderer;switch(o.encapsulation){case m.ifc.Emulated:{let u=this.rendererByCompId.get(o.id);return u||(u=new Om(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(i),u}case 1:case m.ifc.ShadowDom:return new Cu(this.eventManager,this.sharedStylesHost,i,o);default:if(!this.rendererByCompId.has(o.id)){const u=Eu(o.id,o.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ki),m.LFG(Yo),m.LFG(m.AFp))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();class ct{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,i){return i?document.createElementNS(fi[i]||i,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,i){e.appendChild(i)}insertBefore(e,i,o){e&&e.insertBefore(i,o)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return i||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,o,u){if(u){i=u+":"+i;const l=fi[u];l?e.setAttributeNS(l,i,o):e.setAttribute(i,o)}else e.setAttribute(i,o)}removeAttribute(e,i,o){if(o){const u=fi[o];u?e.removeAttributeNS(u,i):e.removeAttribute(`${o}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,o,u){u&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(i,o,u&m.JOm.Important?"important":""):e.style[i]=o}removeStyle(e,i,o){o&m.JOm.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,o){e[i]=o}setValue(e,i){e.nodeValue=i}listen(e,i,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,i,xm(o)):this.eventManager.addEventListener(e,i,xm(o))}}class Om extends ct{constructor(e,i,o,u){super(e),this.component=o;const l=Eu(u+"-"+o.id,o.styles,[]);i.addStyles(l),this.contentAttr=function Cb(t){return"_ngcontent-%COMP%".replace(yl,t)}(u+"-"+o.id),this.hostAttr=function Ib(t){return"_nghost-%COMP%".replace(yl,t)}(u+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,i){const o=super.createElement(e,i);return super.setAttribute(o,this.contentAttr,""),o}}class Cu extends ct{constructor(e,i,o,u){super(e),this.sharedStylesHost=i,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Eu(u.id,u.styles,[]);for(let f=0;f<l.length;f++){const g=document.createElement("style");g.textContent=l[f],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,o){return super.insertBefore(this.nodeOrShadowRoot(e),i,o)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pi=(()=>{class t extends er{constructor(i){super(i)}supports(i){return!0}addEventListener(i,o,u){return i.addEventListener(o,u,!1),()=>this.removeEventListener(i,o,u)}removeEventListener(i,o,u){return i.removeEventListener(o,u)}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ce))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();const _l=["alt","control","meta","shift"],LC={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rm={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let wl=(()=>{class t extends er{constructor(i){super(i)}supports(i){return null!=t.parseEventName(i)}addEventListener(i,o,u){const l=t.parseEventName(o),f=t.eventCallback(l.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>le().onAndCancel(i,l.domEventName,f))}static parseEventName(i){const o=i.toLowerCase().split("."),u=o.shift();if(0===o.length||"keydown"!==u&&"keyup"!==u)return null;const l=t._normalizeKey(o.pop());let f="";if(_l.forEach(_=>{const w=o.indexOf(_);w>-1&&(o.splice(w,1),f+=_+".")}),f+=l,0!=o.length||0===l.length)return null;const g={};return g.domEventName=u,g.fullKey=f,g}static getEventFullKey(i){let o="",u=function jn(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Rm.hasOwnProperty(e)&&(e=Rm[e]))}return LC[e]||e}(i);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),_l.forEach(l=>{l!=u&&bl[l](i)&&(o+=l+".")}),o+=u,o}static eventCallback(i,o,u){return l=>{t.getEventFullKey(l)===i&&u.runGuarded(()=>o(l))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(ce))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();const Tb=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Vi(){Tm.makeCurrent(),Xn.init()},multi:!0},{provide:ce,useFactory:function Ys(){return(0,m.RDi)(document),document},deps:[]}]),Pm=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Fm(){return new m.qLn},deps:[]},{provide:Ks,useClass:pi,multi:!0,deps:[ce,m.R0b,m.Lbi]},{provide:Ks,useClass:wl,multi:!0,deps:[ce]},{provide:he,useClass:he,deps:[ki,Yo,m.AFp]},{provide:m.FYo,useExisting:he},{provide:Jd,useExisting:Yo},{provide:Yo,useClass:Yo,deps:[ce]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ki,useClass:ki,deps:[Ks,m.R0b]},{provide:class wb{},useClass:Db,deps:[]}];let Sb=(()=>{class t{constructor(i){if(i)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(i){return{ngModule:t,providers:[{provide:m.AFp,useValue:i.appId},{provide:Am,useExisting:m.AFp},ml]}}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(t,12))},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:Pm,imports:[Ko,m.hGG]}),t})();"undefined"!=typeof window&&window;var Bt=N(5254),Ye=N(1086),oo=N(8929),Pb=N(5279);class gi extends oo.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const i=super._subscribe(e);return i&&!i.closed&&e.next(this._value),i}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Pb.N;return this._value}next(e){super.next(this._value=e)}}var Iu=N(2866),Tl=N(6688),mr=N(3489);class Sl extends mr.L{notifyNext(e,i,o,u,l){this.destination.next(i)}notifyError(e,i){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Bm extends mr.L{constructor(e,i,o){super(),this.parent=e,this.outerValue=i,this.outerIndex=o,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Gm=N(9249),Bn=N(2916);function Lb(t,e,i,o,u=new Bm(t,i,o)){if(!u.closed)return e instanceof Bn.y?e.subscribe(u):(0,Gm.s)(e)(u)}var Qs=N(3009);const Al={};class $C{constructor(e){this.resultSelector=e}call(e,i){return i.subscribe(new Hm(e,this.resultSelector))}}class Hm extends Sl{constructor(e,i){super(e),this.resultSelector=i,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Al),this.observables.push(e)}_complete(){const e=this.observables,i=e.length;if(0===i)this.destination.complete();else{this.active=i,this.toRespond=i;for(let o=0;o<i;o++)this.add(Lb(this,e[o],void 0,o))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,i,o){const u=this.values,f=this.toRespond?u[o]===Al?--this.toRespond:this.toRespond:0;u[o]=i,0===f&&(this.resultSelector?this._tryResultSelector(u):this.destination.next(u.slice()))}_tryResultSelector(e){let i;try{i=this.resultSelector.apply(this,e)}catch(o){return void this.destination.error(o)}this.destination.next(i)}}const xl=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Nl=N(9146);function Su(...t){return function Tu(){return(0,Nl.J)(1)}()((0,Ye.of)(...t))}var mi=N(8896);function Au(t){return new Bn.y(e=>{let i;try{i=t()}catch(u){return void e.error(u)}return(i?(0,Bt.D)(i):(0,mi.c)()).subscribe(e)})}var Ol=N(1762),it=N(4850),Jo=N(1177);function vn(t,e){return"function"==typeof e?i=>i.pipe(vn((o,u)=>(0,Bt.D)(t(o,u)).pipe((0,it.U)((l,f)=>e(o,l,u,f))))):i=>i.lift(new $m(t))}class $m{constructor(e){this.project=e}call(e,i){return i.subscribe(new qm(e,this.project))}}class qm extends Jo.Ds{constructor(e,i){super(e),this.project=i,this.index=0}_next(e){let i;const o=this.index++;try{i=this.project(e,o)}catch(u){return void this.destination.error(u)}this._innerSub(i)}_innerSub(e){const i=this.innerSubscription;i&&i.unsubscribe();const o=new Jo.IY(this),u=this.destination;u.add(o),this.innerSubscription=(0,Jo.ft)(e,o),this.innerSubscription!==o&&u.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const zm=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Zs(t){return e=>0===t?(0,mi.c)():e.lift(new Mu(t))}class Mu{constructor(e){if(this.total=e,this.total<0)throw new zm}call(e,i){return i.subscribe(new Vb(e,this.total))}}class Vb extends mr.L{constructor(e,i){super(e),this.total=i,this.count=0}_next(e){const i=this.total,o=++this.count;o<=i&&(this.destination.next(e),o===i&&(this.destination.complete(),this.unsubscribe()))}}function xu(...t){const e=t[t.length-1];return(0,Iu.K)(e)?(t.pop(),i=>Su(t,i,e)):i=>Su(t,i)}function Js(t,e){let i=!1;return arguments.length>=2&&(i=!0),function(u){return u.lift(new Xs(t,e,i))}}class Xs{constructor(e,i,o=!1){this.accumulator=e,this.seed=i,this.hasSeed=o}call(e,i){return i.subscribe(new Wm(e,this.accumulator,this.seed,this.hasSeed))}}class Wm extends mr.L{constructor(e,i,o,u){super(e),this.accumulator=i,this._seed=o,this.hasSeed=u,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const i=this.index++;let o;try{o=this.accumulator(this.seed,e,i)}catch(u){this.destination.error(u)}this.seed=o,this.destination.next(o)}}function Yr(t,e){return function(o){return o.lift(new uf(t,e))}}class uf{constructor(e,i){this.predicate=e,this.thisArg=i}call(e,i){return i.subscribe(new ea(e,this.predicate,this.thisArg))}}class ea extends mr.L{constructor(e,i,o){super(e),this.predicate=i,this.thisArg=o,this.count=0}_next(e){let i;try{i=this.predicate.call(this.thisArg,e,this.count++)}catch(o){return void this.destination.error(o)}i&&this.destination.next(e)}}function Pr(t){return function(i){const o=new ta(t),u=i.lift(o);return o.caught=u}}class ta{constructor(e){this.selector=e}call(e,i){return i.subscribe(new Km(e,this.selector,this.caught))}}class Km extends Jo.Ds{constructor(e,i,o){super(e),this.selector=i,this.caught=o}error(e){if(!this.isStopped){let i;try{i=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const o=new Jo.IY(this);this.add(o);const u=(0,Jo.ft)(i,o);u!==o&&this.add(u)}}}var _n=N(1709);function yi(t,e){return(0,_n.zg)(t,e,1)}function Ym(t){return function(i){return 0===t?(0,mi.c)():i.lift(new Ub(t))}}class Ub{constructor(e){if(this.total=e,this.total<0)throw new zm}call(e,i){return i.subscribe(new $t(e,this.total))}}class $t extends mr.L{constructor(e,i){super(e),this.total=i,this.ring=new Array,this.count=0}_next(e){const i=this.ring,o=this.total,u=this.count++;i.length<o?i.push(e):i[u%o]=e}_complete(){const e=this.destination;let i=this.count;if(i>0){const o=this.count>=this.total?this.total:this.count,u=this.ring;for(let l=0;l<o;l++){const f=i++%o;e.next(u[f])}}e.complete()}}function Qm(t=KC){return e=>e.lift(new zC(t))}class zC{constructor(e){this.errorFactory=e}call(e,i){return i.subscribe(new WC(e,this.errorFactory))}}class WC extends mr.L{constructor(e,i){super(e),this.errorFactory=i,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(i){e=i}this.destination.error(e)}}}function KC(){return new xl}function jb(t=null){return e=>e.lift(new YC(t))}class YC{constructor(e){this.defaultValue=e}call(e,i){return i.subscribe(new QC(e,this.defaultValue))}}class QC extends mr.L{constructor(e,i){super(e),this.defaultValue=i,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var na=N(5379);function Pt(t,e){const i=arguments.length>=2;return o=>o.pipe(t?Yr((u,l)=>t(u,l,o)):na.y,Zs(1),i?jb(e):Qm(()=>new xl))}var Gn=N(2868),Nu=N(4327),Bb=N(2654);class Lr{constructor(e){this.callback=e}call(e,i){return i.subscribe(new vi(e,this.callback))}}class vi extends mr.L{constructor(e,i){super(e),this.add(new Bb.w(i))}}class _i{constructor(e,i){this.id=e,this.url=i}}class ra extends _i{constructor(e,i,o="imperative",u=null){super(e,i),this.navigationTrigger=o,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bi extends _i{constructor(e,i,o){super(e,i),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cf extends _i{constructor(e,i,o){super(e,i),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hb extends _i{constructor(e,i,o){super(e,i),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $b extends _i{constructor(e,i,o,u){super(e,i),this.urlAfterRedirects=o,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JC extends _i{constructor(e,i,o,u){super(e,i),this.urlAfterRedirects=o,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XC extends _i{constructor(e,i,o,u,l){super(e,i),this.urlAfterRedirects=o,this.state=u,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zm extends _i{constructor(e,i,o,u){super(e,i),this.urlAfterRedirects=o,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends _i{constructor(e,i,o,u){super(e,i),this.urlAfterRedirects=o,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eI{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jm{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qb{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zb{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xm{constructor(e,i,o){this.routerEvent=e,this.position=i,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const at="primary";class Wb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}}function es(t){return new Wb(t)}const Fl="ngNavigationCancelingError";function ia(t){const e=Error("NavigationCancelingError: "+t);return e[Fl]=!0,e}function Ou(t,e,i){const o=i.path.split("/");if(o.length>t.length||"full"===i.pathMatch&&(e.hasChildren()||o.length<t.length))return null;const u={};for(let l=0;l<o.length;l++){const f=o[l],g=t[l];if(f.startsWith(":"))u[f.substring(1)]=g;else if(f!==g.path)return null}return{consumed:t.slice(0,o.length),posParams:u}}function vr(t,e){const i=t?Object.keys(t):void 0,o=e?Object.keys(e):void 0;if(!i||!o||i.length!=o.length)return!1;let u;for(let l=0;l<i.length;l++)if(u=i[l],!ey(t[u],e[u]))return!1;return!0}function ey(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const i=[...t].sort(),o=[...e].sort();return i.every((u,l)=>o[l]===u)}return t===e}function ty(t){return Array.prototype.concat.apply([],t)}function ny(t){return t.length>0?t[t.length-1]:null}function bn(t,e){for(const i in t)t.hasOwnProperty(i)&&e(t[i],i)}function nr(t){return(0,m.CqO)(t)?t:(0,m.QGY)(t)?(0,Bt.D)(Promise.resolve(t)):(0,Ye.of)(t)}const Yb={exact:function Pl(t,e,i){if(!ts(t.segments,e.segments)||!Ll(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const o in e.children)if(!t.children[o]||!Pl(t.children[o],e.children[o],i))return!1;return!0},subset:iy},hn={exact:function nI(t,e){return vr(t,e)},subset:function Ru(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>ey(t[i],e[i]))},ignored:()=>!0};function hf(t,e,i){return Yb[i.paths](t.root,e.root,i.matrixParams)&&hn[i.queryParams](t.queryParams,e.queryParams)&&!("exact"===i.fragment&&t.fragment!==e.fragment)}function iy(t,e,i){return oy(t,e,e.segments,i)}function oy(t,e,i,o){if(t.segments.length>i.length){const u=t.segments.slice(0,i.length);return!(!ts(u,i)||e.hasChildren()||!Ll(u,i,o))}if(t.segments.length===i.length){if(!ts(t.segments,i)||!Ll(t.segments,i,o))return!1;for(const u in e.children)if(!t.children[u]||!iy(t.children[u],e.children[u],o))return!1;return!0}{const u=i.slice(0,t.segments.length),l=i.slice(t.segments.length);return!!(ts(t.segments,u)&&Ll(t.segments,u,o)&&t.children[at])&&oy(t.children[at],e,l,o)}}function Ll(t,e,i){return e.every((o,u)=>hn[i](t[u].parameters,o.parameters))}class Qr{constructor(e,i,o){this.root=e,this.queryParams=i,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return ay.serialize(this)}}class nt{constructor(e,i){this.segments=e,this.children=i,this.parent=null,bn(i,(o,u)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vl(this)}}class oa{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=es(this.parameters)),this._parameterMap}toString(){return Zb(this)}}function ts(t,e){return t.length===e.length&&t.every((i,o)=>i.path===e[o].path)}class kl{}class Fu{parse(e){const i=new rI(e);return new Qr(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){const i=`/${Pu(e.root,!0)}`,o=function Xb(t){const e=Object.keys(t).map(i=>{const o=t[i];return Array.isArray(o)?o.map(u=>`${so(i)}=${so(u)}`).join("&"):`${so(i)}=${so(o)}`}).filter(i=>!!i);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${i}${o}${"string"==typeof e.fragment?`#${function Qb(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ay=new Fu;function Vl(t){return t.segments.map(e=>Zb(e)).join("/")}function Pu(t,e){if(!t.hasChildren())return Vl(t);if(e){const i=t.children[at]?Pu(t.children[at],!1):"",o=[];return bn(t.children,(u,l)=>{l!==at&&o.push(`${l}:${Pu(u,!1)}`)}),o.length>0?`${i}(${o.join("//")})`:i}{const i=function sy(t,e){let i=[];return bn(t.children,(o,u)=>{u===at&&(i=i.concat(e(o,u)))}),bn(t.children,(o,u)=>{u!==at&&(i=i.concat(e(o,u)))}),i}(t,(o,u)=>u===at?[Pu(t.children[at],!1)]:[`${u}:${Pu(o,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[at]?`${Vl(t)}/${i[0]}`:`${Vl(t)}/(${i.join("//")})`}}function ns(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function so(t){return ns(t).replace(/%3B/gi,";")}function uy(t){return ns(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lu(t){return decodeURIComponent(t)}function cy(t){return Lu(t.replace(/\+/g,"%20"))}function Zb(t){return`${uy(t.path)}${function Jb(t){return Object.keys(t).map(e=>`;${uy(e)}=${uy(t[e])}`).join("")}(t.parameters)}`}const ew=/^[^\/()?;=#]+/;function rs(t){const e=t.match(ew);return e?e[0]:""}const df=/^[^=?&#]+/,tw=/^[^&#]+/;class rI{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(o[at]=new nt(e,i)),o}parseSegment(){const e=rs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new oa(Lu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const i=rs(this.remaining);if(!i)return;this.capture(i);let o="";if(this.consumeOptional("=")){const u=rs(this.remaining);u&&(o=u,this.capture(o))}e[Lu(i)]=Lu(o)}parseQueryParam(e){const i=function aa(t){const e=t.match(df);return e?e[0]:""}(this.remaining);if(!i)return;this.capture(i);let o="";if(this.consumeOptional("=")){const f=function nw(t){const e=t.match(tw);return e?e[0]:""}(this.remaining);f&&(o=f,this.capture(o))}const u=cy(i),l=cy(o);if(e.hasOwnProperty(u)){let f=e[u];Array.isArray(f)||(f=[f],e[u]=f),f.push(l)}else e[u]=l}parseParens(e){const i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=rs(this.remaining),u=this.remaining[o.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let l;o.indexOf(":")>-1?(l=o.substr(0,o.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=at);const f=this.parseChildren();i[l]=1===Object.keys(f).length?f[at]:new nt([],f),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ku{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){const i=Vu(e,this._root);return i?i.children.map(o=>o.value):[]}firstChild(e){const i=Vu(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){const i=Ul(e,this._root);return i.length<2?[]:i[i.length-2].children.map(u=>u.value).filter(u=>u!==e)}pathFromRoot(e){return Ul(e,this._root).map(i=>i.value)}}function Vu(t,e){if(t===e.value)return e;for(const i of e.children){const o=Vu(t,i);if(o)return o}return null}function Ul(t,e){if(t===e.value)return[e];for(const i of e.children){const o=Ul(t,i);if(o.length)return o.unshift(e),o}return[]}class bi{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}}function is(t){const e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}class ff extends ku{constructor(e,i){super(e),this.snapshot=i,pf(this,e)}toString(){return this.snapshot.toString()}}function ly(t,e){const i=function rw(t,e){const f=new Zr([],{},{},"",{},at,e,null,t.root,-1,{});return new ca("",new bi(f,[]))}(t,e),o=new gi([new oa("",{})]),u=new gi({}),l=new gi({}),f=new gi({}),g=new gi(""),_=new ua(o,u,f,g,l,at,e,i.root);return _.snapshot=i.root,new ff(new bi(_,[]),i)}class ua{constructor(e,i,o,u,l,f,g,_){this.url=e,this.params=i,this.queryParams=o,this.fragment=u,this.data=l,this.outlet=f,this.component=g,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>es(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>es(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hy(t,e="emptyOnly"){const i=t.pathFromRoot;let o=0;if("always"!==e)for(o=i.length-1;o>=1;){const u=i[o],l=i[o-1];if(u.routeConfig&&""===u.routeConfig.path)o--;else{if(l.component)break;o--}}return function iw(t){return t.reduce((e,i)=>({params:Object.assign(Object.assign({},e.params),i.params),data:Object.assign(Object.assign({},e.data),i.data),resolve:Object.assign(Object.assign({},e.resolve),i._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(o))}class Zr{constructor(e,i,o,u,l,f,g,_,w,E,I){this.url=e,this.params=i,this.queryParams=o,this.fragment=u,this.data=l,this.outlet=f,this.component=g,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=E,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=es(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ca extends ku{constructor(e,i){super(i),this.url=e,pf(this,i)}toString(){return ow(this._root)}}function pf(t,e){e.value._routerState=t,e.children.forEach(i=>pf(t,i))}function ow(t){const e=t.children.length>0?` { ${t.children.map(ow).join(", ")} } `:"";return`${t.value}${e}`}function dy(t){if(t.snapshot){const e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,vr(e.queryParams,i.queryParams)||t.queryParams.next(i.queryParams),e.fragment!==i.fragment&&t.fragment.next(i.fragment),vr(e.params,i.params)||t.params.next(i.params),function lf(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!vr(t[i],e[i]))return!1;return!0}(e.url,i.url)||t.url.next(i.url),vr(e.data,i.data)||t.data.next(i.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function fy(t,e){const i=vr(t.params,e.params)&&function sa(t,e){return ts(t,e)&&t.every((i,o)=>vr(i.parameters,e[o].parameters))}(t.url,e.url);return i&&!(!t.parent!=!e.parent)&&(!t.parent||fy(t.parent,e.parent))}function jl(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){const o=i.value;o._futureSnapshot=e.value;const u=function py(t,e,i){return e.children.map(o=>{for(const u of i.children)if(t.shouldReuseRoute(o.value,u.value.snapshot))return jl(t,o,u);return jl(t,o)})}(t,e,i);return new bi(o,u)}{if(t.shouldAttach(e.value)){const l=t.retrieve(e.value);if(null!==l){const f=l.route;return f.value._futureSnapshot=e.value,f.children=e.children.map(g=>jl(t,g)),f}}const o=function sw(t){return new ua(new gi(t.url),new gi(t.params),new gi(t.queryParams),new gi(t.fragment),new gi(t.data),t.outlet,t.component,t)}(e.value),u=e.children.map(l=>jl(t,l));return new bi(o,u)}}function Bl(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Uu(t){return"object"==typeof t&&null!=t&&t.outlets}function gy(t,e,i,o,u){let l={};return o&&bn(o,(f,g)=>{l[g]=Array.isArray(f)?f.map(_=>`${_}`):`${f}`}),new Qr(i.root===t?e:my(i.root,t,e),l,u)}function my(t,e,i){const o={};return bn(t.children,(u,l)=>{o[l]=u===e?i:my(u,e,i)}),new nt(t.segments,o)}class ju{constructor(e,i,o){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=o,e&&o.length>0&&Bl(o[0]))throw new Error("Root segment cannot have matrix parameters");const u=o.find(Uu);if(u&&u!==ny(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kr{constructor(e,i,o){this.segmentGroup=e,this.processChildren=i,this.index=o}}function gf(t,e,i){if(t||(t=new nt([],{})),0===t.segments.length&&t.hasChildren())return mf(t,e,i);const o=function oI(t,e,i){let o=0,u=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;u<t.segments.length;){if(o>=i.length)return l;const f=t.segments[u],g=i[o];if(Uu(g))break;const _=`${g}`,w=o<i.length-1?i[o+1]:null;if(u>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Hl(_,w,f))return l;o+=2}else{if(!Hl(_,{},f))return l;o++}u++}return{match:!0,pathIndex:u,commandIndex:o}}(t,e,i),u=i.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){const l=new nt(t.segments.slice(0,o.pathIndex),{});return l.children[at]=new nt(t.segments.slice(o.pathIndex),t.children),mf(l,0,u)}return o.match&&0===u.length?new nt(t.segments,{}):o.match&&!t.hasChildren()?by(t,e,i):o.match?mf(t,0,u):by(t,e,i)}function mf(t,e,i){if(0===i.length)return new nt(t.segments,{});{const o=function _y(t){return Uu(t[0])?t[0].outlets:{[at]:t}}(i),u={};return bn(o,(l,f)=>{"string"==typeof l&&(l=[l]),null!==l&&(u[f]=gf(t.children[f],e,l))}),bn(t.children,(l,f)=>{void 0===o[f]&&(u[f]=l)}),new nt(t.segments,u)}}function by(t,e,i){const o=t.segments.slice(0,e);let u=0;for(;u<i.length;){const l=i[u];if(Uu(l)){const _=yf(l.outlets);return new nt(o,_)}if(0===u&&Bl(i[0])){o.push(new oa(t.segments[e].path,Gl(i[0]))),u++;continue}const f=Uu(l)?l.outlets[at]:`${l}`,g=u<i.length-1?i[u+1]:null;f&&g&&Bl(g)?(o.push(new oa(f,Gl(g))),u+=2):(o.push(new oa(f,{})),u++)}return new nt(o,{})}function yf(t){const e={};return bn(t,(i,o)=>{"string"==typeof i&&(i=[i]),null!==i&&(e[o]=by(new nt([],{}),0,i))}),e}function Gl(t){const e={};return bn(t,(i,o)=>e[o]=`${i}`),e}function Hl(t,e,i){return t==i.path&&vr(e,i.parameters)}class aI{constructor(e,i,o,u){this.routeReuseStrategy=e,this.futureState=i,this.currState=o,this.forwardEvent=u}activate(e){const i=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,o,e),dy(this.futureState.root),this.activateChildRoutes(i,o,e)}deactivateChildRoutes(e,i,o){const u=is(i);e.children.forEach(l=>{const f=l.value.outlet;this.deactivateRoutes(l,u[f],o),delete u[f]}),bn(u,(l,f)=>{this.deactivateRouteAndItsChildren(l,o)})}deactivateRoutes(e,i,o){const u=e.value,l=i?i.value:null;if(u===l)if(u.component){const f=o.getContext(u.outlet);f&&this.deactivateChildRoutes(e,i,f.children)}else this.deactivateChildRoutes(e,i,o);else l&&this.deactivateRouteAndItsChildren(i,o)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){const o=i.getContext(e.value.outlet),u=o&&e.value.component?o.children:i,l=is(e);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],u);if(o&&o.outlet){const f=o.outlet.detach(),g=o.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:f,route:e,contexts:g})}}deactivateRouteAndOutlet(e,i){const o=i.getContext(e.value.outlet),u=o&&e.value.component?o.children:i,l=is(e);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],u);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(e,i,o){const u=is(i);e.children.forEach(l=>{this.activateRoutes(l,u[l.value.outlet],o),this.forwardEvent(new zb(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Jm(e.value.snapshot))}activateRoutes(e,i,o){const u=e.value,l=i?i.value:null;if(dy(u),u===l)if(u.component){const f=o.getOrCreateContext(u.outlet);this.activateChildRoutes(e,i,f.children)}else this.activateChildRoutes(e,i,o);else if(u.component){const f=o.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const g=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),f.children.onOutletReAttached(g.contexts),f.attachRef=g.componentRef,f.route=g.route.value,f.outlet&&f.outlet.attach(g.componentRef,g.route.value),dy(g.route.value),this.activateChildRoutes(e,null,f.children)}else{const g=function wy(t){for(let e=t.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig;if(i&&i.component)return null}return null}(u.snapshot),_=g?g.module.componentFactoryResolver:null;f.attachRef=null,f.route=u,f.resolver=_,f.outlet&&f.outlet.activateWith(u,_),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,o)}}class vf{constructor(e,i){this.routes=e,this.module=i}}function ao(t){return"function"==typeof t}function os(t){return t instanceof Qr}const Gu=Symbol("INITIAL_VALUE");function Vt(){return vn(t=>function Ml(...t){let e,i;return(0,Iu.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Tl.k)(t[0])&&(t=t[0]),(0,Qs.n)(t,i).lift(new $C(e))}(t.map(e=>e.pipe(Zs(1),xu(Gu)))).pipe(Js((e,i)=>{let o=!1;return i.reduce((u,l,f)=>u!==Gu?u:(l===Gu&&(o=!0),o||!1!==l&&f!==i.length-1&&!os(l)?u:l),e)},Gu),Yr(e=>e!==Gu),(0,it.U)(e=>os(e)?e:!0===e),Zs(1)))}class lw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hu,this.attachRef=null}}class Hu{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new lw,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}let $u=(()=>{class t{constructor(i,o,u,l,f){this.parentContexts=i,this.location=o,this.resolver=u,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=l||at,i.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const i=this.parentContexts.getContext(this.name);i&&i.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,o){this.activated=i,this._activatedRoute=o,this.location.insert(i.hostView),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=i;const f=(o=o||this.resolver).resolveComponentFactory(i._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,_=new Ey(i,g,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(Hu),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},t.\u0275dir=m.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class Ey{constructor(e,i,o){this.route=e,this.childContexts=i,this.parent=o}get(e,i){return e===ua?this.route:e===Hu?this.childContexts:this.parent.get(e,i)}}let Cy=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,o){1&i&&m._UZ(0,"router-outlet")},directives:[$u],encapsulation:2}),t})();function Iy(t,e=""){for(let i=0;i<t.length;i++){const o=t[i];hw(o,dw(e,o))}}function hw(t,e){t.children&&Iy(t.children,e)}function dw(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function bf(t){const e=t.children&&t.children.map(bf),i=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!i.component&&(e||i.loadChildren)&&i.outlet&&i.outlet!==at&&(i.component=Cy),i}function Jr(t){return t.outlet||at}function fw(t,e){const i=t.filter(o=>Jr(o)===e);return i.push(...t.filter(o=>Jr(o)!==e)),i}const la={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dn(t,e,i){var o;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||i.length>0)?Object.assign({},la):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Ou)(i,t,e);if(!l)return Object.assign({},la);const f={};bn(l.posParams,(_,w)=>{f[w]=_.path});const g=l.consumed.length>0?Object.assign(Object.assign({},f),l.consumed[l.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:g,positionalParamSegments:null!==(o=l.posParams)&&void 0!==o?o:{}}}function ha(t,e,i,o,u="corrected"){if(i.length>0&&function Mn(t,e,i){return i.some(o=>da(t,e,o)&&Jr(o)!==at)}(t,i,o)){const f=new nt(e,function Sy(t,e,i,o){const u={};u[at]=o,o._sourceSegment=t,o._segmentIndexShift=e.length;for(const l of i)if(""===l.path&&Jr(l)!==at){const f=new nt([],{});f._sourceSegment=t,f._segmentIndexShift=e.length,u[Jr(l)]=f}return u}(t,e,o,new nt(i,t.children)));return f._sourceSegment=t,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===i.length&&function qu(t,e,i){return i.some(o=>da(t,e,o))}(t,i,o)){const f=new nt(t.segments,function Ty(t,e,i,o,u,l){const f={};for(const g of o)if(da(t,i,g)&&!u[Jr(g)]){const _=new nt([],{});_._sourceSegment=t,_._segmentIndexShift="legacy"===l?t.segments.length:e.length,f[Jr(g)]=_}return Object.assign(Object.assign({},u),f)}(t,e,i,o,t.children,u));return f._sourceSegment=t,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:i}}const l=new nt(t.segments,t.children);return l._sourceSegment=t,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:i}}function da(t,e,i){return(!(t.hasChildren()||e.length>0)||"full"!==i.pathMatch)&&""===i.path}function Ay(t,e,i,o){return!!(Jr(t)===o||o!==at&&da(e,i,t))&&("**"===t.path||dn(e,t,i).matched)}function My(t,e,i){return 0===e.length&&!t.children[i]}class fa{constructor(e){this.segmentGroup=e||null}}class xy{constructor(e){this.urlTree=e}}function zu(t){return new Bn.y(e=>e.error(new fa(t)))}function Ny(t){return new Bn.y(e=>e.error(new xy(t)))}function Oy(t){return new Bn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class mw{constructor(e,i,o,u,l){this.configLoader=i,this.urlSerializer=o,this.urlTree=u,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=ha(this.urlTree.root,[],[],this.config).segmentGroup,i=new nt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,i,at).pipe((0,it.U)(l=>this.createUrlTree(Df(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pr(l=>{if(l instanceof xy)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof fa?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,at).pipe((0,it.U)(u=>this.createUrlTree(Df(u),e.queryParams,e.fragment))).pipe(Pr(u=>{throw u instanceof fa?this.noMatchError(u):u}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,i,o){const u=e.segments.length>0?new nt([],{[at]:e}):e;return new Qr(u,i,o)}expandSegmentGroup(e,i,o,u){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(e,i,o).pipe((0,it.U)(l=>new nt([],l))):this.expandSegment(e,o,i,o.segments,u,!0)}expandChildren(e,i,o){const u=[];for(const l of Object.keys(o.children))"primary"===l?u.unshift(l):u.push(l);return(0,Bt.D)(u).pipe(yi(l=>{const f=o.children[l],g=fw(i,l);return this.expandSegmentGroup(e,g,f,l).pipe((0,it.U)(_=>({segment:_,outlet:l})))}),Js((l,f)=>(l[f.outlet]=f.segment,l),{}),function ZC(t,e){const i=arguments.length>=2;return o=>o.pipe(t?Yr((u,l)=>t(u,l,o)):na.y,Ym(1),i?jb(e):Qm(()=>new xl))}())}expandSegment(e,i,o,u,l,f){return(0,Bt.D)(o).pipe(yi(g=>this.expandSegmentAgainstRoute(e,i,o,g,u,l,f).pipe(Pr(w=>{if(w instanceof fa)return(0,Ye.of)(null);throw w}))),Pt(g=>!!g),Pr((g,_)=>{if(g instanceof xl||"EmptyError"===g.name){if(My(i,u,l))return(0,Ye.of)(new nt([],{}));throw new fa(i)}throw g}))}expandSegmentAgainstRoute(e,i,o,u,l,f,g){return Ay(u,i,l,f)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(e,i,u,l,f):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,o,u,l,f):zu(i):zu(i)}expandSegmentAgainstRouteUsingRedirect(e,i,o,u,l,f){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,o,u,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,i,o,u,l,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,o,u){const l=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Ny(l):this.lineralizeSegments(o,l).pipe((0,_n.zg)(f=>{const g=new nt(f,{});return this.expandSegment(e,g,i,f,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,i,o,u,l,f){const{matched:g,consumedSegments:_,lastChild:w,positionalParamSegments:E}=dn(i,u,l);if(!g)return zu(i);const I=this.applyRedirectCommands(_,u.redirectTo,E);return u.redirectTo.startsWith("/")?Ny(I):this.lineralizeSegments(u,I).pipe((0,_n.zg)(S=>this.expandSegment(e,i,o,S.concat(l.slice(w)),f,!1)))}matchSegmentAgainstRoute(e,i,o,u,l){if("**"===o.path)return o.loadChildren?(o._loadedConfig?(0,Ye.of)(o._loadedConfig):this.configLoader.load(e.injector,o)).pipe((0,it.U)(S=>(o._loadedConfig=S,new nt(u,{})))):(0,Ye.of)(new nt(u,{}));const{matched:f,consumedSegments:g,lastChild:_}=dn(i,o,u);if(!f)return zu(i);const w=u.slice(_);return this.getChildConfig(e,o,u).pipe((0,_n.zg)(I=>{const S=I.module,O=I.routes,{segmentGroup:V,slicedSegments:W}=ha(i,g,w,O),se=new nt(V.segments,V.children);if(0===W.length&&se.hasChildren())return this.expandChildren(S,O,se).pipe((0,it.U)(Ge=>new nt(g,Ge)));if(0===O.length&&0===W.length)return(0,Ye.of)(new nt(g,{}));const pe=Jr(o)===l;return this.expandSegment(S,se,O,W,pe?at:l,!0).pipe((0,it.U)(Ee=>new nt(g.concat(Ee.segments),Ee.children)))}))}getChildConfig(e,i,o){return i.children?(0,Ye.of)(new vf(i.children,e)):i.loadChildren?void 0!==i._loadedConfig?(0,Ye.of)(i._loadedConfig):this.runCanLoadGuards(e.injector,i,o).pipe((0,_n.zg)(u=>u?this.configLoader.load(e.injector,i).pipe((0,it.U)(l=>(i._loadedConfig=l,l))):function pw(t){return new Bn.y(e=>e.error(ia(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(i))):(0,Ye.of)(new vf([],e))}runCanLoadGuards(e,i,o){const u=i.canLoad;if(!u||0===u.length)return(0,Ye.of)(!0);const l=u.map(f=>{const g=e.get(f);let _;if(function Dy(t){return t&&ao(t.canLoad)}(g))_=g.canLoad(i,o);else{if(!ao(g))throw new Error("Invalid CanLoad guard");_=g(i,o)}return nr(_)});return(0,Ye.of)(l).pipe(Vt(),(0,Gn.b)(f=>{if(!os(f))return;const g=ia(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw g.url=f,g}),(0,it.U)(f=>!0===f))}lineralizeSegments(e,i){let o=[],u=i.root;for(;;){if(o=o.concat(u.segments),0===u.numberOfChildren)return(0,Ye.of)(o);if(u.numberOfChildren>1||!u.children[at])return Oy(e.redirectTo);u=u.children[at]}}applyRedirectCommands(e,i,o){return this.applyRedirectCreatreUrlTree(i,this.urlSerializer.parse(i),e,o)}applyRedirectCreatreUrlTree(e,i,o,u){const l=this.createSegmentGroup(e,i.root,o,u);return new Qr(l,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){const o={};return bn(e,(u,l)=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);o[l]=i[g]}else o[l]=u}),o}createSegmentGroup(e,i,o,u){const l=this.createSegments(e,i.segments,o,u);let f={};return bn(i.children,(g,_)=>{f[_]=this.createSegmentGroup(e,g,o,u)}),new nt(l,f)}createSegments(e,i,o,u){return i.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,u):this.findOrReturn(l,o))}findPosParam(e,i,o){const u=o[i.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${e}'. Cannot find '${i.path}'.`);return u}findOrReturn(e,i){let o=0;for(const u of i){if(u.path===e.path)return i.splice(o),u;o++}return e}}function Df(t){const e={};for(const o of Object.keys(t.children)){const l=Df(t.children[o]);(l.segments.length>0||l.hasChildren())&&(e[o]=l)}return function wf(t){if(1===t.numberOfChildren&&t.children[at]){const e=t.children[at];return new nt(t.segments.concat(e.segments),e.children)}return t}(new nt(t.segments,e))}class vw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pa{constructor(e,i){this.component=e,this.route=i}}function _w(t,e,i){const o=t._root;return Wu(o,e?e._root:null,i,[o.value])}function uo(t,e,i){const o=function ww(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig}return null}(e);return(o?o.module.injector:i).get(t)}function Wu(t,e,i,o,u={canDeactivateChecks:[],canActivateChecks:[]}){const l=is(e);return t.children.forEach(f=>{(function Dw(t,e,i,o,u={canDeactivateChecks:[],canActivateChecks:[]}){const l=t.value,f=e?e.value:null,g=i?i.getContext(t.value.outlet):null;if(f&&l.routeConfig===f.routeConfig){const _=function Ew(t,e,i){if("function"==typeof i)return i(t,e);switch(i){case"pathParamsChange":return!ts(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ts(t.url,e.url)||!vr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fy(t,e)||!vr(t.queryParams,e.queryParams);default:return!fy(t,e)}}(f,l,l.routeConfig.runGuardsAndResolvers);_?u.canActivateChecks.push(new vw(o)):(l.data=f.data,l._resolvedData=f._resolvedData),Wu(t,e,l.component?g?g.children:null:i,o,u),_&&g&&g.outlet&&g.outlet.isActivated&&u.canDeactivateChecks.push(new pa(g.outlet.component,f))}else f&&Ku(e,g,u),u.canActivateChecks.push(new vw(o)),Wu(t,null,l.component?g?g.children:null:i,o,u)})(f,l[f.value.outlet],i,o.concat([f.value]),u),delete l[f.value.outlet]}),bn(l,(f,g)=>Ku(f,i.getContext(g),u)),u}function Ku(t,e,i){const o=is(t),u=t.value;bn(o,(l,f)=>{Ku(l,u.component?e?e.children.getContext(f):null:e,i)}),i.canDeactivateChecks.push(new pa(u.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,u))}class xw{}function ss(t){return new Bn.y(e=>e.error(t))}class uI{constructor(e,i,o,u,l,f){this.rootComponentType=e,this.config=i,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f}recognize(){const e=ha(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,i=this.processSegmentGroup(this.config,e,at);if(null===i)return null;const o=new Zr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new bi(o,i),l=new ca(this.url,u);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const i=e.value,o=hy(i,this.paramsInheritanceStrategy);i.params=Object.freeze(o.params),i.data=Object.freeze(o.data),e.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(e,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,i):this.processSegment(e,i,i.segments,o)}processChildren(e,i){const o=[];for(const l of Object.keys(i.children)){const f=i.children[l],g=fw(e,l),_=this.processSegmentGroup(g,f,l);if(null===_)return null;o.push(..._)}const u=Xr(o);return function cI(t){t.sort((e,i)=>e.value.outlet===at?-1:i.value.outlet===at?1:e.value.outlet.localeCompare(i.value.outlet))}(u),u}processSegment(e,i,o,u){for(const l of e){const f=this.processSegmentAgainstRoute(l,i,o,u);if(null!==f)return f}return My(i,o,u)?[]:null}processSegmentAgainstRoute(e,i,o,u){if(e.redirectTo||!Ay(e,i,o,u))return null;let l,f=[],g=[];if("**"===e.path){const O=o.length>0?ny(o).parameters:{};l=new Zr(o,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ef(e),Jr(e),e.component,e,ql(i),ky(i)+o.length,ga(e))}else{const O=dn(i,e,o);if(!O.matched)return null;f=O.consumedSegments,g=o.slice(O.lastChild),l=new Zr(f,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ef(e),Jr(e),e.component,e,ql(i),ky(i)+f.length,ga(e))}const _=function Py(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:E}=ha(i,f,g,_.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===E.length&&w.hasChildren()){const O=this.processChildren(_,w);return null===O?null:[new bi(l,O)]}if(0===_.length&&0===E.length)return[new bi(l,[])];const I=Jr(e)===u,S=this.processSegment(_,w,E,I?at:u);return null===S?null:[new bi(l,S)]}}function lI(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xr(t){const e=[],i=new Set;for(const o of t){if(!lI(o)){e.push(o);continue}const u=e.find(l=>o.value.routeConfig===l.value.routeConfig);void 0!==u?(u.children.push(...o.children),i.add(u)):e.push(o)}for(const o of i){const u=Xr(o.children);e.push(new bi(o.value,u))}return e.filter(o=>!i.has(o))}function ql(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ky(t){let e=t,i=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,i+=e._segmentIndexShift?e._segmentIndexShift:0;return i-1}function Ef(t){return t.data||{}}function ga(t){return t.resolve||{}}function By(t){return vn(e=>{const i=t(e);return i?(0,Bt.D)(i).pipe((0,it.U)(()=>e)):(0,Ye.of)(e)})}class Gy extends class Tf{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}}{}const Sf=new m.OlP("ROUTES");class zl{constructor(e,i,o,u){this.injector=e,this.compiler=i,this.onLoadStartListener=o,this.onLoadEndListener=u}load(e,i){if(i._loader$)return i._loader$;this.onLoadStartListener&&this.onLoadStartListener(i);const u=this.loadModuleFactory(i.loadChildren).pipe((0,it.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(i);const f=l.create(e);return new vf(ty(f.injector.get(Sf,void 0,m.XFs.Self|m.XFs.Optional)).map(bf),f)}),Pr(l=>{throw i._loader$=void 0,l}));return i._loader$=new Ol.c(u,()=>new oo.xQ).pipe((0,Nu.x)()),i._loader$}loadModuleFactory(e){return nr(e()).pipe((0,_n.zg)(i=>i instanceof m.YKP?(0,Ye.of)(i):(0,Bt.D)(this.compiler.compileModuleAsync(i))))}}class Ow{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}function Rw(t){throw t}function Fw(t,e,i){return e.parse("/")}function Hy(t,e){return(0,Ye.of)(null)}const Pw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$y={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class t{constructor(i,o,u,l,f,g,_){this.rootComponentType=i,this.urlSerializer=o,this.rootContexts=u,this.location=l,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new oo.xQ,this.errorHandler=Rw,this.malformedUriErrorHandler=Fw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hy,afterPreactivation:Hy},this.urlHandlingStrategy=new Ow,this.routeReuseStrategy=new Gy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(m.h0i),this.console=f.get(m.c2e);const I=f.get(m.R0b);this.isNgZoneEnabled=I instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function ry(){return new Qr(new nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zl(f,g,S=>this.triggerEvent(new Rl(S)),S=>this.triggerEvent(new Xo(S))),this.routerState=ly(this.currentUrlTree,this.rootComponentType),this.transitions=new gi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var i;return null===(i=this.location.getState())||void 0===i?void 0:i.\u0275routerPageId}setupNavigations(i){const o=this.events;return i.pipe(Yr(u=>0!==u.id),(0,it.U)(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),vn(u=>{let l=!1,f=!1;return(0,Ye.of)(u).pipe((0,Gn.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vn(g=>{const _=this.browserUrlTree.toString(),w=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return ya(g.source)&&(this.browserUrlTree=g.extractedUrl),(0,Ye.of)(g).pipe(vn(I=>{const S=this.transitions.getValue();return o.next(new ra(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),S!==this.transitions.getValue()?mi.E:Promise.resolve(I)}),function yw(t,e,i,o){return vn(u=>function gw(t,e,i,o,u){return new mw(t,e,i,o,u).apply()}(t,e,i,u.extractedUrl,o).pipe((0,it.U)(l=>Object.assign(Object.assign({},u),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gn.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function Vy(t,e,i,o,u){return(0,_n.zg)(l=>function wi(t,e,i,o,u="emptyOnly",l="legacy"){try{const f=new uI(t,e,i,o,u,l).recognize();return null===f?ss(new xw):(0,Ye.of)(f)}catch(f){return ss(f)}}(t,e,l.urlAfterRedirects,i(l.urlAfterRedirects),o,u).pipe((0,it.U)(f=>Object.assign(Object.assign({},l),{targetSnapshot:f}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gn.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(O,I)}this.browserUrlTree=I.urlAfterRedirects}const S=new $b(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);o.next(S)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:O,source:V,restoredState:W,extras:se}=g,pe=new ra(S,this.serializeUrl(O),V,W);o.next(pe);const Te=ly(O,this.rootComponentType).snapshot;return(0,Ye.of)(Object.assign(Object.assign({},g),{targetSnapshot:Te,urlAfterRedirects:O,extras:Object.assign(Object.assign({},se),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),mi.E}),By(g=>{const{targetSnapshot:_,id:w,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:S,replaceUrl:O}}=g;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!S,replaceUrl:!!O})}),(0,Gn.b)(g=>{const _=new JC(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,it.U)(g=>Object.assign(Object.assign({},g),{guards:_w(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Ry(t,e){return(0,_n.zg)(i=>{const{targetSnapshot:o,currentSnapshot:u,guards:{canActivateChecks:l,canDeactivateChecks:f}}=i;return 0===f.length&&0===l.length?(0,Ye.of)(Object.assign(Object.assign({},i),{guardsResult:!0})):function Cw(t,e,i,o){return(0,Bt.D)(t).pipe((0,_n.zg)(u=>function Mw(t,e,i,o,u){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Ye.of)(!0);const f=l.map(g=>{const _=uo(g,e,u);let w;if(function _f(t){return t&&ao(t.canDeactivate)}(_))w=nr(_.canDeactivate(t,e,i,o));else{if(!ao(_))throw new Error("Invalid CanDeactivate guard");w=nr(_(t,e,i,o))}return w.pipe(Pt())});return(0,Ye.of)(f).pipe(Vt())}(u.component,u.route,i,e,o)),Pt(u=>!0!==u,!0))}(f,o,u,t).pipe((0,_n.zg)(g=>g&&function uw(t){return"boolean"==typeof t}(g)?function Iw(t,e,i,o){return(0,Bt.D)(e).pipe(yi(u=>Su(function Sw(t,e){return null!==t&&e&&e(new eI(t)),(0,Ye.of)(!0)}(u.route.parent,o),function Tw(t,e){return null!==t&&e&&e(new qb(t)),(0,Ye.of)(!0)}(u.route,o),function Aw(t,e,i){const o=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(f=>function bw(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(f)).filter(f=>null!==f).map(f=>Au(()=>{const g=f.guards.map(_=>{const w=uo(_,f.node,i);let E;if(function cw(t){return t&&ao(t.canActivateChild)}(w))E=nr(w.canActivateChild(o,t));else{if(!ao(w))throw new Error("Invalid CanActivateChild guard");E=nr(w(o,t))}return E.pipe(Pt())});return(0,Ye.of)(g).pipe(Vt())}));return(0,Ye.of)(l).pipe(Vt())}(t,u.path,i),function Fy(t,e,i){const o=e.routeConfig?e.routeConfig.canActivate:null;if(!o||0===o.length)return(0,Ye.of)(!0);const u=o.map(l=>Au(()=>{const f=uo(l,e,i);let g;if(function $l(t){return t&&ao(t.canActivate)}(f))g=nr(f.canActivate(e,t));else{if(!ao(f))throw new Error("Invalid CanActivate guard");g=nr(f(e,t))}return g.pipe(Pt())}));return(0,Ye.of)(u).pipe(Vt())}(t,u.route,i))),Pt(u=>!0!==u,!0))}(o,l,t,e):(0,Ye.of)(g)),(0,it.U)(g=>Object.assign(Object.assign({},i),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Gn.b)(g=>{if(os(g.guardsResult)){const w=ia(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw w.url=g.guardsResult,w}const _=new XC(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),Yr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),By(g=>{if(g.guards.canActivateChecks.length)return(0,Ye.of)(g).pipe((0,Gn.b)(_=>{const w=new Zm(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),vn(_=>{let w=!1;return(0,Ye.of)(_).pipe(function Uy(t,e){return(0,_n.zg)(i=>{const{targetSnapshot:o,guards:{canActivateChecks:u}}=i;if(!u.length)return(0,Ye.of)(i);let l=0;return(0,Bt.D)(u).pipe(yi(f=>function Cf(t,e,i,o){return function If(t,e,i,o){const u=Object.keys(t);if(0===u.length)return(0,Ye.of)({});const l={};return(0,Bt.D)(u).pipe((0,_n.zg)(f=>function jy(t,e,i,o){const u=uo(t,e,o);return nr(u.resolve?u.resolve(e,i):u(e,i))}(t[f],e,i,o).pipe((0,Gn.b)(g=>{l[f]=g}))),Ym(1),(0,_n.zg)(()=>Object.keys(l).length===u.length?(0,Ye.of)(l):mi.E))}(t._resolve,t,e,o).pipe((0,it.U)(l=>(t._resolvedData=l,t.data=Object.assign(Object.assign({},t.data),hy(t,i).resolve),null)))}(f.route,o,t,e)),(0,Gn.b)(()=>l++),Ym(1),(0,_n.zg)(f=>l===u.length?(0,Ye.of)(i):mi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gn.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Gn.b)(_=>{const w=new yr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),By(g=>{const{targetSnapshot:_,id:w,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:S,replaceUrl:O}}=g;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!S,replaceUrl:!!O})}),(0,it.U)(g=>{const _=function iI(t,e,i){const o=jl(t,e._root,i?i._root:void 0);return new ff(o,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:_})}),(0,Gn.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((t,e,i)=>(0,it.U)(o=>(new aI(e,o.targetRouterState,o.currentRouterState,i).activate(t),o)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Gn.b)({next(){l=!0},complete(){l=!0}}),function Gb(t){return e=>e.lift(new Lr(t))}(()=>{var g;l||f||this.cancelNavigationTransition(u,`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===u.id&&(this.currentNavigation=null)}),Pr(g=>{if(f=!0,function tI(t){return t&&t[Fl]}(g)){const _=os(g.url);_||(this.navigated=!0,this.restoreHistory(u,!0));const w=new cf(u.id,this.serializeUrl(u.extractedUrl),g.message);o.next(w),_?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),I={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ya(u.source)};this.scheduleNavigation(E,"imperative",null,I,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const _=new Hb(u.id,this.serializeUrl(u.extractedUrl),g);o.next(_);try{u.resolve(this.errorHandler(g))}catch(w){u.reject(w)}}return mi.E}))}))}resetRootComponentType(i){this.rootComponentType=i,this.routerState.root.component=this.rootComponentType}setTransition(i){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),i))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const o="popstate"===i.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{var u;const l={replaceUrl:!0},f=(null===(u=i.state)||void 0===u?void 0:u.navigationId)?i.state:null;if(f){const _=Object.assign({},f);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(l.state=_)}const g=this.parseUrl(i.url);this.scheduleNavigation(g,o,f,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(i){this.events.next(i)}resetConfig(i){Iy(i),this.config=i.map(bf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,o={}){const{relativeTo:u,queryParams:l,fragment:f,queryParamsHandling:g,preserveFragment:_}=o,w=u||this.routerState.root,E=_?this.currentUrlTree.fragment:f;let I=null;switch(g){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=l||null}return null!==I&&(I=this.removeEmptyProps(I)),function aw(t,e,i,o,u){if(0===i.length)return gy(e.root,e.root,e,o,u);const l=function yy(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ju(!0,0,t);let e=0,i=!1;const o=t.reduce((u,l,f)=>{if("object"==typeof l&&null!=l){if(l.outlets){const g={};return bn(l.outlets,(_,w)=>{g[w]="string"==typeof _?_.split("/"):_}),[...u,{outlets:g}]}if(l.segmentPath)return[...u,l.segmentPath]}return"string"!=typeof l?[...u,l]:0===f?(l.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?i=!0:".."===g?e++:""!=g&&u.push(g))}),u):[...u,l]},[]);return new ju(i,e,o)}(i);if(l.toRoot())return gy(e.root,new nt([],{}),e,o,u);const f=function Bu(t,e,i){if(t.isAbsolute)return new kr(e.root,!0,0);if(-1===i.snapshot._lastPathIndex){const l=i.snapshot._urlSegment;return new kr(l,l===e.root,0)}const o=Bl(t.commands[0])?0:1;return function vy(t,e,i){let o=t,u=e,l=i;for(;l>u;){if(l-=u,o=o.parent,!o)throw new Error("Invalid number of '../'");u=o.segments.length}return new kr(o,!1,u-l)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+o,t.numberOfDoubleDots)}(l,e,t),g=f.processChildren?mf(f.segmentGroup,f.index,l.commands):gf(f.segmentGroup,f.index,l.commands);return gy(f.segmentGroup,g,e,o,u)}(w,this.currentUrlTree,i,I,null!=E?E:null)}navigateByUrl(i,o={skipLocationChange:!1}){const u=os(i)?i:this.parseUrl(i),l=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,o)}navigate(i,o={skipLocationChange:!1}){return function qy(t){for(let e=0;e<t.length;e++){const i=t[e];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${e}`)}}(i),this.navigateByUrl(this.createUrlTree(i,o),o)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let o;try{o=this.urlSerializer.parse(i)}catch(u){o=this.malformedUriErrorHandler(u,this.urlSerializer,i)}return o}isActive(i,o){let u;if(u=!0===o?Object.assign({},Pw):!1===o?Object.assign({},$y):o,os(i))return hf(this.currentUrlTree,i,u);const l=this.parseUrl(i);return hf(this.currentUrlTree,l,u)}removeEmptyProps(i){return Object.keys(i).reduce((o,u)=>{const l=i[u];return null!=l&&(o[u]=l),o},{})}processNavigations(){this.navigations.subscribe(i=>{this.navigated=!0,this.lastSuccessfulId=i.id,this.currentPageId=i.targetPageId,this.events.next(new Bi(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,i.resolve(!0)},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}scheduleNavigation(i,o,u,l,f){var g,_,w;if(this.disposed)return Promise.resolve(!1);const E=this.transitions.value,I=ya(o)&&E&&!ya(E.source),S=E.rawUrl.toString()===i.toString(),O=E.id===(null===(g=this.currentNavigation)||void 0===g?void 0:g.id);if(I&&S&&O)return Promise.resolve(!0);let W,se,pe;f?(W=f.resolve,se=f.reject,pe=f.promise):pe=new Promise((Ge,Oe)=>{W=Ge,se=Oe});const Te=++this.navigationId;let Ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),Ee=u&&u.\u0275routerPageId?u.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Ee=0,this.setTransition({id:Te,targetPageId:Ee,source:o,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:i,extras:l,resolve:W,reject:se,promise:pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pe.catch(Ge=>Promise.reject(Ge))}setBrowserUrl(i,o){const u=this.urlSerializer.serialize(i),l=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(u)||o.extras.replaceUrl?this.location.replaceState(u,"",l):this.location.go(u,"",l)}restoreHistory(i,o=!1){var u,l;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-i.targetPageId;"popstate"!==i.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===f?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===f&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(i,o){const u=new cf(i.id,this.serializeUrl(i.extractedUrl),o);this.triggerEvent(u),i.resolve(!1)}generateNgRouterState(i,o){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:o}:{navigationId:i}}}return t.\u0275fac=function(i){m.$Z()},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();function ya(t){return"imperative"!==t}class xf{}class Ky{preload(e,i){return(0,Ye.of)(null)}}let Yu=(()=>{class t{constructor(i,o,u,l){this.router=i,this.injector=u,this.preloadingStrategy=l,this.loader=new zl(u,o,_=>i.triggerEvent(new Rl(_)),_=>i.triggerEvent(new Xo(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yr(i=>i instanceof Bi),yi(()=>this.preload())).subscribe(()=>{})}preload(){const i=this.injector.get(m.h0i);return this.processRoutes(i,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,o){const u=[];for(const l of o)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const f=l._loadedConfig;u.push(this.processRoutes(f.module,f.routes))}else l.loadChildren&&!l.canLoad?u.push(this.preloadConfig(i,l)):l.children&&u.push(this.processRoutes(i,l.children));return(0,Bt.D)(u).pipe((0,Nl.J)(),(0,it.U)(l=>{}))}preloadConfig(i,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?(0,Ye.of)(o._loadedConfig):this.loader.load(i.injector,o)).pipe((0,_n.zg)(l=>(o._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(Hn),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(xf))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})(),Nf=(()=>{class t{constructor(i,o,u={}){this.router=i,this.viewportScroller=o,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(i=>{i instanceof ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Bi&&(this.lastId=i.id,this.scheduleScrollEvent(i,this.router.parseUrl(i.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(i=>{i instanceof Xm&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,o){this.router.triggerEvent(new Xm(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(i){m.$Z()},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();const co=new m.OlP("ROUTER_CONFIGURATION"),Of=new m.OlP("ROUTER_FORROOT_GUARD"),Rf=[xe,{provide:kl,useClass:Fu},{provide:Hn,useFactory:function Lf(t,e,i,o,u,l,f={},g,_){const w=new Hn(null,t,e,i,o,u,ty(l));return g&&(w.urlHandlingStrategy=g),_&&(w.routeReuseStrategy=_),function Zu(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(f,w),f.enableTracing&&w.events.subscribe(E=>{var I,S;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(S=console.groupEnd)||void 0===S||S.call(console)}),w},deps:[kl,Hu,xe,m.zs3,m.Sil,Sf,co,[class Nw{},new m.FiY],[class ma{},new m.FiY]]},Hu,{provide:ua,useFactory:function kw(t){return t.routerState.root},deps:[Hn]},Yu,Ky,class Wy{preload(e,i){return i().pipe(Pr(()=>(0,Ye.of)(null)))}},{provide:co,useValue:{enableTracing:!1}}];function Yy(){return new m.PXZ("Router",Hn)}let Qu=(()=>{class t{constructor(i,o){}static forRoot(i,o){return{ngModule:t,providers:[Rf,Pf(i),{provide:Of,useFactory:Ff,deps:[[Hn,new m.FiY,new m.tp0]]},{provide:co,useValue:o||{}},{provide:ue,useFactory:Qy,deps:[ie,[new m.tBr(Ce),new m.FiY],co]},{provide:Nf,useFactory:Wl,deps:[Hn,bb,co]},{provide:xf,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:Ky},{provide:m.PXZ,multi:!0,useFactory:Yy},[Kl,{provide:m.ip1,multi:!0,useFactory:Vw,deps:[Kl]},{provide:kf,useFactory:Uw,deps:[Kl]},{provide:m.tb,multi:!0,useExisting:kf}]]}}static forChild(i){return{ngModule:t,providers:[Pf(i)]}}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(Of,8),m.LFG(Hn,8))},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({}),t})();function Wl(t,e,i){return i.scrollOffset&&e.setOffset(i.scrollOffset),new Nf(t,e,i)}function Qy(t,e,i={}){return i.useHash?new qe(t,e):new _e(t,e)}function Ff(t){return"guarded"}function Pf(t){return[{provide:m.deG,multi:!0,useValue:t},{provide:Sf,multi:!0,useValue:t}]}let Kl=(()=>{class t{constructor(i){this.injector=i,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new oo.xQ}appInitializer(){return this.injector.get(x,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const u=new Promise(g=>o=g),l=this.injector.get(Hn),f=this.injector.get(co);return"disabled"===f.initialNavigation?(l.setUpLocationChangeListener(),o(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Ye.of)(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),l.initialNavigation()):o(!0),u})}bootstrapListener(i){const o=this.injector.get(co),u=this.injector.get(Yu),l=this.injector.get(Nf),f=this.injector.get(Hn),g=this.injector.get(m.z2F);i===g.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&f.initialNavigation(),u.setUpPreloading(),l.init(),f.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(m.zs3))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})();function Vw(t){return t.appInitializer.bind(t)}function Uw(t){return t.bootstrapListener.bind(t)}const kf=new m.OlP("Router Initializer");class Uf{}var Zy=N(353);function jf(){return t=>t.lift(new Jy)}class Jy{call(e,i){return i.subscribe(new Bw(e))}}class Bw extends mr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let i;this.hasPrev?i=[this.prev,e]:this.hasPrev=!0,this.prev=e,i&&this.destination.next(i)}}class ei{constructor(e,i){this.compare=e,this.keySelector=i}call(e,i){return i.subscribe(new Hw(e,this.compare,this.keySelector))}}class Hw extends mr.L{constructor(e,i,o){super(e),this.keySelector=o,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}compare(e,i){return e===i}_next(e){let i;try{const{keySelector:u}=this;i=u?u(e):e}catch(u){return this.destination.error(u)}let o=!1;if(this.hasKey)try{const{compare:u}=this;o=u(this.key,i)}catch(u){return this.destination.error(u)}else this.hasKey=!0;o||(this.key=i,this.destination.next(e))}}var Gi=N(7951),Qt=N(6291),$w=N(5867),qw=N(8367),T=N(655),_t=N(492),cs=N(4003),Bf=function(t,e){return(Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])})(t,e)};function et(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ae,Xy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yl=Yl||{},Qe=Xy||self;function rr(){}function Ql(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ju(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ti="closure_uid_"+(1e9*Math.random()>>>0),Hf=0;function ev(t,e,i){return t.call.apply(t.bind,arguments)}function $f(t,e,i){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),t.apply(e,u)}}return function(){return t.apply(e,arguments)}}function xn(t,e,i){return(xn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ev:$f).apply(null,arguments)}function Xu(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var o=i.slice();return o.push.apply(o,arguments),t.apply(this,o)}}function Nn(t,e){function i(){}i.prototype=e.prototype,t.Z=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Vb=function(o,u,l){for(var f=Array(arguments.length-2),g=2;g<arguments.length;g++)f[g-2]=arguments[g];return e.prototype[u].apply(o,f)}}function ni(){this.s=this.s,this.o=this.o}var qf={};ni.prototype.s=!1,ni.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function Gf(t){return Object.prototype.hasOwnProperty.call(t,ti)&&t[ti]||(t[ti]=++Hf)}(this);delete qf[t]}},ni.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Jl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1},Xl=Array.prototype.forEach?function(t,e,i){Array.prototype.forEach.call(t,e,i)}:function(t,e,i){for(var o=t.length,u="string"==typeof t?t.split(""):t,l=0;l<o;l++)l in u&&e.call(i,u[l],l,t)};function tv(t){return Array.prototype.concat.apply([],arguments)}function zf(t){var e=t.length;if(0<e){for(var i=Array(e),o=0;o<e;o++)i[o]=t[o];return i}return[]}function eh(t){return/^[\s\xa0]*$/.test(t)}var $n,nv=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function On(t,e){return-1!=t.indexOf(e)}function rv(t,e){return t<e?-1:t>e?1:0}e:{var Ww=Qe.navigator;if(Ww){var Wf=Ww.userAgent;if(Wf){$n=Wf;break e}}$n=""}function th(t,e,i){for(var o in t)e.call(i,t[o],o,t)}function iv(t){var e={};for(var i in t)e[i]=t[i];return e}var nh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kw(t,e){for(var i,o,u=1;u<arguments.length;u++){for(i in o=arguments[u])t[i]=o[i];for(var l=0;l<nh.length;l++)i=nh[l],Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}}function ov(t){return ov[" "](t),t}ov[" "]=rr;var ri,t,fI=On($n,"Opera"),ec=On($n,"Trident")||On($n,"MSIE"),Yw=On($n,"Edge"),sv=Yw||ec,Qw=On($n,"Gecko")&&!(On($n.toLowerCase(),"webkit")&&!On($n,"Edge"))&&!(On($n,"Trident")||On($n,"MSIE"))&&!On($n,"Edge"),pI=On($n.toLowerCase(),"webkit")&&!On($n,"Edge");function Zw(){var t=Qe.document;return t?t.documentMode:void 0}e:{var tc="",Kf=(t=$n,Qw?/rv:([^\);]+)(\)|;)/.exec(t):Yw?/Edge\/([\d\.]+)/.exec(t):ec?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):pI?/WebKit\/(\S+)/.exec(t):fI?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(Kf&&(tc=Kf?Kf[1]:""),ec){var rh=Zw();if(null!=rh&&rh>parseFloat(tc)){ri=String(rh);break e}}ri=tc}var Yf={};var lo=Qe.document&&ec&&(Zw()||parseInt(ri,10))||void 0,cv=function(){if(!Qe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Qe.addEventListener("test",rr,e),Qe.removeEventListener("test",rr,e)}catch(i){}return t}();function Rn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ls(t,e){if(Rn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,o=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Qw){e:{try{ov(e.nodeName);var u=!0;break e}catch(l){}u=!1}u||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jw[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ls.Z.h.call(this)}}Rn.prototype.h=function(){this.defaultPrevented=!0},Nn(ls,Rn);var Jw={2:"touch",3:"pen",4:"mouse"};ls.prototype.h=function(){ls.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var va="closure_listenable_"+(1e6*Math.random()|0),Xw=0;function eD(t,e,i,o,u){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!o,this.ia=u,this.key=++Xw,this.ca=this.fa=!1}function ho(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Hi(t){this.src=t,this.g={},this.h=0}function rc(t,e){var i=e.type;if(i in t.g){var l,o=t.g[i],u=Jl(o,e);(l=0<=u)&&Array.prototype.splice.call(o,u,1),l&&(ho(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function fo(t,e,i,o){for(var u=0;u<t.length;++u){var l=t[u];if(!l.ca&&l.listener==e&&l.capture==!!i&&l.ia==o)return u}return-1}Hi.prototype.add=function(t,e,i,o,u){var l=t.toString();(t=this.g[l])||(t=this.g[l]=[],this.h++);var f=fo(t,e,o,u);return-1<f?(e=t[f],i||(e.fa=!1)):((e=new eD(e,this.src,l,!!o,u)).fa=i,t.push(e)),e};var hs="closure_lm_"+(1e6*Math.random()|0),po={};function lv(t,e,i,o,u){if(o&&o.once)return ih(t,e,i,o,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)lv(t,e[l],i,o,u);return null}return i=uh(i),t&&t[va]?t.N(e,i,Ju(o)?!!o.capture:!!o,u):Qf(t,e,i,!1,o,u)}function Qf(t,e,i,o,u,l){if(!e)throw Error("Invalid event type");var f=Ju(u)?!!u.capture:!!u,g=ah(t);if(g||(t[hs]=g=new Hi(t)),(i=g.add(e,i,o,f,l)).proxy)return i;if(o=function hv(){var e=tD;return function t(i){return e.call(t.src,t.listener,i)}}(),i.proxy=o,o.src=t,o.listener=i,t.addEventListener)cv||(u=f),void 0===u&&(u=!1),t.addEventListener(e.toString(),o,u);else if(t.attachEvent)t.attachEvent(ic(e.toString()),o);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(o)}return i}function ih(t,e,i,o,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)ih(t,e[l],i,o,u);return null}return i=uh(i),t&&t[va]?t.O(e,i,Ju(o)?!!o.capture:!!o,u):Qf(t,e,i,!0,o,u)}function oh(t,e,i,o,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)oh(t,e[l],i,o,u);else o=Ju(o)?!!o.capture:!!o,i=uh(i),t&&t[va]?(t=t.i,(e=String(e).toString())in t.g&&-1<(i=fo(l=t.g[e],i,o,u))&&(ho(l[i]),Array.prototype.splice.call(l,i,1),0==l.length&&(delete t.g[e],t.h--))):t&&(t=ah(t))&&(e=t.g[e.toString()],t=-1,e&&(t=fo(e,i,o,u)),(i=-1<t?e[t]:null)&&sh(i))}function sh(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[va])rc(e.i,t);else{var i=t.type,o=t.proxy;e.removeEventListener?e.removeEventListener(i,o,t.capture):e.detachEvent?e.detachEvent(ic(i),o):e.addListener&&e.removeListener&&e.removeListener(o),(i=ah(e))?(rc(i,t),0==i.h&&(i.src=null,e[hs]=null)):ho(t)}}}function ic(t){return t in po?po[t]:po[t]="on"+t}function tD(t,e){if(t.ca)t=!0;else{e=new ls(e,this);var i=t.listener,o=t.ia||t.src;t.fa&&sh(t),t=i.call(o,e)}return t}function ah(t){return(t=t[hs])instanceof Hi?t:null}var dv="__closure_events_fn_"+(1e9*Math.random()>>>0);function uh(t){return"function"==typeof t?t:(t[dv]||(t[dv]=function(e){return t.handleEvent(e)}),t[dv])}function on(){ni.call(this),this.i=new Hi(this),this.P=this,this.I=null}function wn(t,e){var i,o=t.I;if(o)for(i=[];o;o=o.I)i.push(o);if(t=t.P,o=e.type||e,"string"==typeof e)e=new Rn(e,t);else if(e instanceof Rn)e.target=e.target||t;else{var u=e;Kw(e=new Rn(o,t),u)}if(u=!0,i)for(var l=i.length-1;0<=l;l--){var f=e.g=i[l];u=oc(f,o,!0,e)&&u}if(u=oc(f=e.g=t,o,!0,e)&&u,u=oc(f,o,!1,e)&&u,i)for(l=0;l<i.length;l++)u=oc(f=e.g=i[l],o,!1,e)&&u}function oc(t,e,i,o){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ca&&f.capture==i){var g=f.listener,_=f.ia||f.src;f.fa&&rc(t.i,f),u=!1!==g.call(_,o)&&u}}return u&&!o.defaultPrevented}Nn(on,ni),on.prototype[va]=!0,on.prototype.removeEventListener=function(t,e,i,o){oh(this,t,e,i,o)},on.prototype.M=function(){if(on.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var i=t.g[e],o=0;o<i.length;o++)ho(i[o]);delete t.g[e],t.h--}}this.I=null},on.prototype.N=function(t,e,i,o){return this.i.add(String(t),e,!1,i,o)},on.prototype.O=function(t,e,i,o){return this.i.add(String(t),e,!0,i,o)};var Zf=Qe.JSON.stringify;function nD(){var t=lh,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ch,_r=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,i){var o=fv.get();o.set(e,i),this.h?this.h.next=o:this.g=o,this.h=o},t}(),fv=new(function(){function t(e,i){this.i=e,this.j=i,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},t}())(function(){return new rD},function(t){return t.reset()}),rD=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,i){this.h=e,this.g=i,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function gI(t){Qe.setTimeout(function(){throw t},0)}function pv(t,e){ch||function mI(){var t=Qe.Promise.resolve(void 0);ch=function(){t.then(gv)}}(),Jf||(ch(),Jf=!0),lh.add(t,e)}var Jf=!1,lh=new _r;function gv(){for(var t;t=nD();){try{t.h.call(t.g)}catch(i){gI(i)}var e=fv;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jf=!1}function hh(t,e){on.call(this),this.h=t||1,this.g=e||Qe,this.j=xn(this.kb,this),this.l=Date.now()}function Xf(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ep(t,e,i){if("function"==typeof t)i&&(t=xn(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=xn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Qe.setTimeout(t,e||0)}function tp(t){t.g=ep(function(){t.g=null,t.i&&(t.i=!1,tp(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Nn(hh,on),(Ae=hh.prototype).da=!1,Ae.S=null,Ae.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wn(this,"tick"),this.da&&(Xf(this),this.start()))}},Ae.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ae.M=function(){hh.Z.M.call(this),Xf(this),delete this.g};var iD=function(t){function e(i,o){var u=t.call(this)||this;return u.m=i,u.j=o,u.h=null,u.i=!1,u.g=null,u}return function zw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Bf(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.l=function(i){this.h=arguments,this.g?this.i=!0:tp(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Qe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ni);function _a(t){ni.call(this),this.h=t,this.g={}}Nn(_a,ni);var mv=[];function yv(t,e,i,o){Array.isArray(i)||(i&&(mv[0]=i.toString()),i=mv);for(var u=0;u<i.length;u++){var l=lv(e,i[u],o||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function np(t){th(t.g,function(e,i){this.g.hasOwnProperty(i)&&sh(e)},t),t.g={}}function sc(){this.g=!0}function go(t,e,i,o){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aD(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var o=i[t];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<u.length;f++)u[f]=""}}}return Zf(i)}catch(g){return e}}(t,i)+(o?" "+o:"")})}_a.prototype.M=function(){_a.Z.M.call(this),np(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sc.prototype.Aa=function(){this.g=!1},sc.prototype.info=function(){};var ba={},rp=null;function dh(){return rp=rp||new on}function vv(t){Rn.call(this,ba.Ma,t)}function ac(t){var e=dh();wn(e,new vv(e,t))}function fh(t,e){Rn.call(this,ba.STAT_EVENT,t),this.stat=e}function qn(t){var e=dh();wn(e,new fh(e,t))}function _v(t,e){Rn.call(this,ba.Na,t),this.size=e}function mo(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Qe.setTimeout(function(){t()},e)}ba.Ma="serverreachability",Nn(vv,Rn),ba.STAT_EVENT="statevent",Nn(fh,Rn),ba.Na="timingevent",Nn(_v,Rn);var wa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uc(){}function ip(){}uc.prototype.h=null;var wv,cc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function op(){Rn.call(this,"d")}function lc(){Rn.call(this,"c")}function gh(){}function Da(t,e,i,o){this.l=t,this.j=e,this.m=i,this.X=o||1,this.V=new _a(this),this.P=Dv,this.W=new hh(t=sv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sp}function sp(){this.i=null,this.g="",this.h=!1}Nn(op,Rn),Nn(lc,Rn),Nn(gh,uc),gh.prototype.g=function(){return new XMLHttpRequest},gh.prototype.i=function(){return{}},wv=new gh;var Dv=45e3,mh={},hc={};function ii(t,e,i){t.K=1,t.v=bh(ir(e)),t.s=i,t.U=!0,dc(t,null)}function dc(t,e){t.F=Date.now(),ds(t),t.A=ir(t.v);var i=t.A,o=t.X;Array.isArray(o)||(o=[String(o)]),hp(i.h,"t",o),t.C=0,i=t.l.H,t.h=new sp,t.g=jv(t.l,i?e:null,!t.s),0<t.O&&(t.L=new iD(xn(t.Ia,t,t.g),t.O)),yv(t.V,t.g,"readystatechange",t.gb),e=t.H?iv(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ac(1),function oD(t,e,i,o,u,l){t.info(function(){if(t.g)if(l)for(var f="",g=l.split("&"),_=0;_<g.length;_++){var w=g[_].split("=");if(1<w.length){var E=w[0];w=w[1];var I=E.split("_");f=2<=I.length&&"type"==I[1]?f+(E+"=")+w+"&":f+(E+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+i+"\n"+f})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ev(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Cv(t,e,i){for(var u,o=!0;!t.I&&t.C<i.length;){if((u=yI(t,i))==hc){4==e&&(t.o=4,qn(14),o=!1),go(t.j,t.m,null,"[Incomplete Response]");break}if(u==mh){t.o=4,qn(15),go(t.j,t.m,i,"[Invalid Chunk]"),o=!1;break}go(t.j,t.m,u,null),fc(t,u)}Ev(t)&&u!=hc&&u!=mh&&(t.h.g="",t.C=0),4!=e||0!=i.length||t.h.h||(t.o=1,qn(16),o=!1),t.i=t.i&&o,o?0<i.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),Ah(e),e.L=!0,qn(11))):(go(t.j,t.m,i,"[Invalid Chunked Response]"),fs(t),$i(t))}function yI(t,e){var i=t.C,o=e.indexOf("\n",i);return-1==o?hc:(i=Number(e.substring(i,o)),isNaN(i)?mh:(o+=1)+i>e.length?hc:(e=e.substr(o,i),t.C=o+i,e))}function ds(t){t.Y=Date.now()+t.P,ap(t,t.P)}function ap(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=mo(xn(t.eb,t),e)}function Ea(t){t.B&&(Qe.clearTimeout(t.B),t.B=null)}function $i(t){0==t.l.G||t.I||gp(t.l,t)}function fs(t){Ea(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Xf(t.W),np(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function fc(t,e){try{var i=t.l;if(0!=i.G&&(i.g==t||wh(i.i,t)))if(i.I=t.N,!t.J&&wh(i.i,t)&&3==i.G){try{var o=i.Ca.g.parse(e)}catch(se){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(i.u)i.ta=u[1],0<i.ta-i.U&&37500>u[2]&&i.N&&0==i.A&&!i.v&&(i.v=mo(xn(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<t.F))break e;bc(i),Wi(i)}Sh(i),qn(18)}if(1>=fp(i.i)&&i.ka){try{i.ka()}catch(se){}i.ka=void 0}}else wo(i,11)}else if((t.J||i.g==t)&&bc(i),!eh(e))for(u=i.Ca.g.parse(e),e=0;e<u.length;e++){var l=u[e];if(i.U=l[0],l=l[1],2==i.G)if("c"==l[0]){i.J=l[1],i.la=l[2];var f=l[3];null!=f&&(i.ma=f,i.h.info("VER="+i.ma));var g=l[4];null!=g&&(i.za=g,i.h.info("SVER="+i.za));var _=l[5];null!=_&&"number"==typeof _&&0<_&&(i.K=o=1.5*_,i.h.info("backChannelRequestTimeoutMs_="+o)),o=i;var w=t.g;if(w){var E=w.g?w.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var I=o.i;!I.g&&(On(E,"spdy")||On(E,"quic")||On(E,"h2"))&&(I.j=I.l,I.g=new Set,I.h&&(Nv(I,I.h),I.h=null))}if(o.D){var S=w.g?w.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(o.sa=S,Ut(o.F,o.D,S))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-t.F,i.h.info("Handshake RTT: "+i.O+"ms"));var O=t;if((o=i).oa=vp(o,o.H?o.la:null,o.W),O.J){Vr(o.i,O);var V=O,W=o.K;W&&V.setTimeout(W),V.B&&(Ea(V),ds(V)),o.g=O}else ws(o);0<i.l.length&&Ki(i)}else"stop"!=l[0]&&"close"!=l[0]||wo(i,7);else 3==i.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?wo(i,7):_c(i):"noop"!=l[0]&&i.j&&i.j.wa(l),i.A=0)}ac(4)}catch(se){}}function yh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ql(t)||"string"==typeof t)Xl(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var i=t.T();else if(t.R&&"function"==typeof t.R)i=void 0;else if(Ql(t)||"string"==typeof t){i=[];for(var o=t.length,u=0;u<o;u++)i.push(u)}else for(u in i=[],o=0,t)i[o++]=u;o=function Iv(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Ql(t)){for(var e=[],i=t.length,o=0;o<i;o++)e.push(t[o]);return e}for(o in e=[],i=0,t)e[i++]=t[o];return e}(t),u=o.length;for(var l=0;l<u;l++)e.call(void 0,o[l],i&&i[l],t)}}function ps(t,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var o=0;o<i;o+=2)this.set(arguments[o],arguments[o+1])}else if(t)if(t instanceof ps)for(i=t.T(),o=0;o<i.length;o++)this.set(i[o],t.get(i[o]));else for(o in t)this.set(o,t[o])}function up(t){if(t.i!=t.g.length){for(var e=0,i=0;e<t.g.length;){var o=t.g[e];qi(t.h,o)&&(t.g[i++]=o),e++}t.g.length=i}if(t.i!=t.g.length){var u={};for(i=e=0;e<t.g.length;)qi(u,o=t.g[e])||(t.g[i++]=o,u[o]=1),e++;t.g.length=i}}function qi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ae=Da.prototype).setTimeout=function(t){this.P=t},Ae.gb=function(t){t=t.target;var e=this.L;e&&3==fn(t)?e.l():this.Ia(t)},Ae.Ia=function(t){try{if(t==this.g)e:{var e=fn(this.g),i=this.g.Da(),o=this.g.ba();if(!(3>e)&&(3!=e||sv||this.g&&(this.h.h||this.g.ga()||Sa(this.g)))){this.I||4!=e||7==i||ac(8==i||0>=o?3:2),Ea(this);var u=this.g.ba();this.N=u;t:if(Ev(this)){var l=Sa(this.g);t="";var f=l.length,g=4==fn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fs(this),$i(this);var _="";break t}this.h.i=new Qe.TextDecoder}for(i=0;i<f;i++)this.h.h=!0,t+=this.h.i.decode(l[i],{stream:g&&i==f-1});l.splice(0,f),this.h.g+=t,this.C=0,_=this.h.g}else _=this.g.ga();if(this.i=200==u,function Di(t,e,i,o,u,l,f){t.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+i+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,e,u),this.i){if(this.$&&!this.J){t:{if(this.g){var w,E=this.g;if((w=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eh(w)){var I=w;break t}}I=null}if(!(u=I)){this.i=!1,this.o=3,qn(12),fs(this),$i(this);break e}go(this.j,this.m,u,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fc(this,u)}this.U?(Cv(this,e,_),sv&&this.i&&3==e&&(yv(this.V,this.W,"tick",this.fb),this.W.start())):(go(this.j,this.m,_,null),fc(this,_)),4==e&&fs(this),this.i&&!this.I&&(4==e?gp(this.l,this):(this.i=!1,ds(this)))}else 400==u&&0<_.indexOf("Unknown SID")?(this.o=3,qn(12)):(this.o=0,qn(13)),fs(this),$i(this)}}}catch(S){}},Ae.fb=function(){if(this.g){var t=fn(this.g),e=this.g.ga();this.C<e.length&&(Ea(this),Cv(this,t,e),this.i&&4!=t&&ds(this))}},Ae.cancel=function(){this.I=!0,fs(this)},Ae.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function sD(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ac(3),qn(17)),fs(this),this.o=2,$i(this)):ap(this,this.Y-t)},(Ae=ps.prototype).R=function(){up(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ae.T=function(){return up(this),this.g.concat()},Ae.get=function(t,e){return qi(this.h,t)?this.h[t]:e},Ae.set=function(t,e){qi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ae.forEach=function(t,e){for(var i=this.T(),o=0;o<i.length;o++){var u=i[o],l=this.get(u);t.call(e,l,u,this)}};var Tv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yo(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof yo){this.g=void 0!==e?e:t.g,pc(this,t.j),this.s=t.s,vh(this,t.i),_h(this,t.m),this.l=t.l,e=t.h;var i=new gc;i.i=e.i,e.g&&(i.g=new ps(e.g),i.h=e.h),gs(this,i),this.o=t.o}else t&&(i=String(t).match(Tv))?(this.g=!!e,pc(this,i[1]||"",!0),this.s=Fn(i[2]||""),vh(this,i[3]||"",!0),_h(this,i[4]),this.l=Fn(i[5]||"",!0),gs(this,i[6]||"",!0),this.o=Fn(i[7]||"")):(this.g=!!e,this.h=new gc(null,this.g))}function ir(t){return new yo(t)}function pc(t,e,i){t.j=i?Fn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vh(t,e,i){t.i=i?Fn(e,!0):e}function _h(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gs(t,e,i){e instanceof gc?(t.h=e,function pD(t,e){e&&!t.j&&(vo(t),t.i=null,t.g.forEach(function(i,o){var u=o.toLowerCase();o!=u&&(lp(this,o),hp(this,u,i))},t)),t.j=e}(t.h,t.g)):(i||(e=ms(e,hD)),t.h=new gc(e,t.g))}function Ut(t,e,i){t.h.set(e,i)}function bh(t){return Ut(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ms(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,Sv),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ms(e,cp,!0),":");var i=this.i;return(i||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ms(e,cp,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&t.push("/"),t.push(ms(i,"/"==i.charAt(0)?Mv:Av,!0))),(i=this.h.toString())&&t.push("?",i),(i=this.o)&&t.push("#",ms(i,dD)),t.join("")};var cp=/[#\/\?@]/g,Av=/[#\?:]/g,Mv=/[#\?]/g,hD=/[#\?@]/g,dD=/#/g;function gc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function vo(t){t.g||(t.g=new ps,t.h=0,t.i&&function uD(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var o=t[i].indexOf("="),u=null;if(0<=o){var l=t[i].substring(0,o);u=t[i].substring(o+1)}else l=t[i];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function lp(t,e){vo(t),e=Ca(t,e),qi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,qi((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&up(t)))}function fD(t,e){return vo(t),e=Ca(t,e),qi(t.g.h,e)}function hp(t,e,i){lp(t,e),0<i.length&&(t.i=null,t.g.set(Ca(t,e),zf(i)),t.h+=i.length)}function Ca(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ae=gc.prototype).add=function(t,e){vo(this),this.i=null,t=Ca(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},Ae.forEach=function(t,e){vo(this),this.g.forEach(function(i,o){Xl(i,function(u){t.call(e,u,o,this)},this)},this)},Ae.T=function(){vo(this);for(var t=this.g.R(),e=this.g.T(),i=[],o=0;o<e.length;o++)for(var u=t[o],l=0;l<u.length;l++)i.push(e[o]);return i},Ae.R=function(t){vo(this);var e=[];if("string"==typeof t)fD(this,t)&&(e=tv(e,this.g.get(Ca(this,t))));else{t=this.g.R();for(var i=0;i<t.length;i++)e=tv(e,t[i])}return e},Ae.set=function(t,e){return vo(this),this.i=null,fD(this,t=Ca(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ae.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),i=0;i<e.length;i++){var o=e[i],u=encodeURIComponent(String(o));o=this.R(o);for(var l=0;l<o.length;l++){var f=u;""!==o[l]&&(f+="="+encodeURIComponent(String(o[l]))),t.push(f)}}return this.i=t.join("&")};var vI=function t(e,i){this.h=e,this.g=i};function gD(t){this.l=t||dp,t=Qe.PerformanceNavigationTiming?0<(t=Qe.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Qe.g&&Qe.g.Ea&&Qe.g.Ea()&&Qe.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dp=10;function xv(t){return!!t.h||!!t.g&&t.g.size>=t.j}function fp(t){return t.h?1:t.g?t.g.size:0}function wh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Nv(t,e){t.g?t.g.add(e):t.h=e}function Vr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function mD(t){var e,i;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var o=t.i;try{for(var u=et(t.g.values()),l=u.next();!l.done;l=u.next())o=o.concat(l.value.D)}catch(g){e={error:g}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return o}return zf(t.i)}function Ov(){}function Rv(){this.g=new Ov}function Fv(t,e,i){var o=i||"";try{yh(t,function(u,l){var f=u;Ju(u)&&(f=Zf(u)),e.push(o+l+"="+encodeURIComponent(f))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Dh(t,e,i,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(l){}}function Eh(t){this.l=t.$b||null,this.j=t.ib||!1}function mc(t,e){on.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gD.prototype.cancel=function(){var t,e;if(this.i=mD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var i=et(this.g.values()),o=i.next();!o.done;o=i.next())o.value.cancel()}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.g.clear()}},Ov.prototype.stringify=function(t){return Qe.JSON.stringify(t,void 0)},Ov.prototype.parse=function(t){return Qe.JSON.parse(t,void 0)},Nn(Eh,uc),Eh.prototype.g=function(){return new mc(this.l,this.j)},Eh.prototype.i=function(t){return function(){return t}}({}),Nn(mc,on);var yc=0;function Lv(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function ys(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vc(t)}function vc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ae=mc.prototype).open=function(t,e){if(this.readyState!=yc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vc(this)},Ae.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Qe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ys(this)),this.readyState=yc},Ae.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Qe.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lv(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ae.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ys(this):vc(this),3==this.readyState&&Lv(this)}},Ae.Ua=function(t){this.g&&(this.response=this.responseText=t,ys(this))},Ae.Ta=function(t){this.g&&(this.response=t,ys(this))},Ae.ha=function(){this.g&&ys(this)},Ae.setRequestHeader=function(t,e){this.v.append(t,e)},Ae.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ae.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),i=e.next();!i.done;)t.push((i=i.value)[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var yD=Qe.JSON.parse;function tn(t){on.call(this),this.headers=new ps,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kv,this.K=this.L=!1}Nn(tn,on);var kv="",vD=/^https?$/i,_D=["POST","PUT"];function Ia(t){return"content-type"==t.toLowerCase()}function Vv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ta(t),Ih(t)}function Ta(t){t.D||(t.D=!0,wn(t,"complete"),wn(t,"error"))}function Uv(t){if(t.h&&void 0!==Yl&&(!t.C[1]||4!=fn(t)||2!=t.ba()))if(t.v&&4==fn(t))ep(t.Fa,0,t);else if(wn(t,"readystatechange"),4==fn(t)){t.h=!1;try{var o,e=t.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(o=i)){var u;if(u=0===e){var l=String(t.H).match(Tv)[1]||null;if(!l&&Qe.self&&Qe.self.location){var f=Qe.self.location.protocol;l=f.substr(0,f.length-1)}u=!vD.test(l?l.toLowerCase():"")}o=u}if(o)wn(t,"complete"),wn(t,"success");else{t.m=6;try{var g=2<fn(t)?t.g.statusText:""}catch(_){g=""}t.j=g+" ["+t.ba()+"]",Ta(t)}}finally{Ih(t)}}}function Ih(t,e){if(t.g){Th(t);var i=t.g,o=t.C[0]?rr:null;t.g=null,t.C=null,e||wn(t,"ready");try{i.onreadystatechange=o}catch(u){}}}function Th(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Qe.clearTimeout(t.A),t.A=null)}function fn(t){return t.g?t.g.readyState:0}function Sa(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kv:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function zi(t,e,i){e:{for(o in i){var o=!1;break e}o=!0}o||(i=function Pn(t){var e="";return th(t,function(i,o){e+=o,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):Ut(t,e,i))}function _o(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function br(t){this.za=0,this.l=[],this.h=new sc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_o("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_o("baseRetryDelayMs",5e3,t),this.$a=_o("retryDelaySeedMs",1e4,t),this.Ya=_o("forwardChannelMaxRetries",2,t),this.ra=_o("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new gD(t&&t.concurrentRequestLimit),this.Ca=new Rv,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function _c(t){if(vs(t),3==t.G){var e=t.V++,i=ir(t.F);Ut(i,"SID",t.J),Ut(i,"RID",e),Ut(i,"TYPE","terminate"),Ei(t,i),(e=new Da(t,t.h,e,void 0)).K=2,e.v=bh(ir(i)),i=!1,Qe.navigator&&Qe.navigator.sendBeacon&&(i=Qe.navigator.sendBeacon(e.v.toString(),"")),!i&&Qe.Image&&((new Image).src=e.v,i=!0),i||(e.g=jv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ds(e)}yp(t)}function Wi(t){t.g&&(Ah(t),t.g.cancel(),t.g=null)}function vs(t){Wi(t),t.u&&(Qe.clearTimeout(t.u),t.u=null),bc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Qe.clearTimeout(t.m),t.m=null)}function bo(t,e){t.l.push(new vI(t.Za++,e)),3==t.G&&Ki(t)}function Ki(t){xv(t.i)||t.m||(t.m=!0,pv(t.Ha,t),t.C=0)}function _s(t,e){var i;i=e?e.m:t.V++;var o=ir(t.F);Ut(o,"SID",t.J),Ut(o,"RID",i),Ut(o,"AID",t.U),Ei(t,o),t.o&&t.s&&zi(o,t.o,t.s),i=new Da(t,t.h,i,t.C+1),null===t.o&&(i.H=t.s),e&&(t.l=e.D.concat(t.l)),e=bs(t,i,1e3),i.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Nv(t.i,i),ii(i,o,e)}function Ei(t,e){t.j&&yh({},function(i,o){Ut(e,o,i)})}function bs(t,e,i){i=Math.min(t.l.length,i);var o=t.j?xn(t.j.Oa,t.j,t):null;e:for(var u=t.l,l=-1;;){var f=["count="+i];-1==l?0<i?f.push("ofs="+(l=u[0].h)):l=0:f.push("ofs="+l);for(var g=!0,_=0;_<i;_++){var w=u[_].h,E=u[_].g;if(0>(w-=l))l=Math.max(0,u[_].h-100),g=!1;else try{Fv(E,f,"req"+w+"_")}catch(I){o&&o(E)}}if(g){o=f.join("&");break e}}return t=t.l.splice(0,i),e.D=t,o}function ws(t){t.g||t.u||(t.Y=1,pv(t.Ga,t),t.A=0)}function Sh(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=mo(xn(t.Ga,t),mp(t,t.A)),t.A++,0))}function Ah(t){null!=t.B&&(Qe.clearTimeout(t.B),t.B=null)}function pp(t){t.g=new Da(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ir(t.oa);Ut(e,"RID","rpc"),Ut(e,"SID",t.J),Ut(e,"CI",t.N?"0":"1"),Ut(e,"AID",t.U),Ei(t,e),Ut(e,"TYPE","xmlhttp"),t.o&&t.s&&zi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var i=t.g;t=t.la,i.K=1,i.v=bh(ir(e)),i.s=null,i.U=!0,dc(i,t)}function bc(t){null!=t.v&&(Qe.clearTimeout(t.v),t.v=null)}function gp(t,e){var i=null;if(t.g==e){bc(t),Ah(t),t.g=null;var o=2}else{if(!wh(t.i,e))return;i=e.D,Vr(t.i,e),o=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==o){i=e.s?e.s.length:0,e=Date.now()-e.F;var u=t.C;wn(o=dh(),new _v(o,i,e,u)),Ki(t)}else ws(t);else if(3==(u=e.o)||0==u&&0<t.I||!(1==o&&function Aa(t,e){return!(fp(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=mo(xn(t.Ha,t,e),mp(t,t.C)),t.C++,0)))}(t,e)||2==o&&Sh(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),u){case 1:wo(t,5);break;case 4:wo(t,10);break;case 3:wo(t,6);break;default:wo(t,2)}}function mp(t,e){var i=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(i*=2),i*e}function wo(t,e){if(t.h.info("Error code "+e),2==e){var i=null;t.j&&(i=null);var o=xn(t.jb,t);i||(i=new yo("//www.google.com/images/cleardot.gif"),Qe.location&&"http"==Qe.location.protocol||pc(i,"https"),bh(i)),function Pv(t,e){var i=new sc;if(Qe.Image){var o=new Image;o.onload=Xu(Dh,i,o,"TestLoadImage: loaded",!0,e),o.onerror=Xu(Dh,i,o,"TestLoadImage: error",!1,e),o.onabort=Xu(Dh,i,o,"TestLoadImage: abort",!1,e),o.ontimeout=Xu(Dh,i,o,"TestLoadImage: timeout",!1,e),Qe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=t}else e(!1)}(i.toString(),o)}else qn(2);t.G=0,t.j&&t.j.va(e),yp(t),vs(t)}function yp(t){t.G=0,t.I=-1,t.j&&((0!=mD(t.i).length||0!=t.l.length)&&(t.i.i.length=0,zf(t.l),t.l.length=0),t.j.ua())}function vp(t,e,i){var o=function cD(t){return t instanceof yo?ir(t):new yo(t,void 0)}(i);if(""!=o.i)e&&vh(o,e+"."+o.i),_h(o,o.m);else{var u=Qe.location;o=function lD(t,e,i,o){var u=new yo(null,void 0);return t&&pc(u,t),e&&vh(u,e),i&&_h(u,i),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,i)}return t.aa&&th(t.aa,function(l,f){Ut(o,f,l)}),i=t.sa,(e=t.D)&&i&&Ut(o,e,i),Ut(o,"VER",t.ma),Ei(t,o),o}function jv(t,e,i){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tn(i&&t.Ba&&!t.qa?new Eh({ib:!0}):t.qa)).L=t.H,e}function _p(){}function Mh(){if(ec&&!(10<=Number(lo)))throw Error("Environmental error: no available transport.")}function wr(t,e){on.call(this),this.g=new br(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!eh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eh(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ma(this)}function bp(t){op.call(this);var e=t.__sm__;if(e){e:{for(var i in e){t=i;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Bv(){lc.call(this),this.status=1}function Ma(t){this.g=t}(Ae=tn.prototype).ea=function(t,e,i,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wv.g(),this.C=function ph(t){return t.h||(t.h=t.i())}(this.u?this.u:wv),this.g.onreadystatechange=xn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(l){return void Vv(this,l)}t=i||"";var u=new ps(this.headers);o&&yh(o,function(l,f){u.set(f,l)}),o=function hI(t){e:{for(var e=Ia,i=t.length,o="string"==typeof t?t.split(""):t,u=0;u<i;u++)if(u in o&&e.call(void 0,o[u],u,t)){e=u;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(u.T()),i=Qe.FormData&&t instanceof Qe.FormData,!(0<=Jl(_D,e))||o||i||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Th(this),0<this.B&&((this.K=function Ch(t){return ec&&function av(){return function dI(t){var e=Yf;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){for(var t=0,e=nv(String(ri)).split("."),i=nv("9").split("."),o=Math.max(e.length,i.length),u=0;0==t&&u<o;u++){var l=e[u]||"",f=i[u]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==l[0].length&&0==f[0].length)break;t=rv(0==l[1].length?0:parseInt(l[1],10),0==f[1].length?0:parseInt(f[1],10))||rv(0==l[2].length,0==f[2].length)||rv(l[2],f[2]),l=l[3],f=f[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xn(this.pa,this)):this.A=ep(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){Vv(this,l)}},Ae.pa=function(){void 0!==Yl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wn(this,"timeout"),this.abort(8))},Ae.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wn(this,"complete"),wn(this,"abort"),Ih(this))},Ae.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ih(this,!0)),tn.Z.M.call(this)},Ae.Fa=function(){this.s||(this.F||this.v||this.l?Uv(this):this.cb())},Ae.cb=function(){Uv(this)},Ae.ba=function(){try{return 2<fn(this)?this.g.status:-1}catch(t){return-1}},Ae.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ae.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yD(e)}},Ae.Da=function(){return this.m},Ae.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ae=br.prototype).ma=8,Ae.G=1,Ae.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ae.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Da(this,this.h,t,void 0),i=this.s;if(this.P&&(i?Kw(i=iv(i),this.P):i=this.P),null===this.o&&(e.H=i),this.ja)e:{for(var o=0,u=0;u<this.l.length;u++){var l=this.l[u];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(o+=l)){o=u;break e}if(4096===o||u===this.l.length-1){o=u+1;break e}}o=1e3}else o=1e3;o=bs(this,e,o),Ut(u=ir(this.F),"RID",t),Ut(u,"CVER",22),this.D&&Ut(u,"X-HTTP-Session-Id",this.D),Ei(this,u),this.o&&i&&zi(u,this.o,i),Nv(this.i,e),this.Ra&&Ut(u,"TYPE","init"),this.ja?(Ut(u,"$req",o),Ut(u,"SID","null"),e.$=!0,ii(e,u,null)):ii(e,u,o),this.G=2}}else 3==this.G&&(t?_s(this,t):0==this.l.length||xv(this.i)||_s(this))},Ae.Ga=function(){if(this.u=null,pp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=mo(xn(this.bb,this),t)}},Ae.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qn(10),Wi(this),pp(this))},Ae.ab=function(){null!=this.v&&(this.v=null,Wi(this),Sh(this),qn(19))},Ae.jb=function(t){t?(this.h.info("Successfully pinged google.com"),qn(2)):(this.h.info("Failed to ping google.com"),qn(1))},(Ae=_p.prototype).xa=function(){},Ae.wa=function(){},Ae.va=function(){},Ae.ua=function(){},Ae.Oa=function(){},Mh.prototype.g=function(t,e){return new wr(t,e)},Nn(wr,on),wr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,i=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),pv(xn(t.hb,t,e))),qn(0),t.W=e,t.aa=i||{},t.N=t.X,t.F=vp(t,null,t.W),Ki(t)},wr.prototype.close=function(){_c(this.g)},wr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,bo(this.g,e)}else this.v?((e={}).__data__=Zf(t),bo(this.g,e)):bo(this.g,t)},wr.prototype.M=function(){this.g.j=null,delete this.j,_c(this.g),delete this.g,wr.Z.M.call(this)},Nn(bp,op),Nn(Bv,lc),Nn(Ma,_p),Ma.prototype.xa=function(){wn(this.g,"a")},Ma.prototype.wa=function(t){wn(this.g,new bp(t))},Ma.prototype.va=function(t){wn(this.g,new Bv(t))},Ma.prototype.ua=function(){wn(this.g,"b")},Mh.prototype.createWebChannel=Mh.prototype.g,wr.prototype.send=wr.prototype.u,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,bv.COMPLETE="complete",ip.EventType=cc,cc.OPEN="a",cc.CLOSE="b",cc.ERROR="c",cc.MESSAGE="d",on.prototype.listen=on.prototype.N,tn.prototype.listenOnce=tn.prototype.O,tn.prototype.getLastError=tn.prototype.La,tn.prototype.getLastErrorCode=tn.prototype.Da,tn.prototype.getStatus=tn.prototype.ba,tn.prototype.getResponseJson=tn.prototype.Qa,tn.prototype.getResponseText=tn.prototype.ga,tn.prototype.send=tn.prototype.ea;var wc=wa,Hv=bv,$v=ba,qv_PROXY=10,qv_NOPROXY=11,zv=Eh,Ds=ip,xh=tn,Ur=function(){function t(e,i){var o=this;this.previousValue=e,i&&(i.sequenceNumberHandler=function(u){return o.t(u)},this.i=function(u){return i.writeSequenceNumber(u)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();Ur.o=-1;var Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ge=function(t){function e(i,o){var u=this;return(u=t.call(this,o)||this).code=i,u.message=o,u.name="FirebaseError",u.toString=function(){return u.name+": [code="+u.code+"]: "+u.message},u}return(0,T.ZT)(e,t),e}(Error),jr=new cs.Yd("@firebase/firestore");function Wv(){return jr.logLevel}function be(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(jr.logLevel<=cs.in.DEBUG){var o=e.map(Nh);jr.debug.apply(jr,(0,T.ev)(["Firestore (8.10.1): "+t],o))}}function Lt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(jr.logLevel<=cs.in.ERROR){var o=e.map(Nh);jr.error.apply(jr,(0,T.ev)(["Firestore (8.10.1): "+t],o))}}function Dc(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(jr.logLevel<=cs.in.WARN){var o=e.map(Nh);jr.warn.apply(jr,(0,T.ev)(["Firestore (8.10.1): "+t],o))}}function Nh(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function Re(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Lt(e),new Error(e)}function Ke(t,e){t||Re()}function De(t,e){return t}function bD(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(var o=0;o<t;o++)i[o]=Math.floor(256*Math.random());return i}var Dp=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,o="";o.length<20;)for(var u=bD(40),l=0;l<u.length;++l)o.length<20&&u[l]<i&&(o+=e.charAt(u[l]%e.length));return o},t}();function lt(t,e){return t<e?-1:t>e?1:0}function xa(t,e,i){return t.length===e.length&&t.every(function(o,u){return i(o,e[u])})}function Kv(t){return t+"\0"}var or=function(){function t(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var i=Math.floor(e/1e3);return new t(i,Math.floor(1e6*(e-1e3*i)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ot=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new or(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Ep(t){var e=0;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function Es(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function Cp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ip=function(){function t(e,i,o){void 0===i?i=0:i>e.length&&Re(),void 0===o?o=e.length-i:o>e.length-i&&Re(),this.segments=e,this.offset=i,this.len=o}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(o){i.push(o)}):i.push(e),this.construct(i)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},t.prototype.forEach=function(e){for(var i=this.offset,o=this.limit();i<o;i++)e(this.segments[i])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,i){for(var o=Math.min(e.length,i.length),u=0;u<o;u++){var l=e.get(u),f=i.get(u);if(l<f)return-1;if(l>f)return 1}return e.length<i.length?-1:e.length>i.length?1:0},t}(),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype.construct=function(i,o,u){return new e(i,o,u)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var u=[],l=0,f=i;l<f.length;l++){var g=f[l];if(g.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,"Invalid segment ("+g+"). Paths must not contain // in them.");u.push.apply(u,g.split("/").filter(function(_){return _.length>0}))}return new e(u)},e.emptyPath=function(){return new e([])},e}(Ip),bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype.construct=function(i,o,u){return new e(i,o,u)},e.isValidIdentifier=function(i){return bI.test(i)},e.prototype.canonicalString=function(){return this.toArray().map(function(i){return i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(i)||(i="`"+i+"`"),i}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(i){for(var o=[],u="",l=0,f=function(){if(0===u.length)throw new ge(Y.INVALID_ARGUMENT,"Invalid field path ("+i+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");o.push(u),u=""},g=!1;l<i.length;){var _=i[l];if("\\"===_){if(l+1===i.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+i);var w=i[l+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);u+=w,l+=2}else"`"===_?(g=!g,l++):"."!==_||g?(u+=_,l++):(f(),l++)}if(f(),g)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new e(o)},e.emptyPath=function(){return new e([])},e}(Ip),Na=function(){function t(e){this.fields=e,e.sort(Dr.comparator)}return t.prototype.covers=function(e){for(var i=0,o=this.fields;i<o.length;i++)if(o[i].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return xa(this.fields,e.fields,function(i,o){return i.isEqual(o)})},t}(),sr=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(i){for(var o="",u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return i}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return lt(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();sr.EMPTY_BYTE_STRING=new sr("");var Ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(Ke(!!t),"string"==typeof t){var e=0,i=Ec.exec(t);if(Ke(!!i),i[1]){var o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}var u=new Date(t);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Do(t){return"string"==typeof t?sr.fromBase64String(t):sr.fromUint8Array(t)}function Tp(t){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Oh(t){var e=t.mapValue.fields.__previous_value__;return Tp(e)?Oh(e):e}function Cs(t){var e=Yi(t.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}function Eo(t){return null==t}function Sp(t){return 0===t&&1/t==-1/0}function Yv(t){return"number"==typeof t&&Number.isInteger(t)&&!Sp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Pe=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(gt.fromString(e))},t.fromName=function(e){return new t(gt.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return null!==e&&0===gt.comparator(this.path,e.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,i){return gt.comparator(e.path,i.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new gt(e.slice()))},t}();function Co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tp(t)?4:10:Re()}function Ci(t,e){var u,i=Co(t);if(i!==Co(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cs(t).isEqual(Cs(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;var l=Yi(o.timestampValue),f=Yi(u.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return u=e,Do(t.bytesValue).isEqual(Do(u.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,u){return qt(o.geoPointValue.latitude)===qt(u.geoPointValue.latitude)&&qt(o.geoPointValue.longitude)===qt(u.geoPointValue.longitude)}(t,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return qt(o.integerValue)===qt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){var l=qt(o.doubleValue),f=qt(u.doubleValue);return l===f?Sp(l)===Sp(f):isNaN(l)&&isNaN(f)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:return function(o,u){var l=o.mapValue.fields||{},f=u.mapValue.fields||{};if(Ep(l)!==Ep(f))return!1;for(var g in l)if(l.hasOwnProperty(g)&&(void 0===f[g]||!Ci(l[g],f[g])))return!1;return!0}(t,e);default:return Re()}}function Oa(t,e){return void 0!==(t.values||[]).find(function(i){return Ci(i,e)})}function Io(t,e){var u,l,f,g,i=Co(t),o=Co(e);if(i!==o)return lt(i,o);switch(i){case 0:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return l=e,(f=qt((u=t).integerValue||u.doubleValue))<(g=qt(l.integerValue||l.doubleValue))?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1;case 3:return Ap(t.timestampValue,e.timestampValue);case 4:return Ap(Cs(t),Cs(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(u,l){var f=Do(u),g=Do(l);return f.compareTo(g)}(t.bytesValue,e.bytesValue);case 7:return function(u,l){for(var f=u.split("/"),g=l.split("/"),_=0;_<f.length&&_<g.length;_++){var w=lt(f[_],g[_]);if(0!==w)return w}return lt(f.length,g.length)}(t.referenceValue,e.referenceValue);case 8:return function(u,l){var f=lt(qt(u.latitude),qt(l.latitude));return 0!==f?f:lt(qt(u.longitude),qt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(u,l){for(var f=u.values||[],g=l.values||[],_=0;_<f.length&&_<g.length;++_){var w=Io(f[_],g[_]);if(w)return w}return lt(f.length,g.length)}(t.arrayValue,e.arrayValue);case 10:return function(u,l){var f=u.fields||{},g=Object.keys(f),_=l.fields||{},w=Object.keys(_);g.sort(),w.sort();for(var E=0;E<g.length&&E<w.length;++E){var I=lt(g[E],w[E]);if(0!==I)return I;var S=Io(f[g[E]],_[w[E]]);if(0!==S)return S}return lt(g.length,w.length)}(t.mapValue,e.mapValue);default:throw Re()}}function Ap(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return lt(t,e);var i=Yi(t),o=Yi(e),u=lt(i.seconds,o.seconds);return 0!==u?u:lt(i.nanos,o.nanos)}function Rh(t){return Cc(t)}function Cc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?"time("+(u=Yi(t.timestampValue)).seconds+","+u.nanos+")":"stringValue"in t?t.stringValue:"bytesValue"in t?Do(t.bytesValue).toBase64():"referenceValue"in t?Pe.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(o){for(var u="[",l=!0,f=0,g=o.values||[];f<g.length;f++)l?l=!1:u+=",",u+=Cc(g[f]);return u+"]"}(t.arrayValue):"mapValue"in t?function(o){for(var u="{",l=!0,f=0,g=Object.keys(o.fields||{}).sort();f<g.length;f++){var _=g[f];l?l=!1:u+=",",u+=_+":"+Cc(o.fields[_])}return u+"}"}(t.mapValue):Re();var u,e}function Ic(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Mp(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function xp(t){return!!t&&"nullValue"in t}function Ph(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function Sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Es(t.mapValue.fields,function(u,l){return e.mapValue.fields[u]=Sc(l)}),e}if(t.arrayValue){for(var i={arrayValue:{values:[]}},o=0;o<(t.arrayValue.values||[]).length;++o)i.arrayValue.values[o]=Sc(t.arrayValue.values[o]);return i}return Object.assign({},t)}var Er=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var i=this.value,o=0;o<e.length-1;++o)if(!Tc(i=(i.mapValue.fields||{})[e.get(o)]))return null;return(i=(i.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(i)},t.prototype.setAll=function(e){var i=this,o=Dr.emptyPath(),u={},l=[];e.forEach(function(g,_){if(!o.isImmediateParentOf(_)){var w=i.getFieldsMap(o);i.applyChanges(w,u,l),u={},l=[],o=_.popLast()}g?u[_.lastSegment()]=Sc(g):l.push(_.lastSegment())});var f=this.getFieldsMap(o);this.applyChanges(f,u,l)},t.prototype.delete=function(e){var i=this.field(e.popLast());Tc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return Ci(this.value,e.value)},t.prototype.getFieldsMap=function(e){var i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(var o=0;o<e.length;++o){var u=i.mapValue.fields[e.get(o)];Tc(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},i.mapValue.fields[e.get(o)]=u),i=u}return i.mapValue.fields},t.prototype.applyChanges=function(e,i,o){Es(i,function(g,_){return e[g]=_});for(var u=0,l=o;u<l.length;u++)delete e[l[u]]},t.prototype.clone=function(){return new t(Sc(this.value))},t}();function Qv(t){var e=[];return Es(t.fields,function(i,o){var u=new Dr([i]);if(Tc(o)){var l=Qv(o.mapValue).fields;if(0===l.length)e.push(u);else for(var f=0,g=l;f<g.length;f++)e.push(u.child(g[f]))}else e.push(u)}),new Na(e)}var pn=function(){function t(e,i,o,u,l){this.key=e,this.documentType=i,this.version=o,this.data=u,this.documentState=l}return t.newInvalidDocument=function(e){return new t(e,0,ot.min(),Er.empty(),0)},t.newFoundDocument=function(e,i,o){return new t(e,1,i,o,0)},t.newNoDocument=function(e,i){return new t(e,2,i,Er.empty(),0)},t.newUnknownDocument=function(e,i){return new t(e,3,i,Er.empty(),2)},t.prototype.convertToFoundDocument=function(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Np=function(t,e,i,o,u,l,f){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===l&&(l=null),void 0===f&&(f=null),this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=l,this.endAt=f,this.h=null};function Op(t,e,i,o,u,l,f){return void 0===e&&(e=null),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===l&&(l=null),void 0===f&&(f=null),new Np(t,e,i,o,u,l,f)}function Ra(t){var e=De(t);if(null===e.h){var i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(function(o){return(u=o).field.canonicalString()+u.op.toString()+Rh(u.value);var u}).join(","),i+="|ob:",i+=e.orderBy.map(function(o){return(u=o).field.canonicalString()+u.dir;var u}).join(","),Eo(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=xc(e.startAt)),e.endAt&&(i+="|ub:",i+=xc(e.endAt)),e.h=i}return e.h}function Ac(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var i=0;i<t.orderBy.length;i++)if(!ID(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o=0;o<t.filters.length;o++)if((u=t.filters[o]).op!==(l=e.filters[o]).op||!u.field.isEqual(l.field)||!Ci(u.value,l.value))return!1;var u,l;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t_(t.startAt,e.startAt)&&t_(t.endAt,e.endAt)}function Mc(t){return Pe.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ar=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).field=i,l.op=o,l.value=u,l}return(0,T.ZT)(e,t),e.create=function(i,o,u){return i.isKeyField()?"in"===o||"not-in"===o?this.l(i,o,u):new Zv(i,o,u):"array-contains"===o?new DD(i,u):"in"===o?new ED(i,u):"not-in"===o?new e_(i,u):"array-contains-any"===o?new CD(i,u):new e(i,o,u)},e.l=function(i,o,u){return"in"===o?new Jv(i,u):new Xv(i,u)},e.prototype.matches=function(i){var o=i.data.field(this.field);return"!="===this.op?null!==o&&this.m(Io(o,this.value)):null!==o&&Co(this.value)===Co(o)&&this.m(Io(o,this.value))},e.prototype.m=function(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return 0===i;case"!=":return 0!==i;case">":return i>0;case">=":return i>=0;default:return Re()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Zv=function(t){function e(i,o,u){var l=this;return(l=t.call(this,i,o,u)||this).key=Pe.fromName(u.referenceValue),l}return(0,T.ZT)(e,t),e.prototype.matches=function(i){var o=Pe.comparator(i.key,this.key);return this.m(o)},e}(ar),Jv=function(t){function e(i,o){var u=this;return(u=t.call(this,i,"in",o)||this).keys=wD(0,o),u}return(0,T.ZT)(e,t),e.prototype.matches=function(i){return this.keys.some(function(o){return o.isEqual(i.key)})},e}(ar),Xv=function(t){function e(i,o){var u=this;return(u=t.call(this,i,"not-in",o)||this).keys=wD(0,o),u}return(0,T.ZT)(e,t),e.prototype.matches=function(i){return!this.keys.some(function(o){return o.isEqual(i.key)})},e}(ar);function wD(t,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(function(o){return Pe.fromName(o.referenceValue)})}var DD=function(t){function e(i,o){return t.call(this,i,"array-contains",o)||this}return(0,T.ZT)(e,t),e.prototype.matches=function(i){var o=i.data.field(this.field);return Fh(o)&&Oa(o.arrayValue,this.value)},e}(ar),ED=function(t){function e(i,o){return t.call(this,i,"in",o)||this}return(0,T.ZT)(e,t),e.prototype.matches=function(i){var o=i.data.field(this.field);return null!==o&&Oa(this.value.arrayValue,o)},e}(ar),e_=function(t){function e(i,o){return t.call(this,i,"not-in",o)||this}return(0,T.ZT)(e,t),e.prototype.matches=function(i){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=i.data.field(this.field);return null!==o&&!Oa(this.value.arrayValue,o)},e}(ar),CD=function(t){function e(i,o){return t.call(this,i,"array-contains-any",o)||this}return(0,T.ZT)(e,t),e.prototype.matches=function(i){var o=this,u=i.data.field(this.field);return!(!Fh(u)||!u.arrayValue.values)&&u.arrayValue.values.some(function(l){return Oa(o.value.arrayValue,l)})},e}(ar),Gt=function(t,e){this.position=t,this.before=e};function xc(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return Rh(e)}).join(",")}var Fa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ID(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Rp(t,e,i){for(var o=0,u=0;u<t.position.length;u++){var l=e[u],f=t.position[u];if(o=l.field.isKeyField()?Pe.comparator(Pe.fromName(f.referenceValue),i.key):Io(f,i.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return t.before?o<=0:o<0}function t_(t,e){if(null===t)return null===e;if(null===e||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var i=0;i<t.position.length;i++)if(!Ci(t.position[i],e.position[i]))return!1;return!0}var Ii=function(t,e,i,o,u,l,f,g){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===u&&(u=null),void 0===l&&(l="F"),void 0===f&&(f=null),void 0===g&&(g=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=l,this.startAt=f,this.endAt=g,this.p=null,this.T=null};function Fp(t,e,i,o,u,l,f,g){return new Ii(t,e,i,o,u,l,f,g)}function oi(t){return new Ii(t)}function Lh(t){return!Eo(t.limit)&&"F"===t.limitType}function kh(t){return!Eo(t.limit)&&"L"===t.limitType}function Vh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Pp(t){for(var e=0,i=t.filters;e<i.length;e++){var o=i[e];if(o.g())return o.field}return null}function Uh(t){return null!==t.collectionGroup}function Nc(t){var e=De(t);if(null===e.p){e.p=[];var i=Pp(e),o=Vh(e);if(null!==i&&null===o)i.isKeyField()||e.p.push(new Fa(i)),e.p.push(new Fa(Dr.keyField(),"asc"));else{for(var u=!1,l=0,f=e.explicitOrderBy;l<f.length;l++){var g=f[l];e.p.push(g),g.field.isKeyField()&&(u=!0)}if(!u){var _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Fa(Dr.keyField(),_))}}}return e.p}function Cr(t){var e=De(t);if(!e.T)if("F"===e.limitType)e.T=Op(e.path,e.collectionGroup,Nc(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var i=[],o=0,u=Nc(e);o<u.length;o++){var l=u[o];i.push(new Fa(l.field,"desc"===l.dir?"asc":"desc"))}var g=e.endAt?new Gt(e.endAt.position,!e.endAt.before):null,_=e.startAt?new Gt(e.startAt.position,!e.startAt.before):null;e.T=Op(e.path,e.collectionGroup,i,e.filters,e.limit,g,_)}return e.T}function jh(t,e,i){return new Ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function ur(t,e){return Ac(Cr(t),Cr(e))&&t.limitType===e.limitType}function n_(t){return Ra(Cr(t))+"|lt:"+t.limitType}function Lp(t){return"Query(target="+(i=(e=Cr(t)).path.canonicalString(),null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=", filters: ["+e.filters.map(function(o){return(u=o).field.canonicalString()+" "+u.op+" "+Rh(u.value);var u}).join(", ")+"]"),Eo(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=", orderBy: ["+e.orderBy.map(function(o){return(u=o).field.canonicalString()+" ("+u.dir+")";var u}).join(", ")+"]"),e.startAt&&(i+=", startAt: "+xc(e.startAt)),e.endAt&&(i+=", endAt: "+xc(e.endAt)),"Target("+i+"); limitType=")+t.limitType+")";var e,i}function cr(t,e){return e.isFoundDocument()&&(u=(o=e).key.path,null!==(i=t).collectionGroup?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Pe.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u))&&function(i,o){for(var u=0,l=i.explicitOrderBy;u<l.length;u++){var f=l[u];if(!f.field.isKeyField()&&null===o.data.field(f.field))return!1}return!0}(t,e)&&function(i,o){for(var u=0,l=i.filters;u<l.length;u++)if(!l[u].matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!Rp(i.startAt,Nc(i),o)||i.endAt&&Rp(i.endAt,Nc(i),o))}(t,e);var i,o,u}function Br(t){return function(e,i){for(var o=!1,u=0,l=Nc(t);u<l.length;u++){var f=l[u],g=si(f,e,i);if(0!==g)return g;o=o||f.field.isKeyField()}return 0}}function si(t,e,i){var u,f,g,_,o=t.field.isKeyField()?Pe.comparator(e.key,i.key):(f=i,g=e.data.field(u=t.field),_=f.data.field(u),null!==g&&null!==_?Io(g,_):Re());switch(t.dir){case"asc":return o;case"desc":return-1*o;default:return Re()}}function kp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sp(e)?"-0":e}}function Vp(t){return{integerValue:""+t}}function r_(t,e){return Yv(e)?Vp(e):kp(t,e)}var Bh=function(){this._=void 0};function TD(t,e,i){return t instanceof Ti?(l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(o=i).seconds,nanos:o.nanoseconds}}}},(u=e)&&(l.fields.__previous_value__=u),{mapValue:l}):t instanceof Is?Up(t,e):t instanceof Ts?jp(t,e):function(o,u){var l=Gh(o,u),f=Oc(l)+Oc(o.A);return Mp(l)&&Mp(o.A)?Vp(f):kp(o.R,f)}(t,e);var o,u,l}function SD(t,e,i){return t instanceof Is?Up(t,e):t instanceof Ts?jp(t,e):i}function Gh(t,e){return t instanceof Ss?Mp(i=e)||(o=i)&&"doubleValue"in o?e:{integerValue:0}:null;var o,i}var Ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e}(Bh),Is=function(t){function e(i){var o=this;return(o=t.call(this)||this).elements=i,o}return(0,T.ZT)(e,t),e}(Bh);function Up(t,e){for(var i=i_(e),o=function(f){i.some(function(g){return Ci(g,f)})||i.push(f)},u=0,l=t.elements;u<l.length;u++)o(l[u]);return{arrayValue:{values:i}}}var Ts=function(t){function e(i){var o=this;return(o=t.call(this)||this).elements=i,o}return(0,T.ZT)(e,t),e}(Bh);function jp(t,e){for(var i=i_(e),o=function(f){i=i.filter(function(g){return!Ci(g,f)})},u=0,l=t.elements;u<l.length;u++)o(l[u]);return{arrayValue:{values:i}}}var Ss=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).R=i,u.A=o,u}return(0,T.ZT)(e,t),e}(Bh);function Oc(t){return qt(t.integerValue||t.doubleValue)}function i_(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Pa=function(t,e){this.field=t,this.transform=e},o_=function(t,e){this.version=t,this.transformResults=e},gn=function(){function t(e,i){this.updateTime=e,this.exists=i}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function As(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Rc=function(){};function s_(t,e,i){var o,u,l,f,g;t instanceof La?(u=e,l=i,f=(o=t).value.clone(),g=c_(o.fieldTransforms,u,l.transformResults),f.setAll(g),u.convertToFoundDocument(l.version,f).setHasCommittedMutations()):t instanceof Qi?function(o,u,l){if(As(o.precondition,u)){var f=c_(o.fieldTransforms,u,l.transformResults),g=u.data;g.setAll(u_(o)),g.setAll(f),u.convertToFoundDocument(l.version,g).setHasCommittedMutations()}else u.convertToUnknownDocument(l.version)}(t,e,i):function(o,u,l){u.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,i)}function Hh(t,e,i){var u;t instanceof La?function(o,u,l){if(As(o.precondition,u)){var f=o.value.clone(),g=l_(o.fieldTransforms,l,u);f.setAll(g),u.convertToFoundDocument(Gp(u),f).setHasLocalMutations()}}(t,e,i):t instanceof Qi?function(o,u,l){if(As(o.precondition,u)){var f=l_(o.fieldTransforms,l,u),g=u.data;g.setAll(u_(o)),g.setAll(f),u.convertToFoundDocument(Gp(u),g).setHasLocalMutations()}}(t,e,i):As(t.precondition,u=e)&&u.convertToNoDocument(ot.min())}function a_(t,e){for(var i=null,o=0,u=t.fieldTransforms;o<u.length;o++){var l=u[o],f=e.data.field(l.field),g=Gh(l.transform,f||null);null!=g&&(null==i&&(i=Er.empty()),i.set(l.field,g))}return i||null}function Bp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(i=t.fieldTransforms)&&void 0===o||i&&o&&xa(i,o,function(u,l){return(f=u).field.isEqual((g=l).field)&&(w=g.transform,(_=f.transform)instanceof Is&&w instanceof Is||_ instanceof Ts&&w instanceof Ts?xa(_.elements,w.elements,Ci):_ instanceof Ss&&w instanceof Ss?Ci(_.A,w.A):_ instanceof Ti&&w instanceof Ti);var f,g,_,w})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var i,o}function Gp(t){return t.isFoundDocument()?t.version:ot.min()}var La=function(t){function e(i,o,u,l){void 0===l&&(l=[]);var f=this;return(f=t.call(this)||this).key=i,f.value=o,f.precondition=u,f.fieldTransforms=l,f.type=0,f}return(0,T.ZT)(e,t),e}(Rc),Qi=function(t){function e(i,o,u,l,f){void 0===f&&(f=[]);var g=this;return(g=t.call(this)||this).key=i,g.data=o,g.fieldMask=u,g.precondition=l,g.fieldTransforms=f,g.type=1,g}return(0,T.ZT)(e,t),e}(Rc);function u_(t){var e=new Map;return t.fieldMask.fields.forEach(function(i){if(!i.isEmpty()){var o=t.data.field(i);e.set(i,o)}}),e}function c_(t,e,i){var o=new Map;Ke(t.length===i.length);for(var u=0;u<i.length;u++){var l=t[u],f=l.transform,g=e.data.field(l.field);o.set(l.field,SD(f,g,i[u]))}return o}function l_(t,e,i){for(var o=new Map,u=0,l=t;u<l.length;u++){var f=l[u],g=f.transform,_=i.data.field(f.field);o.set(f.field,TD(g,_,e))}return o}var nn,mt,Fc=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).key=i,u.precondition=o,u.type=2,u.fieldTransforms=[],u}return(0,T.ZT)(e,t),e}(Rc),Hp=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).key=i,u.precondition=o,u.type=3,u.fieldTransforms=[],u}return(0,T.ZT)(e,t),e}(Rc),AD=function(t){this.count=t};function h_(t){switch(t){case Y.OK:return Re();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Re()}}function d_(t){if(void 0===t)return Lt("GRPC error has no .code"),Y.UNKNOWN;switch(t){case nn.OK:return Y.OK;case nn.CANCELLED:return Y.CANCELLED;case nn.UNKNOWN:return Y.UNKNOWN;case nn.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case nn.INTERNAL:return Y.INTERNAL;case nn.UNAVAILABLE:return Y.UNAVAILABLE;case nn.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case nn.NOT_FOUND:return Y.NOT_FOUND;case nn.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case nn.ABORTED:return Y.ABORTED;case nn.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case nn.DATA_LOSS:return Y.DATA_LOSS;default:return Re()}}(mt=nn||(nn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";var Ln=function(){function t(e,i){this.comparator=e,this.root=i||To.EMPTY}return t.prototype.insert=function(e,i){return new t(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,To.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,To.BLACK,null,null))},t.prototype.get=function(e){for(var i=this.root;!i.isEmpty();){var o=this.comparator(e,i.key);if(0===o)return i.value;o<0?i=i.left:o>0&&(i=i.right)}return null},t.prototype.indexOf=function(e){for(var i=0,o=this.root;!o.isEmpty();){var u=this.comparator(e,o.key);if(0===u)return i+o.left.size;u<0?o=o.left:(i+=o.left.size+1,o=o.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(i,o){return e(i,o),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(i,o){return e.push(i+":"+o),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new $h(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new $h(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new $h(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new $h(this.root,e,this.comparator,!0)},t}(),$h=function(){function t(e,i,o,u){this.isReverse=u,this.nodeStack=[];for(var l=1;!e.isEmpty();)if(l=i?o(e.key,i):1,u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),To=function(){function t(e,i,o,u,l){this.key=e,this.value=i,this.color=null!=o?o:t.RED,this.left=null!=u?u:t.EMPTY,this.right=null!=l?l:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,i,o,u,l){return new t(null!=e?e:this.key,null!=i?i:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=l?l:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,i,o){var u=this,l=o(e,u.key);return(u=l<0?u.copy(null,null,null,u.left.insert(e,i,o),null):0===l?u.copy(null,i,null,null,null):u.copy(null,null,null,null,u.right.insert(e,i,o))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,i){var o,u=this;if(i(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,i),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===i(e,u.key)){if(u.right.isEmpty())return t.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,i))}return u.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();var e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)},t}();To.EMPTY=null,To.RED=!0,To.BLACK=!1,To.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Re()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,i,o,u,l){return this},t.prototype.insert=function(e,i,o){return new To(e,i)},t.prototype.remove=function(e,i){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var sn=function(){function t(e){this.comparator=e,this.data=new Ln(this.comparator)}return t.prototype.has=function(e){return null!==this.data.get(e)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(i,o){return e(i),!1})},t.prototype.forEachInRange=function(e,i){for(var o=this.data.getIteratorFrom(e[0]);o.hasNext();){var u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;i(u.key)}},t.prototype.forEachWhile=function(e,i){var o;for(o=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null},t.prototype.getIterator=function(){return new f_(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new f_(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var i=this;return i.size<e.size&&(i=e,e=this),e.forEach(function(o){i=i.add(o)}),i},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.data.getIterator(),o=e.data.getIterator();i.hasNext();){var u=i.getNext().key,l=o.getNext().key;if(0!==this.comparator(u,l))return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(i){e.push(i)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(i){return e.push(i)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var i=new t(this.comparator);return i.data=e,i},t}(),f_=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),MD=new Ln(Pe.comparator);function Gr(){return MD}var xD=new Ln(Pe.comparator);function qh(){return xD}var p_=new Ln(Pe.comparator);function $p(){return p_}var g_=new sn(Pe.comparator);function Ct(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=g_,o=0,u=t;o<u.length;o++){var l=u[o];i=i.add(l)}return i}var m_=new sn(lt);function Pc(){return m_}var zh=function(){function t(e,i,o,u,l){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=l}return t.createSynthesizedRemoteEventForCurrentChange=function(e,i){var o=new Map;return o.set(e,Wh.createSynthesizedTargetChangeForCurrentChange(e,i)),new t(ot.min(),o,Pc(),Gr(),Ct())},t}(),Wh=function(){function t(e,i,o,u,l){this.resumeToken=e,this.current=i,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=l}return t.createSynthesizedTargetChangeForCurrentChange=function(e,i){return new t(sr.EMPTY_BYTE_STRING,i,Ct(),Ct(),Ct())},t}(),Lc=function(t,e,i,o){this.v=t,this.removedTargetIds=e,this.key=i,this.P=o},qp=function(t,e){this.targetId=t,this.V=e},So=function(t,e,i,o){void 0===i&&(i=sr.EMPTY_BYTE_STRING),void 0===o&&(o=null),this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=o},y_=function(){function t(){this.S=0,this.D=OD(),this.C=sr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},t.prototype.M=function(){var e=Ct(),i=Ct(),o=Ct();return this.D.forEach(function(u,l){switch(l){case 0:e=e.add(u);break;case 2:i=i.add(u);break;case 1:o=o.add(u);break;default:Re()}}),new Wh(this.C,this.N,e,i,o)},t.prototype.L=function(){this.k=!1,this.D=OD()},t.prototype.B=function(e,i){this.k=!0,this.D=this.D.insert(e,i)},t.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),ND=function(){function t(e){this.W=e,this.G=new Map,this.H=Gr(),this.J=Ms(),this.Y=new sn(lt)}return t.prototype.X=function(e){for(var i=0,o=e.v;i<o.length;i++){var u=o[i];e.P&&e.P.isFoundDocument()?this.Z(u,e.P):this.tt(u,e.key,e.P)}for(var l=0,f=e.removedTargetIds;l<f.length;l++)this.tt(u=f[l],e.key,e.P)},t.prototype.et=function(e){var i=this;this.forEachTarget(e,function(o){var u=i.nt(o);switch(e.state){case 0:i.st(o)&&u.O(e.resumeToken);break;case 1:u.K(),u.F||u.L(),u.O(e.resumeToken);break;case 2:u.K(),u.F||i.removeTarget(o);break;case 3:i.st(o)&&(u.j(),u.O(e.resumeToken));break;case 4:i.st(o)&&(i.it(o),u.O(e.resumeToken));break;default:Re()}})},t.prototype.forEachTarget=function(e,i){var o=this;e.targetIds.length>0?e.targetIds.forEach(i):this.G.forEach(function(u,l){o.st(l)&&i(l)})},t.prototype.rt=function(e){var i=e.targetId,o=e.V.count,u=this.ot(i);if(u){var l=u.target;if(Mc(l))if(0===o){var f=new Pe(l.path);this.tt(i,f,pn.newNoDocument(f,ot.min()))}else Ke(1===o);else this.ct(i)!==o&&(this.it(i),this.Y=this.Y.add(i))}},t.prototype.ut=function(e){var i=this,o=new Map;this.G.forEach(function(f,g){var _=i.ot(g);if(_){if(f.current&&Mc(_.target)){var w=new Pe(_.target.path);null!==i.H.get(w)||i.at(g,w)||i.tt(g,w,pn.newNoDocument(w,e))}f.$&&(o.set(g,f.M()),f.L())}});var u=Ct();this.J.forEach(function(f,g){var _=!0;g.forEachWhile(function(w){var E=i.ot(w);return!E||2===E.purpose||(_=!1,!1)}),_&&(u=u.add(f))});var l=new zh(e,o,this.Y,this.H,u);return this.H=Gr(),this.J=Ms(),this.Y=new sn(lt),l},t.prototype.Z=function(e,i){if(this.st(e)){var o=this.at(e,i.key)?2:0;this.nt(e).B(i.key,o),this.H=this.H.insert(i.key,i),this.J=this.J.insert(i.key,this.ht(i.key).add(e))}},t.prototype.tt=function(e,i,o){if(this.st(e)){var u=this.nt(e);this.at(e,i)?u.B(i,1):u.q(i),this.J=this.J.insert(i,this.ht(i).delete(e)),o&&(this.H=this.H.insert(i,o))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var i=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var i=this.G.get(e);return i||(i=new y_,this.G.set(e,i)),i},t.prototype.ht=function(e){var i=this.J.get(e);return i||(i=new sn(lt),this.J=this.J.insert(e,i)),i},t.prototype.st=function(e){var i=null!==this.ot(e);return i||be("WatchChangeAggregator","Detected inactive target",e),i},t.prototype.ot=function(e){var i=this.G.get(e);return i&&i.F?null:this.W.lt(e)},t.prototype.it=function(e){var i=this;this.G.set(e,new y_),this.W.getRemoteKeysForTarget(e).forEach(function(o){i.tt(e,o,null)})},t.prototype.at=function(e,i){return this.W.getRemoteKeysForTarget(e).has(i)},t}();function Ms(){return new Ln(Pe.comparator)}function OD(){return new Ln(Pe.comparator)}var zp={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v_=function(t,e){this.databaseId=t,this.I=e};function ka(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function RD(t,e){return t.I?e.toBase64():e.toUint8Array()}function Be(t,e){return ka(t,e.toTimestamp())}function mn(t){return Ke(!!t),ot.fromTimestamp((i=Yi(t),new or(i.seconds,i.nanos)));var i}function Wp(t,e){return(i=t,new gt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function __(t){var e=gt.fromString(t);return Ke(Xp(e)),e}function Ao(t,e){return Wp(t.databaseId,e.path)}function Si(t,e){var i=__(e);if(i.get(1)!==t.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new Pe(FD(i))}function Va(t,e){return Wp(t.databaseId,e)}function kc(t){var e=__(t);return 4===e.length?gt.emptyPath():FD(e)}function Mt(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FD(t){return Ke(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Kp(t,e,i){return{name:Ao(t,e),fields:i.value.mapValue.fields}}function b_(t,e,i){var o=Si(t,e.name),u=mn(e.updateTime),l=new Er({mapValue:{fields:e.fields}}),f=pn.newFoundDocument(o,u,l);return i&&f.setHasCommittedMutations(),i?f.setHasCommittedMutations():f}function Kh(t,e){var i,u;if(e instanceof La)i={update:Kp(t,e.key,e.value)};else if(e instanceof Fc)i={delete:Ao(t,e.key)};else if(e instanceof Qi)i={update:Kp(t,e.key,e.data),updateMask:I_(e.fieldMask)};else{if(!(e instanceof Hp))return Re();i={verify:Ao(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(function(o){return function(u,l){var f=l.transform;if(f instanceof Ti)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Is)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ts)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ss)return{fieldPath:l.field.canonicalString(),increment:f.A};throw Re()}(0,o)})),e.precondition.isNone||(i.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Be(t,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Re()),i}function Yp(t,e){var w,i=e.currentDocument?void 0!==(w=e.currentDocument).updateTime?gn.updateTime(mn(w.updateTime)):void 0!==w.exists?gn.exists(w.exists):gn.none():gn.none(),o=e.updateTransforms?e.updateTransforms.map(function(w){return function(E,I){var S=null;"setToServerValue"in I?(Ke("REQUEST_TIME"===I.setToServerValue),S=new Ti):"appendMissingElements"in I?S=new Is(I.appendMissingElements.values||[]):"removeAllFromArray"in I?S=new Ts(I.removeAllFromArray.values||[]):"increment"in I?S=new Ss(E,I.increment):Re();var W=Dr.fromServerFormat(I.fieldPath);return new Pa(W,S)}(t,w)}):[];if(e.update){var u=Si(t,e.update.name),l=new Er({mapValue:{fields:e.update.fields}});if(e.updateMask){var f=function(w){return new Na((w.fieldPaths||[]).map(function(I){return Dr.fromServerFormat(I)}))}(e.updateMask);return new Qi(u,l,f,i,o)}return new La(u,l,i,o)}if(e.delete){var g=Si(t,e.delete);return new Fc(g,i)}if(e.verify){var _=Si(t,e.verify);return new Hp(_,i)}return Re()}function Qp(t,e){return{documents:[Va(t,e.path)]}}function Zp(t,e){var i={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(i.parent=Va(t,o),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Va(t,o.popLast()),i.structuredQuery.from=[{collectionId:o.lastSegment()}]);var u=function(g){if(0!==g.length){var _=g.map(function(w){return function(E){if("=="===E.op){if(Ph(E.value))return{unaryFilter:{field:Ua(E.field),op:"IS_NAN"}};if(xp(E.value))return{unaryFilter:{field:Ua(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(Ph(E.value))return{unaryFilter:{field:Ua(E.field),op:"IS_NOT_NAN"}};if(xp(E.value))return{unaryFilter:{field:Ua(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(E.field),op:PD(E.op),value:E.value}}}(w)});return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}}(e.filters);u&&(i.structuredQuery.where=u);var l=function(g){if(0!==g.length)return g.map(function(_){return{field:Ua((w=_).field),direction:Vc(w.dir)};var w})}(e.orderBy);l&&(i.structuredQuery.orderBy=l);var _,f=(_=e.limit,t.I||Eo(_)?_:{value:_});return null!==f&&(i.structuredQuery.limit=f),e.startAt&&(i.structuredQuery.startAt=D_(e.startAt)),e.endAt&&(i.structuredQuery.endAt=D_(e.endAt)),i}function Jp(t){var e=kc(t.parent),i=t.structuredQuery,o=i.from?i.from.length:0,u=null;if(o>0){Ke(1===o);var l=i.from[0];l.allDescendants?u=l.collectionId:e=e.child(l.collectionId)}var f=[];i.where&&(f=w_(i.where));var g=[];i.orderBy&&(g=i.orderBy.map(function(I){return new Fa(ja((S=I).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));var I,S,_=null;i.limit&&(_=Eo(S="object"==typeof(I=i.limit)?I.value:I)?null:S);var w=null;i.startAt&&(w=E_(i.startAt));var E=null;return i.endAt&&(E=E_(i.endAt)),Fp(e,u,g,f,_,"F",w,E)}function w_(t){return t?void 0!==t.unaryFilter?[C_(t)]:void 0!==t.fieldFilter?[Yh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(e){return w_(e)}).reduce(function(e,i){return e.concat(i)}):Re():[]}function D_(t){return{before:t.before,values:t.position}}function E_(t){return new Gt(t.values||[],!!t.before)}function Vc(t){return zp[t]}function PD(t){return wI[t]}function Ua(t){return{fieldPath:t.canonicalString()}}function ja(t){return Dr.fromServerFormat(t.fieldPath)}function Yh(t){return ar.create(ja(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}function C_(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ja(t.unaryFilter.field);return ar.create(e,"==",{doubleValue:NaN});case"IS_NULL":var i=ja(t.unaryFilter.field);return ar.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var o=ja(t.unaryFilter.field);return ar.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var u=ja(t.unaryFilter.field);return ar.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}function I_(t){var e=[];return t.fields.forEach(function(i){return e.push(i.canonicalString())}),{fieldPaths:e}}function Xp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ai(t){for(var e="",i=0;i<t.length;i++)e.length>0&&(e=Ba(e)),e=Uc(t.get(i),e);return Ba(e)}function Uc(t,e){for(var i=e,o=t.length,u=0;u<o;u++){var l=t.charAt(u);switch(l){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=l}}return i}function Ba(t){return t+"\x01\x01"}function Zi(t){var e=t.length;if(Ke(e>=2),2===e)return Ke("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),gt.emptyPath();for(var i=e-2,o=[],u="",l=0;l<e;){var f=t.indexOf("\x01",l);switch((f<0||f>i)&&Re(),t.charAt(f+1)){case"\x01":var g=t.substring(l,f),_=void 0;0===u.length?_=g:(_=u+=g,u=""),o.push(_);break;case"\x10":u+=t.substring(l,f),u+="\0";break;case"\x11":u+=t.substring(l,f+1);break;default:Re()}l=f+2}return new gt(o)}var LD=function(t,e){this.seconds=t,this.nanoseconds=e},Ir=function(t,e,i){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=i};Ir.store="owner",Ir.key="owner";var Ji=function(t,e,i){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=i};Ji.store="mutationQueues",Ji.keyPath="userId";var xt=function(t,e,i,o,u){this.userId=t,this.batchId=e,this.localWriteTimeMs=i,this.baseMutations=o,this.mutations=u};xt.store="mutations",xt.keyPath="batchId",xt.userMutationsIndex="userMutationsIndex",xt.userMutationsKeyPath=["userId","batchId"];var Dn=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,i){return[e,ai(i)]},t.key=function(e,i,o){return[e,ai(i),o]},t}();Dn.store="documentMutations",Dn.PLACEHOLDER=new Dn;var kD=function(t,e){this.path=t,this.readTime=e},T_=function(t,e){this.path=t,this.version=e},zt=function(t,e,i,o,u,l){this.unknownDocument=t,this.noDocument=e,this.document=i,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=l};zt.store="remoteDocuments",zt.readTimeIndex="readTimeIndex",zt.readTimeIndexPath="readTime",zt.collectionReadTimeIndex="collectionReadTimeIndex",zt.collectionReadTimeIndexPath=["parentPath","readTime"];var Ai=function(t){this.byteSize=t};Ai.store="remoteDocumentGlobal",Ai.key="remoteDocumentGlobalKey";var Tr=function(t,e,i,o,u,l,f){this.targetId=t,this.canonicalId=e,this.readTime=i,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=l,this.query=f};Tr.store="targets",Tr.keyPath="targetId",Tr.queryTargetsIndexName="queryTargetsIndex",Tr.queryTargetsKeyPath=["canonicalId","targetId"];var kn=function(t,e,i){this.targetId=t,this.path=e,this.sequenceNumber=i};kn.store="targetDocuments",kn.keyPath=["targetId","path"],kn.documentTargetsIndex="documentTargetsIndex",kn.documentTargetsKeyPath=["path","targetId"];var Hr=function(t,e,i,o){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=i,this.targetCount=o};Hr.key="targetGlobalKey",Hr.store="targetGlobal";var Ga=function(t,e){this.collectionId=t,this.parent=e};Ga.store="collectionParents",Ga.keyPath=["collectionId","parent"];var Mi=function(t,e,i,o){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=i,this.inForeground=o};Mi.store="clientMetadata",Mi.keyPath="clientId";var Xi=function(t,e,i){this.bundleId=t,this.createTime=e,this.version=i};Xi.store="bundles",Xi.keyPath="bundleId";var Ha=function(t,e,i){this.name=t,this.readTime=e,this.bundledQuery=i};Ha.store="namedQueries",Ha.keyPath="name";var VD=(0,T.ev)((0,T.ev)([],(0,T.ev)((0,T.ev)([],(0,T.ev)((0,T.ev)([],(0,T.ev)((0,T.ev)([],[Ji.store,xt.store,Dn.store,zt.store,Tr.store,Ir.store,Hr.store,kn.store]),[Mi.store])),[Ai.store])),[Ga.store])),[Xi.store,Ha.store]),eg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$a=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),Vn=function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i})},ye=function(){function t(e){var i=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(o){i.isDone=!0,i.result=o,i.nextCallback&&i.nextCallback(o)},function(o){i.isDone=!0,i.error=o,i.catchCallback&&i.catchCallback(o)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,i){var o=this;return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new t(function(u,l){o.nextCallback=function(f){o.wrapSuccess(e,f).next(u,l)},o.catchCallback=function(f){o.wrapFailure(i,f).next(u,l)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(i,o){e.next(i,o)})},t.prototype.wrapUserFunction=function(e){try{var i=e();return i instanceof t?i:t.resolve(i)}catch(o){return t.reject(o)}},t.prototype.wrapSuccess=function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.resolve(i)},t.prototype.wrapFailure=function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.reject(i)},t.resolve=function(e){return new t(function(i,o){i(e)})},t.reject=function(e){return new t(function(i,o){o(e)})},t.waitFor=function(e){return new t(function(i,o){var u=0,l=0,f=!1;e.forEach(function(g){++u,g.next(function(){++l,f&&l===u&&i()},function(_){return o(_)})}),f=!0,l===u&&i()})},t.or=function(e){for(var i=t.resolve(!1),o=function(f){i=i.next(function(g){return g?t.resolve(g):f()})},u=0,l=e;u<l.length;u++)o(l[u]);return i},t.forEach=function(e,i){var o=this,u=[];return e.forEach(function(l,f){u.push(i.call(o,l,f))}),this.waitFor(u)},t}(),S_=function(){function t(e,i){var o=this;this.action=e,this.transaction=i,this.aborted=!1,this.ft=new Vn,this.transaction.oncomplete=function(){o.ft.resolve()},this.transaction.onabort=function(){i.error?o.ft.reject(new za(e,i.error)):o.ft.resolve()},this.transaction.onerror=function(u){var l=Qh(u.target.error);o.ft.reject(new za(e,l))}}return t.open=function(e,i,o,u){try{return new t(i,e.transaction(u,o))}catch(l){throw new za(i,l)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var i=this.transaction.objectStore(e);return new jD(i)},t}(),qa=function(){function t(e,i,o){this.name=e,this.version=i,this.wt=o,12.2===t._t((0,_t.z$)())&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return be("SimpleDb","Removing database:",e),$r(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,_t.z$)(),i=t._t(e),o=0<i&&i<10,u=t.Et(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||l)},t.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},t.It=function(e,i){return e.store(i)},t._t=function(e){var i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(o)},t.Et=function(e){var i=e.match(/Android ([\d.]+)/i),o=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(o)},t.prototype.At=function(e){return(0,T.mG)(this,void 0,void 0,function(){var i,o=this;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return this.db?[3,2]:(be("SimpleDb","Opening database:",this.name),i=this,[4,new Promise(function(l,f){var g=indexedDB.open(o.name,o.version);g.onsuccess=function(_){l(_.target.result)},g.onblocked=function(){f(new za(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=function(_){var w=_.target.error;f("VersionError"===w.name?new ge(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new za(e,w))},g.onupgradeneeded=function(_){be("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',_.oldVersion),o.wt.Rt(_.target.result,g.transaction,_.oldVersion,o.version).next(function(){be("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:i.db=u.sent(),u.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(l){return o.bt(l)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(i){return e(i)})},t.prototype.runTransaction=function(e,i,o,u){return(0,T.mG)(this,void 0,void 0,function(){var l,f,g,_,w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:l="readonly"===i,f=0,g=function(){var I,S,O,V,W;return(0,T.Jh)(this,function(se){switch(se.label){case 0:++f,se.label=1;case 1:return se.trys.push([1,4,,5]),[4,_.At(e)];case 2:return _.db=se.sent(),I=S_.open(_.db,e,l?"readonly":"readwrite",o),S=u(I).catch(function(pe){return I.abort(pe),ye.reject(pe)}).toPromise(),O={},S.catch(function(){}),[4,I.dt];case 3:return[2,(O.value=(se.sent(),S),O)];case 4:return be("SimpleDb","Transaction failed with error:",(V=se.sent()).message,"Retrying:",W="FirebaseError"!==V.name&&f<3),_.close(),W?[3,5]:[2,{value:Promise.reject(V)}];case 5:return[2]}})},_=this,E.label=1;case 1:return[5,g()];case 2:if("object"==typeof(w=E.sent()))return[2,w.value];E.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),UD=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return $r(this.Pt.delete())},t}(),za=function(t){function e(i,o){var u=this;return(u=t.call(this,Y.UNAVAILABLE,"IndexedDB transaction '"+i+"' failed: "+o)||this).name="IndexedDbTransactionError",u}return(0,T.ZT)(e,t),e}(ge);function xs(t){return"IndexedDbTransactionError"===t.name}var jD=function(){function t(e){this.store=e}return t.prototype.put=function(e,i){var o;return void 0!==i?(be("SimpleDb","PUT",this.store.name,e,i),o=this.store.put(i,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),$r(o)},t.prototype.add=function(e){return be("SimpleDb","ADD",this.store.name,e,e),$r(this.store.add(e))},t.prototype.get=function(e){var i=this;return $r(this.store.get(e)).next(function(o){return void 0===o&&(o=null),be("SimpleDb","GET",i.store.name,e,o),o})},t.prototype.delete=function(e){return be("SimpleDb","DELETE",this.store.name,e),$r(this.store.delete(e))},t.prototype.count=function(){return be("SimpleDb","COUNT",this.store.name),$r(this.store.count())},t.prototype.Nt=function(e,i){var o=this.cursor(this.options(e,i)),u=[];return this.xt(o,function(l,f){u.push(f)}).next(function(){return u})},t.prototype.kt=function(e,i){be("SimpleDb","DELETE ALL",this.store.name);var o=this.options(e,i);o.Ft=!1;var u=this.cursor(o);return this.xt(u,function(l,f,g){return g.delete()})},t.prototype.$t=function(e,i){var o;i?o=e:(o={},i=e);var u=this.cursor(o);return this.xt(u,i)},t.prototype.Ot=function(e){var i=this.cursor({});return new ye(function(o,u){i.onerror=function(l){var f=Qh(l.target.error);u(f)},i.onsuccess=function(l){var f=l.target.result;f?e(f.primaryKey,f.value).next(function(g){g?f.continue():o()}):o()}})},t.prototype.xt=function(e,i){var o=[];return new ye(function(u,l){e.onerror=function(f){l(f.target.error)},e.onsuccess=function(f){var g=f.target.result;if(g){var _=new UD(g),w=i(g.primaryKey,g.value,_);if(w instanceof ye){var E=w.catch(function(I){return _.done(),ye.reject(I)});o.push(E)}_.isDone?u():null===_.Dt?g.continue():g.continue(_.Dt)}else u()}}).next(function(){return ye.waitFor(o)})},t.prototype.options=function(e,i){var o;return void 0!==e&&("string"==typeof e?o=e:i=e),{index:o,range:i}},t.prototype.cursor=function(e){var i="next";if(e.reverse&&(i="prev"),e.index){var o=this.store.index(e.index);return e.Ft?o.openKeyCursor(e.range,i):o.openCursor(e.range,i)}return this.store.openCursor(e.range,i)},t}();function $r(t){return new ye(function(e,i){t.onsuccess=function(o){e(o.target.result)},t.onerror=function(o){var u=Qh(o.target.error);i(u)}})}var A_=!1;function Qh(t){var e=qa._t((0,_t.z$)());if(e>=12.2&&e<13){var i="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(i)>=0){var o=new ge("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+i+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return A_||(A_=!0,setTimeout(function(){throw o},0)),o}}return t}var M_=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).Mt=i,u.currentSequenceNumber=o,u}return(0,T.ZT)(e,t),e}($a);function zn(t,e){var i=De(t);return qa.It(i.Mt,e)}var tg=function(){function t(e,i,o,u){this.batchId=e,this.localWriteTime=i,this.baseMutations=o,this.mutations=u}return t.prototype.applyToRemoteDocument=function(e,i){for(var o=i.mutationResults,u=0;u<this.mutations.length;u++){var l=this.mutations[u];l.key.isEqual(e.key)&&s_(l,e,o[u])}},t.prototype.applyToLocalView=function(e){for(var i=0,o=this.baseMutations;i<o.length;i++)(f=o[i]).key.isEqual(e.key)&&Hh(f,e,this.localWriteTime);for(var u=0,l=this.mutations;u<l.length;u++){var f;(f=l[u]).key.isEqual(e.key)&&Hh(f,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var i=this;this.mutations.forEach(function(o){var u=e.get(o.key),l=u;i.applyToLocalView(l),u.isValidDocument()||l.convertToNoDocument(ot.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,i){return e.add(i.key)},Ct())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,function(i,o){return Bp(i,o)})&&xa(this.baseMutations,e.baseMutations,function(i,o){return Bp(i,o)})},t}(),x_=function(){function t(e,i,o,u){this.batch=e,this.commitVersion=i,this.mutationResults=o,this.docVersions=u}return t.from=function(e,i,o){Ke(e.mutations.length===o.length);for(var u=$p(),l=e.mutations,f=0;f<l.length;f++)u=u.insert(l[f].key,o[f].version);return new t(e,i,o,u)},t}(),Zh=function(){function t(e,i,o,u,l,f,g){void 0===l&&(l=ot.min()),void 0===f&&(f=ot.min()),void 0===g&&(g=sr.EMPTY_BYTE_STRING),this.target=e,this.targetId=i,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,i){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Jh=function(t){this.Lt=t};function ng(t,e){if(e.document)return b_(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var i=Pe.fromSegments(e.noDocument.path),o=Ka(e.noDocument.readTime),u=pn.newNoDocument(i,o);return e.hasCommittedMutations?u.setHasCommittedMutations():u}if(e.unknownDocument){var l=Pe.fromSegments(e.unknownDocument.path);return o=Ka(e.unknownDocument.version),pn.newUnknownDocument(l,o)}return Re()}function rg(t,e,i){var I,S,o=Xh(i),u=e.key.path.popLast().toArray();if(e.isFoundDocument()){var l={name:Ao(I=t.Lt,(S=e).key),fields:S.data.value.mapValue.fields,updateTime:ka(I,S.version.toTimestamp())},f=e.hasCommittedMutations;return new zt(null,null,l,f,o,u)}if(e.isNoDocument()){var g=e.key.path.toArray(),_=Wa(e.version);return f=e.hasCommittedMutations,new zt(null,new kD(g,_),null,f,o,u)}if(e.isUnknownDocument()){var w=e.key.path.toArray(),E=Wa(e.version);return new zt(new T_(w,E),null,null,!0,o,u)}return Re()}function Xh(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function N_(t){var e=new or(t[0],t[1]);return ot.fromTimestamp(e)}function Wa(t){var e=t.toTimestamp();return new LD(e.seconds,e.nanoseconds)}function Ka(t){var e=new or(t.seconds,t.nanoseconds);return ot.fromTimestamp(e)}function Mo(t,e){for(var i=(e.baseMutations||[]).map(function(_){return Yp(t.Lt,_)}),o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);var f=e.mutations.map(function(_){return Yp(t.Lt,_)}),g=or.fromMillis(e.localWriteTimeMs);return new tg(e.batchId,g,i,f)}function jc(t){var e,i,o=Ka(t.readTime),u=void 0!==t.lastLimboFreeSnapshotVersion?Ka(t.lastLimboFreeSnapshotVersion):ot.min();return void 0!==t.query.documents?(Ke(1===(i=t.query).documents.length),e=Cr(oi(kc(i.documents[0])))):e=Cr(Jp(t.query)),new Zh(e,t.targetId,0,t.lastListenSequenceNumber,o,u,sr.fromBase64String(t.resumeToken))}function ig(t,e){var i,o=Wa(e.snapshotVersion),u=Wa(e.lastLimboFreeSnapshotVersion);i=Mc(e.target)?Qp(t.Lt,e.target):Zp(t.Lt,e.target);var l=e.resumeToken.toBase64();return new Tr(e.targetId,Ra(e.target),o,l,e.sequenceNumber,u,i)}function og(t){var e=Jp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jh(e,e.limit,"L"):e}var BD=function(){function t(){}return t.prototype.getBundleMetadata=function(e,i){return O_(e).get(i).next(function(o){if(o)return{id:(u=o).bundleId,createTime:Ka(u.createTime),version:u.version};var u})},t.prototype.saveBundleMetadata=function(e,i){return O_(e).put({bundleId:(o=i).id,createTime:Wa(mn(o.createTime)),version:o.version});var o},t.prototype.getNamedQuery=function(e,i){return R_(e).get(i).next(function(o){if(o)return{name:(u=o).name,query:og(u.bundledQuery),readTime:Ka(u.readTime)};var u})},t.prototype.saveNamedQuery=function(e,i){return R_(e).put({name:(o=i).name,readTime:Wa(mn(o.readTime)),bundledQuery:o.bundledQuery});var o},t}();function O_(t){return zn(t,Xi.store)}function R_(t){return zn(t,Ha.store)}var GD=function(){function t(){this.Bt=new sg}return t.prototype.addToCollectionParentIndex=function(e,i){return this.Bt.add(i),ye.resolve()},t.prototype.getCollectionParents=function(e,i){return ye.resolve(this.Bt.getEntries(i))},t}(),sg=function(){function t(){this.index={}}return t.prototype.add=function(e){var i=e.lastSegment(),o=e.popLast(),u=this.index[i]||new sn(gt.comparator),l=!u.has(o);return this.index[i]=u.add(o),l},t.prototype.has=function(e){var i=e.lastSegment(),o=e.popLast(),u=this.index[i];return u&&u.has(o)},t.prototype.getEntries=function(e){return(this.index[e]||new sn(gt.comparator)).toArray()},t}(),HD=function(){function t(){this.qt=new sg}return t.prototype.addToCollectionParentIndex=function(e,i){var o=this;if(!this.qt.has(i)){var u=i.lastSegment(),l=i.popLast();e.addOnCommittedListener(function(){o.qt.add(i)});var f={collectionId:u,parent:ai(l)};return F_(e).put(f)}return ye.resolve()},t.prototype.getCollectionParents=function(e,i){var o=[],u=IDBKeyRange.bound([i,""],[Kv(i),""],!1,!0);return F_(e).Nt(u).next(function(l){for(var f=0,g=l;f<g.length;f++){var _=g[f];if(_.collectionId!==i)break;o.push(Zi(_.parent))}return o})},t}();function F_(t){return zn(t,Ga.store)}var ag={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ui=function(){function t(e,i,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=o}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function P_(t,e,i){var o=t.store(xt.store),u=t.store(Dn.store),l=[],f=IDBKeyRange.only(i.batchId),g=0,_=o.$t({range:f},function(V,W,se){return g++,se.delete()});l.push(_.next(function(){Ke(1===g)}));for(var w=[],E=0,I=i.mutations;E<I.length;E++){var S=I[E],O=Dn.key(e,S.key.path,i.batchId);l.push(u.delete(O)),w.push(S.key)}return ye.waitFor(l).next(function(){return w})}function ed(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Re();e=t.noDocument}return JSON.stringify(e).length}ui.DEFAULT_COLLECTION_PERCENTILE=10,ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ui.DEFAULT=new ui(41943040,ui.DEFAULT_COLLECTION_PERCENTILE,ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ui.DISABLED=new ui(-1,0,0);var L_=function(){function t(e,i,o,u){this.userId=e,this.R=i,this.Ut=o,this.referenceDelegate=u,this.Kt={}}return t.Qt=function(e,i,o,u){return Ke(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",i,o,u)},t.prototype.checkEmpty=function(e){var i=!0,o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).$t({index:xt.userMutationsIndex,range:o},function(u,l,f){i=!1,f.done()}).next(function(){return i})},t.prototype.addMutationBatch=function(e,i,o,u){var l=this,f=Ya(e),g=xo(e);return g.add({}).next(function(_){Ke("number"==typeof _);for(var w=new tg(_,i,o,u),E=function(pe,Te,Ee){var Ge=Ee.baseMutations.map(function(Et){return Kh(pe.Lt,Et)}),Oe=Ee.mutations.map(function(Et){return Kh(pe.Lt,Et)});return new xt(Te,Ee.batchId,Ee.localWriteTime.toMillis(),Ge,Oe)}(l.R,l.userId,w),I=[],S=new sn(function(pe,Te){return lt(pe.canonicalString(),Te.canonicalString())}),O=0,V=u;O<V.length;O++){var W=V[O],se=Dn.key(l.userId,W.key.path,_);S=S.add(W.key.path.popLast()),I.push(g.put(E)),I.push(f.put(se,Dn.PLACEHOLDER))}return S.forEach(function(pe){I.push(l.Ut.addToCollectionParentIndex(e,pe))}),e.addOnCommittedListener(function(){l.Kt[_]=w.keys()}),ye.waitFor(I).next(function(){return w})})},t.prototype.lookupMutationBatch=function(e,i){var o=this;return xo(e).get(i).next(function(u){return u?(Ke(u.userId===o.userId),Mo(o.R,u)):null})},t.prototype.jt=function(e,i){var o=this;return this.Kt[i]?ye.resolve(this.Kt[i]):this.lookupMutationBatch(e,i).next(function(u){if(u){var l=u.keys();return o.Kt[i]=l,l}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,i){var o=this,u=i+1,l=IDBKeyRange.lowerBound([this.userId,u]),f=null;return xo(e).$t({index:xt.userMutationsIndex,range:l},function(g,_,w){_.userId===o.userId&&(Ke(_.batchId>=u),f=Mo(o.R,_)),w.done()}).next(function(){return f})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),o=-1;return xo(e).$t({index:xt.userMutationsIndex,range:i,reverse:!0},function(u,l,f){o=l.batchId,f.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(e){var i=this,o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).Nt(xt.userMutationsIndex,o).next(function(u){return u.map(function(l){return Mo(i.R,l)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,i){var o=this,u=Dn.prefixForPath(this.userId,i.path),l=IDBKeyRange.lowerBound(u),f=[];return Ya(e).$t({range:l},function(g,_,w){var E=g[0],S=g[2],O=Zi(g[1]);if(E===o.userId&&i.path.isEqual(O))return xo(e).get(S).next(function(V){if(!V)throw Re();Ke(V.userId===o.userId),f.push(Mo(o.R,V))});w.done()}).next(function(){return f})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,i){var o=this,u=new sn(lt),l=[];return i.forEach(function(f){var g=Dn.prefixForPath(o.userId,f.path),_=IDBKeyRange.lowerBound(g),w=Ya(e).$t({range:_},function(E,I,S){var O=E[0],W=E[2],se=Zi(E[1]);O===o.userId&&f.path.isEqual(se)?u=u.add(W):S.done()});l.push(w)}),ye.waitFor(l).next(function(){return o.Wt(e,u)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,i){var o=this,u=i.path,l=u.length+1,f=Dn.prefixForPath(this.userId,u),g=IDBKeyRange.lowerBound(f),_=new sn(lt);return Ya(e).$t({range:g},function(w,E,I){var S=w[0],V=w[2],W=Zi(w[1]);S===o.userId&&u.isPrefixOf(W)?W.length===l&&(_=_.add(V)):I.done()}).next(function(){return o.Wt(e,_)})},t.prototype.Wt=function(e,i){var o=this,u=[],l=[];return i.forEach(function(f){l.push(xo(e).get(f).next(function(g){if(null===g)throw Re();Ke(g.userId===o.userId),u.push(Mo(o.R,g))}))}),ye.waitFor(l).next(function(){return u})},t.prototype.removeMutationBatch=function(e,i){var o=this;return P_(e.Mt,this.userId,i).next(function(u){return e.addOnCommittedListener(function(){o.Gt(i.batchId)}),ye.forEach(u,function(l){return o.referenceDelegate.markPotentiallyOrphaned(e,l)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(o){if(!o)return ye.resolve();var u=IDBKeyRange.lowerBound(Dn.prefixForUser(i.userId)),l=[];return Ya(e).$t({range:u},function(f,g,_){if(f[0]===i.userId){var w=Zi(f[1]);l.push(w)}else _.done()}).next(function(){Ke(0===l.length)})})},t.prototype.containsKey=function(e,i){return k_(e,this.userId,i)},t.prototype.zt=function(e){var i=this;return td(e).get(this.userId).next(function(o){return o||new Ji(i.userId,-1,"")})},t}();function k_(t,e,i){var o=Dn.prefixForPath(e,i.path),u=o[1],l=IDBKeyRange.lowerBound(o),f=!1;return Ya(t).$t({range:l,Ft:!0},function(g,_,w){g[0]===e&&g[1]===u&&(f=!0),w.done()}).next(function(){return f})}function xo(t){return zn(t,xt.store)}function Ya(t){return zn(t,Dn.store)}function td(t){return zn(t,Ji.store)}var Qa=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),V_=function(){function t(e,i){this.referenceDelegate=e,this.R=i}return t.prototype.allocateTargetId=function(e){var i=this;return this.Xt(e).next(function(o){var u=new Qa(o.highestTargetId);return o.highestTargetId=u.next(),i.Zt(e,o).next(function(){return o.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(i){return ot.fromTimestamp(new or(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(i){return i.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,i,o){var u=this;return this.Xt(e).next(function(l){return l.highestListenSequenceNumber=i,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),i>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=i),u.Zt(e,l)})},t.prototype.addTargetData=function(e,i){var o=this;return this.te(e,i).next(function(){return o.Xt(e).next(function(u){return u.targetCount+=1,o.ee(i,u),o.Zt(e,u)})})},t.prototype.updateTargetData=function(e,i){return this.te(e,i)},t.prototype.removeTargetData=function(e,i){var o=this;return this.removeMatchingKeysForTargetId(e,i.targetId).next(function(){return No(e).delete(i.targetId)}).next(function(){return o.Xt(e)}).next(function(u){return Ke(u.targetCount>0),u.targetCount-=1,o.Zt(e,u)})},t.prototype.removeTargets=function(e,i,o){var u=this,l=0,f=[];return No(e).$t(function(g,_){var w=jc(_);w.sequenceNumber<=i&&null===o.get(w.targetId)&&(l++,f.push(u.removeTargetData(e,w)))}).next(function(){return ye.waitFor(f)}).next(function(){return l})},t.prototype.forEachTarget=function(e,i){return No(e).$t(function(o,u){var l=jc(u);i(l)})},t.prototype.Xt=function(e){return U_(e).get(Hr.key).next(function(i){return Ke(null!==i),i})},t.prototype.Zt=function(e,i){return U_(e).put(Hr.key,i)},t.prototype.te=function(e,i){return No(e).put(ig(this.R,i))},t.prototype.ee=function(e,i){var o=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,o=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,o=!0),o},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(i){return i.targetCount})},t.prototype.getTargetData=function(e,i){var o=Ra(i),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]),l=null;return No(e).$t({range:u,index:Tr.queryTargetsIndexName},function(f,g,_){var w=jc(g);Ac(i,w.target)&&(l=w,_.done())}).next(function(){return l})},t.prototype.addMatchingKeys=function(e,i,o){var u=this,l=[],f=Oo(e);return i.forEach(function(g){var _=ai(g.path);l.push(f.put(new kn(o,_))),l.push(u.referenceDelegate.addReference(e,o,g))}),ye.waitFor(l)},t.prototype.removeMatchingKeys=function(e,i,o){var u=this,l=Oo(e);return ye.forEach(i,function(f){var g=ai(f.path);return ye.waitFor([l.delete([o,g]),u.referenceDelegate.removeReference(e,o,f)])})},t.prototype.removeMatchingKeysForTargetId=function(e,i){var o=Oo(e),u=IDBKeyRange.bound([i],[i+1],!1,!0);return o.delete(u)},t.prototype.getMatchingKeysForTargetId=function(e,i){var o=IDBKeyRange.bound([i],[i+1],!1,!0),u=Oo(e),l=Ct();return u.$t({range:o,Ft:!0},function(f,g,_){var w=Zi(f[1]),E=new Pe(w);l=l.add(E)}).next(function(){return l})},t.prototype.containsKey=function(e,i){var o=ai(i.path),u=IDBKeyRange.bound([o],[Kv(o)],!1,!0),l=0;return Oo(e).$t({index:kn.documentTargetsIndex,Ft:!0,range:u},function(f,g,_){0!==f[0]&&(l++,_.done())}).next(function(){return l>0})},t.prototype.lt=function(e,i){return No(e).get(i).next(function(o){return o?jc(o):null})},t}();function No(t){return zn(t,Tr.store)}function U_(t){return zn(t,Hr.store)}function Oo(t){return zn(t,kn.store)}function eo(t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){if(t.code!==Y.FAILED_PRECONDITION||t.message!==eg)throw t;return be("LocalStore","Unexpectedly lost primary lease"),[2]})})}function j_(t,e){var o=t[1],l=e[1],f=lt(t[0],e[0]);return 0===f?lt(o,l):f}var B_=function(){function t(e){this.ne=e,this.buffer=new sn(j_),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var i=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(i);else{var o=this.buffer.last();j_(i,o)<0&&(this.buffer=this.buffer.delete(o).add(i))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),$D=function(){function t(e,i){this.garbageCollector=e,this.asyncQueue=i,this.oe=!1,this.ce=null}return t.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var i=this,o=this.oe?3e5:6e4;be("LruGarbageCollector","Garbage collection scheduled in "+o+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,function(){return(0,T.mG)(i,void 0,void 0,function(){var u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:this.ce=null,this.oe=!0,l.label=1;case 1:return l.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return l.sent(),[3,7];case 3:return xs(u=l.sent())?(be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u),[3,6]):[3,4];case 4:return[4,eo(u)];case 5:l.sent(),l.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return l.sent(),[2]}})})})},t}(),G_=function(){function t(e,i){this.ae=e,this.params=i}return t.prototype.calculateTargetCount=function(e,i){return this.ae.he(e).next(function(o){return Math.floor(i/100*o)})},t.prototype.nthSequenceNumber=function(e,i){var o=this;if(0===i)return ye.resolve(Ur.o);var u=new B_(i);return this.ae.forEachTarget(e,function(l){return u.re(l.sequenceNumber)}).next(function(){return o.ae.le(e,function(l){return u.re(l)})}).next(function(){return u.maxValue})},t.prototype.removeTargets=function(e,i,o){return this.ae.removeTargets(e,i,o)},t.prototype.removeOrphanedDocuments=function(e,i){return this.ae.removeOrphanedDocuments(e,i)},t.prototype.collect=function(e,i){var o=this;return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(ag)):this.getCacheSize(e).next(function(u){return u<o.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; Cache size "+u+" is lower than threshold "+o.params.cacheSizeCollectionThreshold),ag):o.fe(e,i)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,i){var o,u,l,f,g,_,w,E=this,I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(S){return S>E.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+E.params.maximumSequenceNumbersToCollect+" from "+S),u=E.params.maximumSequenceNumbersToCollect):u=S,f=Date.now(),E.nthSequenceNumber(e,u)}).next(function(S){return o=S,g=Date.now(),E.removeTargets(e,o,i)}).next(function(S){return l=S,_=Date.now(),E.removeOrphanedDocuments(e,o)}).next(function(S){return w=Date.now(),Wv()<=cs.in.DEBUG&&be("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(f-I)+"ms\n\tDetermined least recently used "+u+" in "+(g-f)+"ms\n\tRemoved "+l+" targets in "+(_-g)+"ms\n\tRemoved "+S+" documents in "+(w-_)+"ms\nTotal Duration: "+(w-I)+"ms"),ye.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:S})})},t}(),qD=function(){function t(e,i){this.db=e,this.garbageCollector=new G_(this,i)}return t.prototype.he=function(e){var i=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(o){return i.next(function(u){return o+u})})},t.prototype.de=function(e){var i=0;return this.le(e,function(o){i++}).next(function(){return i})},t.prototype.forEachTarget=function(e,i){return this.db.getTargetCache().forEachTarget(e,i)},t.prototype.le=function(e,i){return this.we(e,function(o,u){return i(u)})},t.prototype.addReference=function(e,i,o){return Bc(e,o)},t.prototype.removeReference=function(e,i,o){return Bc(e,o)},t.prototype.removeTargets=function(e,i,o){return this.db.getTargetCache().removeTargets(e,i,o)},t.prototype.markPotentiallyOrphaned=function(e,i){return Bc(e,i)},t.prototype._e=function(e,i){return u=i,l=!1,td(o=e).Ot(function(f){return k_(o,f,u).next(function(g){return g&&(l=!0),ye.resolve(!g)})}).next(function(){return l});var o,u,l},t.prototype.removeOrphanedDocuments=function(e,i){var o=this,u=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[],f=0;return this.we(e,function(g,_){if(_<=i){var w=o._e(e,g).next(function(E){if(!E)return f++,u.getEntry(e,g).next(function(){return u.removeEntry(g),Oo(e).delete([0,ai(g.path)])})});l.push(w)}}).next(function(){return ye.waitFor(l)}).next(function(){return u.apply(e)}).next(function(){return f})},t.prototype.removeTarget=function(e,i){var o=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)},t.prototype.updateLimboDocument=function(e,i){return Bc(e,i)},t.prototype.we=function(e,i){var o,u=Oo(e),l=Ur.o;return u.$t({index:kn.documentTargetsIndex},function(f,g){var w=g.path,E=g.sequenceNumber;0===f[0]?(l!==Ur.o&&i(new Pe(Zi(o)),l),l=E,o=w):l=Ur.o}).next(function(){l!==Ur.o&&i(new Pe(Zi(o)),l)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function Bc(t,e){return Oo(t).put((o=t.currentSequenceNumber,new kn(0,ai(e.path),o)));var o}var Gc=function(){function t(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={}}return t.prototype.get=function(e){var i=this.mapKeyFn(e),o=this.inner[i];if(void 0!==o)for(var u=0,l=o;u<l.length;u++){var f=l[u],_=f[1];if(this.equalsFn(f[0],e))return _}},t.prototype.has=function(e){return void 0!==this.get(e)},t.prototype.set=function(e,i){var o=this.mapKeyFn(e),u=this.inner[o];if(void 0!==u){for(var l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,i]);u.push([e,i])}else this.inner[o]=[[e,i]]},t.prototype.delete=function(e){var i=this.mapKeyFn(e),o=this.inner[i];if(void 0===o)return!1;for(var u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[i]:o.splice(u,1),!0;return!1},t.prototype.forEach=function(e){Es(this.inner,function(i,o){for(var u=0,l=o;u<l.length;u++){var f=l[u];e(f[0],f[1])}})},t.prototype.isEmpty=function(){return Cp(this.inner)},t}(),H_=function(){function t(){this.changes=new Gc(function(e){return e.toString()},function(e,i){return e.isEqual(i)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var i=this.changes.get(e);return i?i.readTime:ot.min()},t.prototype.addEntry=function(e,i){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:i})},t.prototype.removeEntry=function(e,i){void 0===i&&(i=null),this.assertNotApplied(),this.changes.set(e,{document:pn.newInvalidDocument(e),readTime:i})},t.prototype.getEntry=function(e,i){this.assertNotApplied();var o=this.changes.get(i);return void 0!==o?ye.resolve(o.document):this.getFromCache(e,i)},t.prototype.getEntries=function(e,i){return this.getAllFromCache(e,i)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),Hc=function(){function t(e,i){this.R=e,this.Ut=i}return t.prototype.addEntry=function(e,i,o){return qr(e).put(nd(i),o)},t.prototype.removeEntry=function(e,i){var o=qr(e),u=nd(i);return o.delete(u)},t.prototype.updateMetadata=function(e,i){var o=this;return this.getMetadata(e).next(function(u){return u.byteSize+=i,o.me(e,u)})},t.prototype.getEntry=function(e,i){var o=this;return qr(e).get(nd(i)).next(function(u){return o.ye(i,u)})},t.prototype.ge=function(e,i){var o=this;return qr(e).get(nd(i)).next(function(u){return{document:o.ye(i,u),size:ed(u)}})},t.prototype.getEntries=function(e,i){var o=this,u=Gr();return this.pe(e,i,function(l,f){var g=o.ye(l,f);u=u.insert(l,g)}).next(function(){return u})},t.prototype.Ee=function(e,i){var o=this,u=Gr(),l=new Ln(Pe.comparator);return this.pe(e,i,function(f,g){var _=o.ye(f,g);u=u.insert(f,_),l=l.insert(f,ed(g))}).next(function(){return{documents:u,Te:l}})},t.prototype.pe=function(e,i,o){if(i.isEmpty())return ye.resolve();var u=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),l=i.getIterator(),f=l.getNext();return qr(e).$t({range:u},function(g,_,w){for(var E=Pe.fromSegments(g);f&&Pe.comparator(f,E)<0;)o(f,null),f=l.getNext();f&&f.isEqual(E)&&(o(f,_),f=l.hasNext()?l.getNext():null),f?w.Ct(f.path.toArray()):w.done()}).next(function(){for(;f;)o(f,null),f=l.hasNext()?l.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,i,o){var u=this,l=Gr(),f=i.path.length+1,g={};if(o.isEqual(ot.min())){var _=i.path.toArray();g.range=IDBKeyRange.lowerBound(_)}else{var w=i.path.toArray(),E=Xh(o);g.range=IDBKeyRange.lowerBound([w,E],!0),g.index=zt.collectionReadTimeIndex}return qr(e).$t(g,function(I,S,O){if(I.length===f){var V=ng(u.R,S);i.path.isPrefixOf(V.key.path)?cr(i,V)&&(l=l.insert(V.key,V)):O.done()}}).next(function(){return l})},t.prototype.newChangeBuffer=function(e){return new zD(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(i){return i.byteSize})},t.prototype.getMetadata=function(e){return Ns(e).get(Ai.key).next(function(i){return Ke(!!i),i})},t.prototype.me=function(e,i){return Ns(e).put(Ai.key,i)},t.prototype.ye=function(e,i){if(i){var o=ng(this.R,i);if(!o.isNoDocument()||!o.version.isEqual(ot.min()))return o}return pn.newInvalidDocument(e)},t}(),zD=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).Ie=i,u.trackRemovals=o,u.Ae=new Gc(function(l){return l.toString()},function(l,f){return l.isEqual(f)}),u}return(0,T.ZT)(e,t),e.prototype.applyChanges=function(i){var o=this,u=[],l=0,f=new sn(function(g,_){return lt(g.canonicalString(),_.canonicalString())});return this.changes.forEach(function(g,_){var w=o.Ae.get(g);if(_.document.isValidDocument()){var E=rg(o.Ie.R,_.document,o.getReadTime(g));f=f.add(g.path.popLast());var I=ed(E);l+=I-w,u.push(o.Ie.addEntry(i,g,E))}else if(l-=w,o.trackRemovals){var S=rg(o.Ie.R,pn.newNoDocument(g,ot.min()),o.getReadTime(g));u.push(o.Ie.addEntry(i,g,S))}else u.push(o.Ie.removeEntry(i,g))}),f.forEach(function(g){u.push(o.Ie.Ut.addToCollectionParentIndex(i,g))}),u.push(this.Ie.updateMetadata(i,l)),ye.waitFor(u)},e.prototype.getFromCache=function(i,o){var u=this;return this.Ie.ge(i,o).next(function(l){return u.Ae.set(o,l.size),l.document})},e.prototype.getAllFromCache=function(i,o){var u=this;return this.Ie.Ee(i,o).next(function(l){var f=l.documents;return l.Te.forEach(function(g,_){u.Ae.set(g,_)}),f})},e}(H_);function Ns(t){return zn(t,Ai.store)}function qr(t){return zn(t,zt.store)}function nd(t){return t.path.toArray()}var DI=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,i,o,u){var l=this;Ke(o<u&&o>=0&&u<=11);var _,f=new S_("createOrUpgrade",i);o<1&&u>=1&&(e.createObjectStore(Ir.store),(_=e).createObjectStore(Ji.store,{keyPath:Ji.keyPath}),_.createObjectStore(xt.store,{keyPath:xt.keyPath,autoIncrement:!0}).createIndex(xt.userMutationsIndex,xt.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Dn.store),ug(e),function(_){_.createObjectStore(zt.store)}(e));var g=ye.resolve();return o<3&&u>=3&&(0!==o&&(function(_){_.deleteObjectStore(kn.store),_.deleteObjectStore(Tr.store),_.deleteObjectStore(Hr.store)}(e),ug(e)),g=g.next(function(){return function(_){var w=_.store(Hr.store),E=new Hr(0,0,ot.min().toTimestamp(),0);return w.put(Hr.key,E)}(f)})),o<4&&u>=4&&(0!==o&&(g=g.next(function(){return function(_,w){return w.store(xt.store).Nt().next(function(E){_.deleteObjectStore(xt.store),_.createObjectStore(xt.store,{keyPath:xt.keyPath,autoIncrement:!0}).createIndex(xt.userMutationsIndex,xt.userMutationsKeyPath,{unique:!0});var I=w.store(xt.store),S=E.map(function(O){return I.put(O)});return ye.waitFor(S)})}(e,f)})),g=g.next(function(){!function(_){_.createObjectStore(Mi.store,{keyPath:Mi.keyPath})}(e)})),o<5&&u>=5&&(g=g.next(function(){return l.Re(f)})),o<6&&u>=6&&(g=g.next(function(){return function(_){_.createObjectStore(Ai.store)}(e),l.be(f)})),o<7&&u>=7&&(g=g.next(function(){return l.ve(f)})),o<8&&u>=8&&(g=g.next(function(){return l.Pe(e,f)})),o<9&&u>=9&&(g=g.next(function(){(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){var w=_.objectStore(zt.store);w.createIndex(zt.readTimeIndex,zt.readTimeIndexPath,{unique:!1}),w.createIndex(zt.collectionReadTimeIndex,zt.collectionReadTimeIndexPath,{unique:!1})}(i)})),o<10&&u>=10&&(g=g.next(function(){return l.Ve(f)})),o<11&&u>=11&&(g=g.next(function(){(function(_){_.createObjectStore(Xi.store,{keyPath:Xi.keyPath})})(e),function(_){_.createObjectStore(Ha.store,{keyPath:Ha.keyPath})}(e)})),g},t.prototype.be=function(e){var i=0;return e.store(zt.store).$t(function(o,u){i+=ed(u)}).next(function(){var o=new Ai(i);return e.store(Ai.store).put(Ai.key,o)})},t.prototype.Re=function(e){var i=this,o=e.store(Ji.store),u=e.store(xt.store);return o.Nt().next(function(l){return ye.forEach(l,function(f){var g=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return u.Nt(xt.userMutationsIndex,g).next(function(_){return ye.forEach(_,function(w){Ke(w.userId===f.userId);var E=Mo(i.R,w);return P_(e,f.userId,E).next(function(){})})})})})},t.prototype.ve=function(e){var i=e.store(kn.store),o=e.store(zt.store);return e.store(Hr.store).get(Hr.key).next(function(u){var l=[];return o.$t(function(f,g){var _=new gt(f),w=[0,ai(_)];l.push(i.get(w).next(function(E){return E?ye.resolve():i.put(new kn(0,ai(_),u.highestListenSequenceNumber))}))}).next(function(){return ye.waitFor(l)})})},t.prototype.Pe=function(e,i){e.createObjectStore(Ga.store,{keyPath:Ga.keyPath});var o=i.store(Ga.store),u=new sg,l=function(f){if(u.add(f)){var g=f.lastSegment(),_=f.popLast();return o.put({collectionId:g,parent:ai(_)})}};return i.store(zt.store).$t({Ft:!0},function(f,g){var _=new gt(f);return l(_.popLast())}).next(function(){return i.store(Dn.store).$t({Ft:!0},function(f,g){var w=Zi(f[1]);return l(w.popLast())})})},t.prototype.Ve=function(e){var i=this,o=e.store(Tr.store);return o.$t(function(u,l){var f=jc(l),g=ig(i.R,f);return o.put(g)})},t}();function ug(t){t.createObjectStore(kn.store,{keyPath:kn.keyPath}).createIndex(kn.documentTargetsIndex,kn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Tr.store,{keyPath:Tr.keyPath}).createIndex(Tr.queryTargetsIndexName,Tr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hr.store)}var cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WD=function(){function t(e,i,o,u,l,f,g,_,w,E){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=o,this.Se=l,this.window=f,this.document=g,this.De=w,this.Ce=E,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(I){return Promise.resolve()},!t.yt())throw new ge(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qD(this,u),this.Le=i+"main",this.R=new Jh(_),this.Be=new qa(this.Le,11,new DI(this.R)),this.qe=new V_(this.referenceDelegate,this.R),this.Ut=new HD,this.Ue=new Hc(this.R,this.Ut),this.Ke=new BD,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===E&&Lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ge(Y.FAILED_PRECONDITION,cg);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(i){return e.qe.getHighestSequenceNumber(i)})}).then(function(i){e.Ne=new Ur(i,e.De)}).then(function(){e.xe=!0}).catch(function(i){return e.Be&&e.Be.close(),Promise.reject(i)})},t.prototype.He=function(e){var i=this;return this.Me=function(o){return(0,T.mG)(i,void 0,void 0,function(){return(0,T.Jh)(this,function(u){return this.started?[2,e(o)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var i=this;this.Be.vt(function(o){return(0,T.mG)(i,void 0,void 0,function(){return(0,T.Jh)(this,function(u){switch(u.label){case 0:return null===o.newVersion?[4,e()]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,T.mG)(i,void 0,void 0,function(){return(0,T.Jh)(this,function(o){switch(o.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(i){return rd(i).put(new Mi(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(i).next(function(o){o||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(i)}).next(function(o){return e.isPrimary&&!o?e.Xe(i).next(function(){return!1}):!!o&&e.Ze(i).next(function(){return!0})})}).catch(function(i){if(xs(i))return be("IndexedDbPersistence","Failed to extend owner lease: ",i),e.isPrimary;if(!e.allowTabSynchronization)throw i;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(function(i){e.isPrimary!==i&&e.Se.enqueueRetryable(function(){return e.Me(i)}),e.isPrimary=i})},t.prototype.Je=function(e){var i=this;return $c(e).get(Ir.key).next(function(o){return ye.resolve(i.tn(o))})},t.prototype.en=function(e){return rd(e).delete(this.clientId)},t.prototype.nn=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o,l=this;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(g){var _=zn(g,Mi.store);return _.Nt().next(function(w){var E=l.rn(w,18e5),I=w.filter(function(S){return-1===E.indexOf(S)});return ye.forEach(I,function(S){return _.delete(S.clientId)}).next(function(){return I})})}).catch(function(){return[]})]);case 1:if(e=f.sent(),this.Qe)for(i=0,o=e;i<o.length;i++)this.Qe.removeItem(this.on(o[i].clientId));f.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var i=this;return this.Ce?ye.resolve(!0):$c(e).get(Ir.key).next(function(o){if(null!==o&&i.sn(o.leaseTimestampMs,5e3)&&!i.cn(o.ownerId)){if(i.tn(o)&&i.networkEnabled)return!0;if(!i.tn(o)){if(!o.allowTabSynchronization)throw new ge(Y.FAILED_PRECONDITION,cg);return!1}}return!(!i.networkEnabled||!i.inForeground)||rd(e).Nt().next(function(u){return void 0===i.rn(u,5e3).find(function(l){return!(i.clientId===l.clientId||!(!i.networkEnabled&&l.networkEnabled||!i.inForeground&&l.inForeground&&i.networkEnabled===l.networkEnabled))})})}).next(function(o){return i.isPrimary!==o&&be("IndexedDbPersistence","Client "+(o?"is":"is not")+" eligible for a primary lease."),o})},t.prototype.shutdown=function(){return(0,T.mG)(this,void 0,void 0,function(){var e=this;return(0,T.Jh)(this,function(i){switch(i.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ir.store,Mi.store],function(o){var u=new M_(o,Ur.o);return e.Xe(u).next(function(){return e.en(u)})})];case 1:return i.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,i){var o=this;return e.filter(function(u){return o.sn(u.updateTimeMs,i)&&!o.cn(u.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(i){return rd(i).Nt().next(function(o){return e.rn(o,18e5).map(function(u){return u.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return L_.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,i,o){var l,u=this;return be("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===i?"readonly":"readwrite",VD,function(g){return l=new M_(g,u.Ne?u.Ne.next():Ur.o),"readwrite-primary"===i?u.Je(l).next(function(_){return!!_||u.Ye(l)}).next(function(_){if(!_)throw Lt("Failed to obtain primary lease for action '"+e+"'."),u.isPrimary=!1,u.Se.enqueueRetryable(function(){return u.Me(!1)}),new ge(Y.FAILED_PRECONDITION,eg);return o(l)}).next(function(_){return u.Ze(l).next(function(){return _})}):u.dn(l).next(function(){return o(l)})}).then(function(g){return l.raiseOnCommittedEvent(),g})},t.prototype.dn=function(e){var i=this;return $c(e).get(Ir.key).next(function(o){if(null!==o&&i.sn(o.leaseTimestampMs,5e3)&&!i.cn(o.ownerId)&&!i.tn(o)&&!(i.Ce||i.allowTabSynchronization&&o.allowTabSynchronization))throw new ge(Y.FAILED_PRECONDITION,cg)})},t.prototype.Ze=function(e){var i=new Ir(this.clientId,this.allowTabSynchronization,Date.now());return $c(e).put(Ir.key,i)},t.yt=function(){return qa.yt()},t.prototype.Xe=function(e){var i=this,o=$c(e);return o.get(Ir.key).next(function(u){return i.tn(u)?(be("IndexedDbPersistence","Releasing primary lease."),o.delete(Ir.key)):ye.resolve()})},t.prototype.sn=function(e,i){var o=Date.now();return!(e<o-i||e>o&&(Lt("Detected an update time that is in the future: "+e+" > "+o),1))},t.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var e,i=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){i.un(),(0,_t.G6)()&&navigator.appVersion.match("Version/14")&&i.Se.enterRestrictedMode(!0),i.Se.enqueueAndForget(function(){return i.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(e){var i;try{var o=null!==(null===(i=this.Qe)||void 0===i?void 0:i.getItem(this.on(e)));return be("IndexedDbPersistence","Client '"+e+"' "+(o?"is":"is not")+" zombied in LocalStorage"),o}catch(u){return Lt("IndexedDbPersistence","Failed to get zombied client id.",u),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Lt("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function $c(t){return zn(t,Ir.store)}function rd(t){return zn(t,Mi.store)}function id(t,e){var i=t.projectId;return t.isDefaultDatabase||(i+="."+t.database),"firestore/"+e+"/"+i+"/"}var $_=function(t,e){this.progress=t,this.wn=e},od=function(){function t(e,i,o){this.Ue=e,this._n=i,this.Ut=o}return t.prototype.mn=function(e,i){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,i).next(function(u){return o.yn(e,i,u)})},t.prototype.yn=function(e,i,o){return this.Ue.getEntry(e,i).next(function(u){for(var l=0,f=o;l<f.length;l++)f[l].applyToLocalView(u);return u})},t.prototype.gn=function(e,i){e.forEach(function(o,u){for(var l=0,f=i;l<f.length;l++)f[l].applyToLocalView(u)})},t.prototype.pn=function(e,i){var o=this;return this.Ue.getEntries(e,i).next(function(u){return o.En(e,u).next(function(){return u})})},t.prototype.En=function(e,i){var o=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,i).next(function(u){return o.gn(i,u)})},t.prototype.getDocumentsMatchingQuery=function(e,i,o){return Pe.isDocumentKey((u=i).path)&&null===u.collectionGroup&&0===u.filters.length?this.Tn(e,i.path):Uh(i)?this.In(e,i,o):this.An(e,i,o);var u},t.prototype.Tn=function(e,i){return this.mn(e,new Pe(i)).next(function(o){var u=qh();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})},t.prototype.In=function(e,i,o){var u=this,l=i.collectionGroup,f=qh();return this.Ut.getCollectionParents(e,l).next(function(g){return ye.forEach(g,function(_){var E,I,w=(E=i,I=_.child(l),new Ii(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));return u.An(e,w,o).next(function(E){E.forEach(function(I,S){f=f.insert(I,S)})})}).next(function(){return f})})},t.prototype.An=function(e,i,o){var u,l,f=this;return this.Ue.getDocumentsMatchingQuery(e,i,o).next(function(g){return u=g,f._n.getAllMutationBatchesAffectingQuery(e,i)}).next(function(g){return f.Rn(e,l=g,u).next(function(_){u=_;for(var w=0,E=l;w<E.length;w++)for(var I=E[w],S=0,O=I.mutations;S<O.length;S++){var V=O[S],W=V.key,se=u.get(W);null==se&&(se=pn.newInvalidDocument(W),u=u.insert(W,se)),Hh(V,se,I.localWriteTime),se.isFoundDocument()||(u=u.remove(W))}})}).next(function(){return u.forEach(function(g,_){cr(i,_)||(u=u.remove(g))}),u})},t.prototype.Rn=function(e,i,o){for(var u=Ct(),l=0,f=i;l<f.length;l++)for(var g=0,_=f[l].mutations;g<_.length;g++){var w=_[g];w instanceof Qi&&null===o.get(w.key)&&(u=u.add(w.key))}var E=o;return this.Ue.getEntries(e,u).next(function(I){return I.forEach(function(S,O){O.isFoundDocument()&&(E=E.insert(S,O))}),E})},t}(),sd=function(){function t(e,i,o,u){this.targetId=e,this.fromCache=i,this.bn=o,this.vn=u}return t.Pn=function(e,i){for(var o=Ct(),u=Ct(),l=0,f=i.docChanges;l<f.length;l++){var g=f[l];switch(g.type){case 0:o=o.add(g.doc.key);break;case 1:u=u.add(g.doc.key)}}return new t(e,i.fromCache,o,u)},t}(),Za=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,i,o,u){var f,l=this;return 0===(f=i).filters.length&&null===f.limit&&null==f.startAt&&null==f.endAt&&(0===f.explicitOrderBy.length||1===f.explicitOrderBy.length&&f.explicitOrderBy[0].field.isKeyField())||o.isEqual(ot.min())?this.Dn(e,i):this.Sn.pn(e,u).next(function(f){var g=l.Cn(i,f);return(Lh(i)||kh(i))&&l.Nn(i.limitType,g,u,o)?l.Dn(e,i):(Wv()<=cs.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lp(i)),l.Sn.getDocumentsMatchingQuery(e,i,o).next(function(_){return g.forEach(function(w){_=_.insert(w.key,w)}),_}))})},t.prototype.Cn=function(e,i){var o=new sn(Br(e));return i.forEach(function(u,l){cr(e,l)&&(o=o.add(l))}),o},t.prototype.Nn=function(e,i,o,u){if(o.size!==i.size)return!0;var l="F"===e?i.last():i.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)},t.prototype.Dn=function(e,i){return Wv()<=cs.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Lp(i)),this.Sn.getDocumentsMatchingQuery(e,i,ot.min())},t}(),KD=function(){function t(e,i,o,u){this.persistence=e,this.xn=i,this.R=u,this.kn=new Ln(lt),this.Fn=new Gc(function(l){return Ra(l)},Ac),this.$n=ot.min(),this._n=e.getMutationQueue(o),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new od(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var i=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(o){return e.collect(o,i.kn)})},t}();function lg(t,e,i,o){return new KD(t,e,i,o)}function hg(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u,l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return i=De(t),o=i._n,u=i.Mn,[4,i.persistence.runTransaction("Handle user change","readonly",function(g){var _;return i._n.getAllMutationBatches(g).next(function(w){return _=w,o=i.persistence.getMutationQueue(e),u=new od(i.On,o,i.persistence.getIndexManager()),o.getAllMutationBatches(g)}).next(function(w){for(var E=[],I=[],S=Ct(),O=0,V=_;O<V.length;O++){var W=V[O];E.push(W.batchId);for(var se=0,pe=W.mutations;se<pe.length;se++)S=S.add(pe[se].key)}for(var Ee=0,Ge=w;Ee<Ge.length;Ee++){var Oe=Ge[Ee];I.push(Oe.batchId);for(var Et=0,Qn=Oe.mutations;Et<Qn.length;Et++)S=S.add(Qn[Et].key)}return u.pn(g,S).next(function(dm){return{Ln:dm,removedBatchIds:E,addedBatchIds:I}})})})];case 1:return l=f.sent(),[2,(i._n=o,i.Mn=u,i.xn.Vn(i.Mn),l)]}})})}function YD(t,e){var i=De(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(o){var f,g,_,w,E,I,S,u=e.batch.keys(),l=i.On.newChangeBuffer({trackRemovals:!0});return(f=i,g=o,_=e,w=l,E=_.batch,I=E.keys(),S=ye.resolve(),I.forEach(function(O){S=S.next(function(){return w.getEntry(g,O)}).next(function(V){var W=_.docVersions.get(O);Ke(null!==W),V.version.compareTo(W)<0&&(E.applyToRemoteDocument(V,_),V.isValidDocument()&&w.addEntry(V,_.commitVersion))})}),S.next(function(){return f._n.removeMutationBatch(g,E)})).next(function(){return l.apply(o)}).next(function(){return i._n.performConsistencyCheck(o)}).next(function(){return i.Mn.pn(o,u)})})}function q_(t){var e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(i){return e.qe.getLastRemoteSnapshotVersion(i)})}function QD(t,e){var i=De(t),o=e.snapshotVersion,u=i.kn;return i.persistence.runTransaction("Apply remote event","readwrite-primary",function(l){var f=i.On.newChangeBuffer({trackRemovals:!0});u=i.kn;var g=[];e.targetChanges.forEach(function(E,I){var W,se,pe,S=u.get(I);if(S){g.push(i.qe.removeMatchingKeys(l,E.removedDocuments,I).next(function(){return i.qe.addMatchingKeys(l,E.addedDocuments,I)}));var O=E.resumeToken;if(O.approximateByteSize()>0){var V=S.withResumeToken(O,o).withSequenceNumber(l.currentSequenceNumber);u=u.insert(I,V),W=S,pe=E,Ke((se=V).resumeToken.approximateByteSize()>0),(0===W.resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0)&&g.push(i.qe.updateTargetData(l,V))}}});var _=Gr();if(e.documentUpdates.forEach(function(E,I){e.resolvedLimboDocuments.has(E)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(l,E))}),g.push(ad(l,f,e.documentUpdates,o,void 0).next(function(E){_=E})),!o.isEqual(ot.min())){var w=i.qe.getLastRemoteSnapshotVersion(l).next(function(E){return i.qe.setTargetsMetadata(l,l.currentSequenceNumber,o)});g.push(w)}return ye.waitFor(g).next(function(){return f.apply(l)}).next(function(){return i.Mn.En(l,_)}).next(function(){return _})}).then(function(l){return i.kn=u,l})}function ad(t,e,i,o,u){var l=Ct();return i.forEach(function(f){return l=l.add(f)}),e.getEntries(t,l).next(function(f){var g=Gr();return i.forEach(function(_,w){var E=f.get(_),I=(null==u?void 0:u.get(_))||o;w.isNoDocument()&&w.version.isEqual(ot.min())?(e.removeEntry(_,I),g=g.insert(_,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||0===w.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(w,I),g=g.insert(_,w)):be("LocalStore","Ignoring outdated watch update for ",_,". Current version:",E.version," Watch version:",w.version)}),g})}function ZD(t,e){var i=De(t);return i.persistence.runTransaction("Get next mutation batch","readonly",function(o){return void 0===e&&(e=-1),i._n.getNextMutationBatchAfterBatchId(o,e)})}function qc(t,e){var i=De(t);return i.persistence.runTransaction("Allocate target","readwrite",function(o){var u;return i.qe.getTargetData(o,e).next(function(l){return l?ye.resolve(u=l):i.qe.allocateTargetId(o).next(function(f){return u=new Zh(e,f,0,o.currentSequenceNumber),i.qe.addTargetData(o,u).next(function(){return u})})})}).then(function(o){var u=i.kn.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(i.kn=i.kn.insert(o.targetId,o),i.Fn.set(e,o.targetId)),o})}function Ja(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:o=De(t),u=o.kn.get(e),l=i?"readwrite":"readwrite-primary",g.label=1;case 1:return g.trys.push([1,4,,5]),i?[3,3]:[4,o.persistence.runTransaction("Release target",l,function(_){return o.persistence.referenceDelegate.removeTarget(_,u)})];case 2:g.sent(),g.label=3;case 3:return[3,5];case 4:if(!xs(f=g.sent()))throw f;return be("LocalStore","Failed to update sequence numbers for target "+e+": "+f),[3,5];case 5:return o.kn=o.kn.remove(e),o.Fn.delete(u.target),[2]}})})}function ud(t,e,i){var o=De(t),u=ot.min(),l=Ct();return o.persistence.runTransaction("Execute query","readonly",function(f){return(g=o,_=f,w=Cr(e),E=De(g),I=E.Fn.get(w),void 0!==I?ye.resolve(E.kn.get(I)):E.qe.getTargetData(_,w)).next(function(g){if(g)return u=g.lastLimboFreeSnapshotVersion,o.qe.getMatchingKeysForTargetId(f,g.targetId).next(function(_){l=_})}).next(function(){return o.xn.getDocumentsMatchingQuery(f,e,i?u:ot.min(),i?l:Ct())}).next(function(g){return{documents:g,Bn:l}});var g,_,w,E,I})}function Os(t,e){var i=De(t),o=De(i.qe),u=i.kn.get(e);return u?Promise.resolve(u.target):i.persistence.runTransaction("Get target data","readonly",function(l){return o.lt(l,e).next(function(f){return f?f.target:null})})}function dg(t){var e=De(t);return e.persistence.runTransaction("Get new document changes","readonly",function(i){return u=i,l=e.$n,f=De(e.On),g=Gr(),_=Xh(l),w=qr(u),E=IDBKeyRange.lowerBound(_,!0),w.$t({index:zt.readTimeIndex,range:E},function(I,S){var O=ng(f.R,S);g=g.insert(O.key,O),_=S.readTime}).next(function(){return{wn:g,readTime:N_(_)}});var u,l,f,g,_,w,E}).then(function(i){var o=i.wn;return e.$n=i.readTime,o})}function Xa(t){return(0,T.mG)(this,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(i){return[2,(e=De(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return l=qr(o),f=ot.min(),l.$t({index:zt.readTimeIndex,reverse:!0},function(g,_,w){_.readTime&&(f=N_(_.readTime)),w.done()}).next(function(){return f});var l,f}).then(function(o){e.$n=o})]})})}function EI(t,e,i,o){return(0,T.mG)(this,void 0,void 0,function(){var u,l,f,g,_,w,E,I,S,O;return(0,T.Jh)(this,function(V){switch(V.label){case 0:for(u=De(t),l=Ct(),f=Gr(),g=$p(),_=0,w=i;_<w.length;_++)I=e.qn((E=w[_]).metadata.name),E.document&&(l=l.add(I)),f=f.insert(I,e.Un(E)),g=g.insert(I,e.Kn(E.metadata.readTime));return S=u.On.newChangeBuffer({trackRemovals:!0}),[4,qc(u,(W=o,Cr(oi(gt.fromString("__bundle__/docs/"+W)))))];case 1:return O=V.sent(),[2,u.persistence.runTransaction("Apply bundle documents","readwrite",function(W){return ad(W,S,f,ot.min(),g).next(function(se){return S.apply(W),se}).next(function(se){return u.qe.removeMatchingKeysForTargetId(W,O.targetId).next(function(){return u.qe.addMatchingKeys(W,l,O.targetId)}).next(function(){return u.Mn.En(W,se)}).next(function(){return se})})})]}var W})})}function z_(t,e,i){return void 0===i&&(i=Ct()),(0,T.mG)(this,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,qc(t,Cr(og(e.bundledQuery)))];case 1:return o=l.sent(),[2,(u=De(t)).persistence.runTransaction("Save named query","readwrite",function(f){var g=mn(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ke.saveNamedQuery(f,e);var _=o.withResumeToken(sr.EMPTY_BYTE_STRING,g);return u.kn=u.kn.insert(_.targetId,_),u.qe.updateTargetData(f,_).next(function(){return u.qe.removeMatchingKeysForTargetId(f,o.targetId)}).next(function(){return u.qe.addMatchingKeys(f,i,o.targetId)}).next(function(){return u.Ke.saveNamedQuery(f,e)})})]}})})}var JD=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,i){return ye.resolve(this.Qn.get(i))},t.prototype.saveBundleMetadata=function(e,i){var o;return this.Qn.set(i.id,{id:(o=i).id,version:o.version,createTime:mn(o.createTime)}),ye.resolve()},t.prototype.getNamedQuery=function(e,i){return ye.resolve(this.jn.get(i))},t.prototype.saveNamedQuery=function(e,i){return this.jn.set(i.name,{name:(o=i).name,query:og(o.bundledQuery),readTime:mn(o.readTime)}),ye.resolve();var o},t}(),W_=function(){function t(){this.Wn=new sn(an.Gn),this.zn=new sn(an.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,i){var o=new an(e,i);this.Wn=this.Wn.add(o),this.zn=this.zn.add(o)},t.prototype.Jn=function(e,i){var o=this;e.forEach(function(u){return o.addReference(u,i)})},t.prototype.removeReference=function(e,i){this.Yn(new an(e,i))},t.prototype.Xn=function(e,i){var o=this;e.forEach(function(u){return o.removeReference(u,i)})},t.prototype.Zn=function(e){var i=this,o=new Pe(new gt([])),u=new an(o,e),l=new an(o,e+1),f=[];return this.zn.forEachInRange([u,l],function(g){i.Yn(g),f.push(g.key)}),f},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(i){return e.Yn(i)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var i=new Pe(new gt([])),o=new an(i,e),u=new an(i,e+1),l=Ct();return this.zn.forEachInRange([o,u],function(f){l=l.add(f.key)}),l},t.prototype.containsKey=function(e){var i=new an(e,0),o=this.Wn.firstAfterOrEqual(i);return null!==o&&e.isEqual(o.key)},t}(),an=function(){function t(e,i){this.key=e,this.ns=i}return t.Gn=function(e,i){return Pe.comparator(e.key,i.key)||lt(e.ns,i.ns)},t.Hn=function(e,i){return lt(e.ns,i.ns)||Pe.comparator(e.key,i.key)},t}(),CI=function(){function t(e,i){this.Ut=e,this.referenceDelegate=i,this._n=[],this.ss=1,this.rs=new sn(an.Gn)}return t.prototype.checkEmpty=function(e){return ye.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(e,i,o,u){var l=this.ss;this.ss++;var f=new tg(l,i,o,u);this._n.push(f);for(var g=0,_=u;g<_.length;g++){var w=_[g];this.rs=this.rs.add(new an(w.key,l)),this.Ut.addToCollectionParentIndex(e,w.key.path.popLast())}return ye.resolve(f)},t.prototype.lookupMutationBatch=function(e,i){return ye.resolve(this.os(i))},t.prototype.getNextMutationBatchAfterBatchId=function(e,i){var u=this.cs(i+1),l=u<0?0:u;return ye.resolve(this._n.length>l?this._n[l]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ye.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return ye.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,i){var o=this,u=new an(i,0),l=new an(i,Number.POSITIVE_INFINITY),f=[];return this.rs.forEachInRange([u,l],function(g){var _=o.os(g.ns);f.push(_)}),ye.resolve(f)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,i){var o=this,u=new sn(lt);return i.forEach(function(l){var f=new an(l,0),g=new an(l,Number.POSITIVE_INFINITY);o.rs.forEachInRange([f,g],function(_){u=u.add(_.ns)})}),ye.resolve(this.us(u))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,i){var o=i.path,u=o.length+1,l=o;Pe.isDocumentKey(l)||(l=l.child(""));var f=new an(new Pe(l),0),g=new sn(lt);return this.rs.forEachWhile(function(_){var w=_.key.path;return!!o.isPrefixOf(w)&&(w.length===u&&(g=g.add(_.ns)),!0)},f),ye.resolve(this.us(g))},t.prototype.us=function(e){var i=this,o=[];return e.forEach(function(u){var l=i.os(u);null!==l&&o.push(l)}),o},t.prototype.removeMutationBatch=function(e,i){var o=this;Ke(0===this.hs(i.batchId,"removed")),this._n.shift();var u=this.rs;return ye.forEach(i.mutations,function(l){var f=new an(l.key,i.batchId);return u=u.delete(f),o.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(function(){o.rs=u})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,i){var o=new an(i,0),u=this.rs.firstAfterOrEqual(o);return ye.resolve(i.isEqual(u&&u.key))},t.prototype.performConsistencyCheck=function(e){return ye.resolve()},t.prototype.hs=function(e,i){return this.cs(e)},t.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},t.prototype.os=function(e){var i=this.cs(e);return i<0||i>=this._n.length?null:this._n[i]},t}(),K_=function(){function t(e,i){this.Ut=e,this.ls=i,this.docs=new Ln(Pe.comparator),this.size=0}return t.prototype.addEntry=function(e,i,o){var u=i.key,l=this.docs.get(u),f=l?l.size:0,g=this.ls(i);return this.docs=this.docs.insert(u,{document:i.clone(),size:g,readTime:o}),this.size+=g-f,this.Ut.addToCollectionParentIndex(e,u.path.popLast())},t.prototype.removeEntry=function(e){var i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)},t.prototype.getEntry=function(e,i){var o=this.docs.get(i);return ye.resolve(o?o.document.clone():pn.newInvalidDocument(i))},t.prototype.getEntries=function(e,i){var o=this,u=Gr();return i.forEach(function(l){var f=o.docs.get(l);u=u.insert(l,f?f.document.clone():pn.newInvalidDocument(l))}),ye.resolve(u)},t.prototype.getDocumentsMatchingQuery=function(e,i,o){for(var u=Gr(),l=new Pe(i.path.child("")),f=this.docs.getIteratorFrom(l);f.hasNext();){var g=f.getNext(),w=g.value,E=w.document,I=w.readTime;if(!i.path.isPrefixOf(g.key.path))break;I.compareTo(o)<=0||cr(i,E)&&(u=u.insert(E.key,E.clone()))}return ye.resolve(u)},t.prototype.fs=function(e,i){return ye.forEach(this.docs,function(o){return i(o)})},t.prototype.newChangeBuffer=function(e){return new fg(this)},t.prototype.getSize=function(e){return ye.resolve(this.size)},t}(),fg=function(t){function e(i){var o=this;return(o=t.call(this)||this).Ie=i,o}return(0,T.ZT)(e,t),e.prototype.applyChanges=function(i){var o=this,u=[];return this.changes.forEach(function(l,f){f.document.isValidDocument()?u.push(o.Ie.addEntry(i,f.document,o.getReadTime(l))):o.Ie.removeEntry(l)}),ye.waitFor(u)},e.prototype.getFromCache=function(i,o){return this.Ie.getEntry(i,o)},e.prototype.getAllFromCache=function(i,o){return this.Ie.getEntries(i,o)},e}(H_),Y_=function(){function t(e){this.persistence=e,this.ds=new Gc(function(i){return Ra(i)},Ac),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.ws=0,this._s=new W_,this.targetCount=0,this.ys=Qa.Jt()}return t.prototype.forEachTarget=function(e,i){return this.ds.forEach(function(o,u){return i(u)}),ye.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return ye.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return ye.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),ye.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,i,o){return o&&(this.lastRemoteSnapshotVersion=o),i>this.ws&&(this.ws=i),ye.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var i=e.targetId;i>this.highestTargetId&&(this.ys=new Qa(i),this.highestTargetId=i),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,i){return this.te(i),this.targetCount+=1,ye.resolve()},t.prototype.updateTargetData=function(e,i){return this.te(i),ye.resolve()},t.prototype.removeTargetData=function(e,i){return this.ds.delete(i.target),this._s.Zn(i.targetId),this.targetCount-=1,ye.resolve()},t.prototype.removeTargets=function(e,i,o){var u=this,l=0,f=[];return this.ds.forEach(function(g,_){_.sequenceNumber<=i&&null===o.get(_.targetId)&&(u.ds.delete(g),f.push(u.removeMatchingKeysForTargetId(e,_.targetId)),l++)}),ye.waitFor(f).next(function(){return l})},t.prototype.getTargetCount=function(e){return ye.resolve(this.targetCount)},t.prototype.getTargetData=function(e,i){var o=this.ds.get(i)||null;return ye.resolve(o)},t.prototype.addMatchingKeys=function(e,i,o){return this._s.Jn(i,o),ye.resolve()},t.prototype.removeMatchingKeys=function(e,i,o){this._s.Xn(i,o);var u=this.persistence.referenceDelegate,l=[];return u&&i.forEach(function(f){l.push(u.markPotentiallyOrphaned(e,f))}),ye.waitFor(l)},t.prototype.removeMatchingKeysForTargetId=function(e,i){return this._s.Zn(i),ye.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,i){var o=this._s.es(i);return ye.resolve(o)},t.prototype.containsKey=function(e,i){return ye.resolve(this._s.containsKey(i))},t}(),XD=function(){function t(e,i){var o=this;this.gs={},this.Ne=new Ur(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Y_(this),this.Ut=new GD,this.Ue=new K_(this.Ut,function(f){return o.referenceDelegate.ps(f)}),this.R=new Jh(i),this.Ke=new JD(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var i=this.gs[e.toKey()];return i||(i=new CI(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=i),i},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,i,o){var u=this;be("MemoryPersistence","Starting transaction:",e);var l=new eE(this.Ne.next());return this.referenceDelegate.Es(),o(l).next(function(f){return u.referenceDelegate.Ts(l).next(function(){return f})}).toPromise().then(function(f){return l.raiseOnCommittedEvent(),f})},t.prototype.Is=function(e,i){return ye.or(Object.values(this.gs).map(function(o){return function(){return o.containsKey(e,i)}}))},t}(),eE=function(t){function e(i){var o=this;return(o=t.call(this)||this).currentSequenceNumber=i,o}return(0,T.ZT)(e,t),e}($a),tE=function(){function t(e){this.persistence=e,this.As=new W_,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Re()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,i,o){return this.As.addReference(o,i),this.vs.delete(o.toString()),ye.resolve()},t.prototype.removeReference=function(e,i,o){return this.As.removeReference(o,i),this.vs.add(o.toString()),ye.resolve()},t.prototype.markPotentiallyOrphaned=function(e,i){return this.vs.add(i.toString()),ye.resolve()},t.prototype.removeTarget=function(e,i){var o=this;this.As.Zn(i.targetId).forEach(function(l){return o.vs.add(l.toString())});var u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,i.targetId).next(function(l){l.forEach(function(f){return o.vs.add(f.toString())})}).next(function(){return u.removeTargetData(e,i)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var i=this,o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.vs,function(u){var l=Pe.fromPath(u);return i.Ps(e,l).next(function(f){f||o.removeEntry(l)})}).next(function(){return i.Rs=null,o.apply(e)})},t.prototype.updateLimboDocument=function(e,i){var o=this;return this.Ps(e,i).next(function(u){u?o.vs.delete(i.toString()):o.vs.add(i.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,i){var o=this;return ye.or([function(){return ye.resolve(o.As.containsKey(i))},function(){return o.persistence.getTargetCache().containsKey(e,i)},function(){return o.persistence.Is(e,i)}])},t}(),En=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();function Q_(t,e){return"firestore_clients_"+t+"_"+e}function Z_(t,e,i){var o="firestore_mutations_"+t+"_"+i;return e.isAuthenticated()&&(o+="_"+e.uid),o}function pg(t,e){return"firestore_targets_"+t+"_"+e}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");var J_=function(){function t(e,i,o,u){this.user=e,this.batchId=i,this.state=o,this.error=u}return t.Vs=function(e,i,o){var u,l=JSON.parse(o),f="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return f&&l.error&&(f="string"==typeof l.error.message&&"string"==typeof l.error.code)&&(u=new ge(l.error.code,l.error.message)),f?new t(e,i,l.state,u):(Lt("SharedClientState","Failed to parse mutation state for ID '"+i+"': "+o),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),gg=function(){function t(e,i,o){this.targetId=e,this.state=i,this.error=o}return t.Vs=function(e,i){var o,u=JSON.parse(i),l="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return l&&u.error&&(l="string"==typeof u.error.message&&"string"==typeof u.error.code)&&(o=new ge(u.error.code,u.error.message)),l?new t(e,u.state,o):(Lt("SharedClientState","Failed to parse target state for ID '"+e+"': "+i),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),eu=function(){function t(e,i){this.clientId=e,this.activeTargetIds=i}return t.Vs=function(e,i){for(var o=JSON.parse(i),u="object"==typeof o&&o.activeTargetIds instanceof Array,l=Pc(),f=0;u&&f<o.activeTargetIds.length;++f)u=Yv(o.activeTargetIds[f]),l=l.add(o.activeTargetIds[f]);return u?new t(e,l):(Lt("SharedClientState","Failed to parse client data for instance '"+e+"': "+i),null)},t}(),X_=function(){function t(e,i){this.clientId=e,this.onlineState=i}return t.Vs=function(e){var i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new t(i.clientId,i.onlineState):(Lt("SharedClientState","Failed to parse online state: "+e),null)},t}(),cd=function(){function t(){this.activeTargetIds=Pc()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),ld=function(){function t(e,i,o,u,l){this.window=e,this.Se=i,this.persistenceKey=o,this.Ns=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ln(lt),this.started=!1,this.$s=[];var f=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Os=Q_(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new cd),this.Ls=new RegExp("^firestore_clients_"+f+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+f+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+f+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(g){return"firestore_bundle_loaded_"+g}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o,u,l,f,g,_,w,E,S=this;return(0,T.Jh)(this,function(O){switch(O.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=O.sent(),i=0,o=e;i<o.length;i++)(u=o[i])!==this.Ns&&(l=this.getItem(Q_(this.persistenceKey,u)))&&(f=eu.Vs(u,l))&&(this.Fs=this.Fs.insert(f.clientId,f));for(this.Qs(),(g=this.storage.getItem(this.Us))&&(_=this.js(g))&&this.Ws(_),w=0,E=this.$s;w<E.length;w++)this.ks(E[w]);return this.$s=[],this.window.addEventListener("pagehide",function(){return S.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(e){var i=!1;return this.Fs.forEach(function(o,u){u.activeTargetIds.has(e)&&(i=!0)}),i},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,i,o){this.zs(e,i,o),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var i="not-current";if(this.isActiveQueryTarget(e)){var o=this.storage.getItem(pg(this.persistenceKey,e));if(o){var u=gg.Vs(e,o);u&&(i=u.state)}}return this.Js.Ds(e),this.Qs(),i},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(pg(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,i,o){this.Ys(e,i,o)},t.prototype.handleUserChange=function(e,i,o){var u=this;i.forEach(function(l){u.Hs(l)}),this.currentUser=e,o.forEach(function(l){u.addPendingMutation(l)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var i=this.storage.getItem(e);return be("SharedClientState","READ",e,i),i},t.prototype.setItem=function(e,i){be("SharedClientState","SET",e,i),this.storage.setItem(e,i)},t.prototype.removeItem=function(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.ks=function(e){var i=this,o=e;if(o.storageArea===this.storage){if(be("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Os)return void Lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,T.mG)(i,void 0,void 0,function(){var u,l,f,g,_,w;return(0,T.Jh)(this,function(E){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return u=this.ti(o.key),[2,this.ei(u,null)];if(l=this.ni(o.key,o.newValue))return[2,this.ei(l.clientId,l)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(f=this.si(o.key,o.newValue)))return[2,this.ii(f)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(g=this.ri(o.key,o.newValue)))return[2,this.oi(g)]}else if(o.key===this.Us){if(null!==o.newValue&&(_=this.js(o.newValue)))return[2,this.Ws(_)]}else if(o.key===this.Ms)(w=function(I){var S=Ur.o;if(null!=I)try{var O=JSON.parse(I);Ke("number"==typeof O),S=O}catch(V){Lt("SharedClientState","Failed to read sequence number from WebStorage",V)}return S}(o.newValue))!==Ur.o&&this.sequenceNumberHandler(w);else if(o.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(o);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,i,o){var u=new J_(this.currentUser,e,i,o),l=Z_(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Ss())},t.prototype.Hs=function(e){var i=Z_(this.persistenceKey,this.currentUser,e);this.removeItem(i)},t.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},t.prototype.Ys=function(e,i,o){var u=pg(this.persistenceKey,e),l=new gg(e,i,o);this.setItem(u,l.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var i=this.Ls.exec(e);return i?i[1]:null},t.prototype.ni=function(e,i){var o=this.ti(e);return eu.Vs(o,i)},t.prototype.si=function(e,i){var o=this.Bs.exec(e),u=Number(o[1]);return J_.Vs(new En(void 0!==o[2]?o[2]:null),u,i)},t.prototype.ri=function(e,i){var o=this.qs.exec(e),u=Number(o[1]);return gg.Vs(u,i)},t.prototype.js=function(e){return X_.Vs(e)},t.prototype.ii=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(i){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(be("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,i){var o=this,u=i?this.Fs.insert(e,i):this.Fs.remove(e),l=this.Gs(this.Fs),f=this.Gs(u),g=[],_=[];return f.forEach(function(w){l.has(w)||g.push(w)}),l.forEach(function(w){f.has(w)||_.push(w)}),this.syncEngine.hi(g,_).then(function(){o.Fs=u})},t.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var i=Pc();return e.forEach(function(o,u){i=i.unionWith(u.activeTargetIds)}),i},t}(),mg=function(){function t(){this.li=new cd,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,i,o){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,i,o){this.fi[e]=i},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new cd,Promise.resolve()},t.prototype.handleUserChange=function(e,i,o){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),e0=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),t0=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,i=this.gi;e<i.length;e++)(0,i[e])(0)},t.prototype.yi=function(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,i=this.gi;e<i.length;e++)(0,i[e])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),nE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},rE=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),iE=function(t){function e(i){var o=this;return(o=t.call(this,i)||this).forceLongPolling=i.forceLongPolling,o.autoDetectLongPolling=i.autoDetectLongPolling,o.useFetchStreams=i.useFetchStreams,o}return(0,T.ZT)(e,t),e.prototype.Fi=function(i,o,u,l){return new Promise(function(f,g){var _=new xh;_.listenOnce(Hv.COMPLETE,function(){try{switch(_.getLastErrorCode()){case wc.NO_ERROR:var E=_.getResponseJson();be("Connection","XHR received:",JSON.stringify(E)),f(E);break;case wc.TIMEOUT:be("Connection",'RPC "'+i+'" timed out'),g(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:var I=_.getStatus();if(be("Connection",'RPC "'+i+'" failed with status:',I,"response text:",_.getResponseText()),I>0){var S=_.getResponseJson().error;if(S&&S.status&&S.message){var O=(W=S.status.toLowerCase().replace(/_/g,"-"),Object.values(Y).indexOf(W)>=0?W:Y.UNKNOWN);g(new ge(O,S.message))}else g(new ge(Y.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{be("Connection",'RPC "'+i+'" completed.')}var W});var w=JSON.stringify(l);_.send(o,"POST",w,u,15)})},e.prototype.Oi=function(i,o){var u=[this.Di,"/","google.firestore.v1.Firestore","/",i,"/channel"],l=new Mh,f=dh(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new zv({})),this.ki(g.initMessageHeaders,o),(0,_t.uI)()||(0,_t.b$)()||(0,_t.d)()||(0,_t.w1)()||(0,_t.Mn)()||(0,_t.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");var _=u.join("");be("Connection","Creating WebChannel: "+_,g);var w=l.createWebChannel(_,g),E=!1,I=!1,S=new rE({Ei:function(V){I?be("Connection","Not sending because WebChannel is closed:",V):(E||(be("Connection","Opening WebChannel transport."),w.open(),E=!0),be("Connection","WebChannel sending:",V),w.send(V))},Ti:function(){return w.close()}}),O=function(V,W,se){V.listen(W,function(pe){try{se(pe)}catch(Te){setTimeout(function(){throw Te},0)}})};return O(w,Ds.EventType.OPEN,function(){I||be("Connection","WebChannel transport opened.")}),O(w,Ds.EventType.CLOSE,function(){I||(I=!0,be("Connection","WebChannel transport closed"),S.Vi())}),O(w,Ds.EventType.ERROR,function(V){I||(I=!0,Dc("Connection","WebChannel transport errored:",V),S.Vi(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),O(w,Ds.EventType.MESSAGE,function(V){var W;if(!I){var se=V.data[0];Ke(!!se);var Te=se.error||(null===(W=se[0])||void 0===W?void 0:W.error);if(Te){be("Connection","WebChannel received error:",Te);var Ee=Te.status,Ge=function(Et){var Qn=nn[Et];if(void 0!==Qn)return d_(Qn)}(Ee),Oe=Te.message;void 0===Ge&&(Ge=Y.INTERNAL,Oe="Unknown error status: "+Ee+" with message "+Te.message),I=!0,S.Vi(new ge(Ge,Oe)),w.close()}else be("Connection","WebChannel received:",se),S.Si(se)}}),O(f,$v.STAT_EVENT,function(V){V.stat===qv_PROXY?be("Connection","Detected buffering proxy"):V.stat===qv_NOPROXY&&be("Connection","Detected no buffering proxy")}),setTimeout(function(){S.Pi()},0),S},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,i,o,u){var l=this.xi(e,i);be("RestConnection","Sending: ",l,o);var f={};return this.ki(f,u),this.Fi(e,l,f,o).then(function(g){return be("RestConnection","Received: ",g),g},function(g){throw Dc("RestConnection",e+" failed with error: ",g,"url: ",l,"request:",o),g})},t.prototype.$i=function(e,i,o,u){return this.Ni(e,i,o,u)},t.prototype.ki=function(e,i){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i)for(var o in i.authHeaders)i.authHeaders.hasOwnProperty(o)&&(e[o]=i.authHeaders[o])},t.prototype.xi=function(e,i){return this.Di+"/v1/"+i+":"+nE[e]},t}());function n0(){return"undefined"!=typeof window?window:null}function hd(){return"undefined"!=typeof document?document:null}function zc(t){return new v_(t,!0)}var Rs=function(){function t(e,i,o,u,l){void 0===o&&(o=1e3),void 0===u&&(u=1.5),void 0===l&&(l=6e4),this.Se=e,this.timerId=i,this.Mi=o,this.Li=u,this.Bi=l,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var i=this;this.cancel();var o=Math.floor(this.qi+this.Wi()),u=Math.max(0,Date.now()-this.Ki),l=Math.max(0,o-u);l>0&&be("ExponentialBackoff","Backing off for "+l+" ms (base delay: "+this.qi+" ms, delay with jitter: "+o+" ms, last attempt: "+u+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,l,function(){return i.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),r0=function(){function t(e,i,o,u,l,f){this.Se=e,this.zi=o,this.Hi=u,this.Ji=l,this.listener=f,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rs(e,i)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,i){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(o){switch(o.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():i&&i.code===Y.RESOURCE_EXHAUSTED?(Lt(i.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):i&&i.code===Y.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(i)];case 1:return o.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var i=this.hr(this.Yi),o=this.Yi;this.Ji.getToken().then(function(u){e.Yi===o&&e.lr(u)},function(u){i(function(){var l=new ge(Y.UNKNOWN,"Fetching auth token failed: "+u.message);return e.dr(l)})})},t.prototype.lr=function(e){var i=this,o=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){o(function(){return i.state=2,i.listener.Ii()})}),this.stream.Ri(function(u){o(function(){return i.dr(u)})}),this.stream.onMessage(function(u){o(function(){return i.onMessage(u)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,T.mG)(e,void 0,void 0,function(){return(0,T.Jh)(this,function(i){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return be("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var i=this;return function(o){i.Se.enqueueAndForget(function(){return i.Yi===e?o():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),yg=function(t){function e(i,o,u,l,f){var g=this;return(g=t.call(this,i,"listen_stream_connection_backoff","listen_stream_idle",o,u,f)||this).R=l,g}return(0,T.ZT)(e,t),e.prototype.wr=function(i){return this.Hi.Oi("Listen",i)},e.prototype.onMessage=function(i){this.Zi.reset();var o=function(l,f){var g,se;if("targetChange"in f){var _="NO_CHANGE"===(se=f.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===se?1:"REMOVE"===se?2:"CURRENT"===se?3:"RESET"===se?4:Re(),w=f.targetChange.targetIds||[],E=function(se,pe){return se.I?(Ke(void 0===pe||"string"==typeof pe),sr.fromBase64String(pe||"")):(Ke(void 0===pe||pe instanceof Uint8Array),sr.fromUint8Array(pe||new Uint8Array))}(l,f.targetChange.resumeToken),I=(S=f.targetChange.cause)&&function(se){var pe=void 0===se.code?Y.UNKNOWN:d_(se.code);return new ge(pe,se.message||"")}(S);g=new So(_,w,E,I||null)}else if("documentChange"in f){w=Si(l,(_=f.documentChange).document.name),E=mn(_.document.updateTime);var S=new Er({mapValue:{fields:_.document.fields}}),O=(I=pn.newFoundDocument(w,E,S),_.targetIds||[]);g=new Lc(O,_.removedTargetIds||[],I.key,I)}else if("documentDelete"in f)w=Si(l,(_=f.documentDelete).document),E=_.readTime?mn(_.readTime):ot.min(),S=pn.newNoDocument(w,E),g=new Lc([],I=_.removedTargetIds||[],S.key,S);else if("documentRemove"in f)w=Si(l,(_=f.documentRemove).document),g=new Lc([],E=_.removedTargetIds||[],w,null);else{if(!("filter"in f))return Re();var W=f.filter;w=new AD(_=W.count||0),g=new qp(E=W.targetId,w)}return g}(this.R,i),u=function(l){if(!("targetChange"in l))return ot.min();var f=l.targetChange;return f.targetIds&&f.targetIds.length?ot.min():f.readTime?mn(f.readTime):ot.min()}(i);return this.listener._r(o,u)},e.prototype.mr=function(i){var l,f,g,_,o={};o.database=Mt(this.R),o.addTarget=(l=this.R,(g=Mc(_=(f=i).target)?{documents:Qp(l,_)}:{query:Zp(l,_)}).targetId=f.targetId,f.resumeToken.approximateByteSize()>0?g.resumeToken=RD(l,f.resumeToken):f.snapshotVersion.compareTo(ot.min())>0&&(g.readTime=ka(l,f.snapshotVersion.toTimestamp())),g);var u=function(l,f){var g=function(_,w){switch(w){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Re()}}(0,f.purpose);return null==g?null:{"goog-listen-tags":g}}(0,i);u&&(o.labels=u),this.cr(o)},e.prototype.yr=function(i){var o={};o.database=Mt(this.R),o.removeTarget=i,this.cr(o)},e}(r0),xi=function(t){function e(i,o,u,l,f){var g=this;return(g=t.call(this,i,"write_stream_connection_backoff","write_stream_idle",o,u,f)||this).R=l,g.gr=!1,g}return(0,T.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(i){return this.Hi.Oi("Write",i)},e.prototype.onMessage=function(i){if(Ke(!!i.streamToken),this.lastStreamToken=i.streamToken,this.gr){this.Zi.reset();var o=(f=i.commitTime,(l=i.writeResults)&&l.length>0?(Ke(void 0!==f),l.map(function(g){return w=f,(E=mn((_=g).updateTime?_.updateTime:w)).isEqual(ot.min())&&(E=mn(w)),new o_(E,_.transformResults||[]);var _,w,E})):[]),u=mn(i.commitTime);return this.listener.Tr(u,o)}var l,f;return Ke(!i.writeResults||0===i.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var i={};i.database=Mt(this.R),this.cr(i)},e.prototype.Er=function(i){var o=this,u={streamToken:this.lastStreamToken,writes:i.map(function(l){return Kh(o.R,l)})};this.cr(u)},e}(r0),oE=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).credentials=i,l.Hi=o,l.R=u,l.Rr=!1,l}return(0,T.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(i,o,u){var l=this;return this.br(),this.credentials.getToken().then(function(f){return l.Hi.Ni(i,o,u,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===Y.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new ge(Y.UNKNOWN,f.toString())})},e.prototype.$i=function(i,o,u){var l=this;return this.br(),this.credentials.getToken().then(function(f){return l.Hi.$i(i,o,u,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===Y.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new ge(Y.UNKNOWN,f.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),vg=function(){function t(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var i="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Lt(i),this.Vr=!1):be("OnlineStateTracker",i)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Wc=function(t,e,i,o,u){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=u,this.Lr.di(function(f){i.enqueueAndForget(function(){return(0,T.mG)(l,void 0,void 0,function(){return(0,T.Jh)(this,function(g){switch(g.label){case 0:return to(this)?(be("RemoteStore","Restarting streams for network reachability change."),[4,function(_){return(0,T.mG)(this,void 0,void 0,function(){var w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:return(w=De(_)).Or.add(4),[4,tu(w)];case 1:return E.sent(),w.Br.set("Unknown"),w.Or.delete(4),[4,Kc(w)];case 2:return E.sent(),[2]}})})}(this)]):[3,2];case 1:g.sent(),g.label=2;case 2:return[2]}})})})}),this.Br=new vg(i,o)};function Kc(t){return(0,T.mG)(this,void 0,void 0,function(){var e,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(!to(t))return[3,4];e=0,i=t.Mr,o.label=1;case 1:return e<i.length?[4,(0,i[e])(!0)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function tu(t){return(0,T.mG)(this,void 0,void 0,function(){var e,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:e=0,i=t.Mr,o.label=1;case 1:return e<i.length?[4,(0,i[e])(!1)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dd(t,e){var i=De(t);i.$r.has(e.targetId)||(i.$r.set(e.targetId,e),fd(i)?_g(i):Fs(i).er()&&nu(i,e))}function Ro(t,e){var i=De(t),o=Fs(i);i.$r.delete(e),o.er()&&o0(i,e),0===i.$r.size&&(o.er()?o.ir():to(i)&&i.Br.set("Unknown"))}function nu(t,e){t.qr.U(e.targetId),Fs(t).mr(e)}function o0(t,e){t.qr.U(e),Fs(t).yr(e)}function _g(t){t.qr=new ND({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Fs(t).start(),t.Br.Sr()}function fd(t){return to(t)&&!Fs(t).tr()&&t.$r.size>0}function to(t){return 0===De(t).Or.size}function pd(t){t.qr=void 0}function s0(t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return t.$r.forEach(function(i,o){nu(t,i)}),[2]})})}function sE(t,e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(i){return pd(t),fd(t)?(t.Br.Nr(e),_g(t)):t.Br.set("Unknown"),[2]})})}function aE(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:if(t.Br.set("Online"),!(e instanceof So&&2===e.state&&e.cause))return[3,6];f.label=1;case 1:return f.trys.push([1,3,,5]),[4,function(g,_){return(0,T.mG)(this,void 0,void 0,function(){var w,E,I,S;return(0,T.Jh)(this,function(O){switch(O.label){case 0:w=_.cause,E=0,I=_.targetIds,O.label=1;case 1:return E<I.length?g.$r.has(S=I[E])?[4,g.remoteSyncer.rejectListen(S,w)]:[3,3]:[3,5];case 2:O.sent(),g.$r.delete(S),g.qr.removeTarget(S),O.label=3;case 3:O.label=4;case 4:return E++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return f.sent(),[3,5];case 3:return o=f.sent(),be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),[4,bg(t,o)];case 4:return f.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Lc?t.qr.X(e):e instanceof qp?t.qr.rt(e):t.qr.et(e),i.isEqual(ot.min()))return[3,13];f.label=7;case 7:return f.trys.push([7,11,,13]),[4,q_(t.localStore)];case 8:return u=f.sent(),i.compareTo(u)>=0?[4,(g=t,_=i,w=g.qr.ut(_),w.targetChanges.forEach(function(E,I){if(E.resumeToken.approximateByteSize()>0){var S=g.$r.get(I);S&&g.$r.set(I,S.withResumeToken(E.resumeToken,_))}}),w.targetMismatches.forEach(function(E){var I=g.$r.get(E);if(I){g.$r.set(E,I.withResumeToken(sr.EMPTY_BYTE_STRING,I.snapshotVersion)),o0(g,E);var S=new Zh(I.target,E,1,I.sequenceNumber);nu(g,S)}}),g.remoteSyncer.applyRemoteEvent(w))]:[3,10];case 9:f.sent(),f.label=10;case 10:return[3,13];case 11:return be("RemoteStore","Failed to raise snapshot:",l=f.sent()),[4,bg(t,l)];case 12:return f.sent(),[3,13];case 13:return[2]}var g,_,w})})}function bg(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o=this;return(0,T.Jh)(this,function(u){switch(u.label){case 0:if(!xs(e))throw e;return t.Or.add(1),[4,tu(t)];case 1:return u.sent(),t.Br.set("Offline"),i||(i=function(){return q_(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,T.mG)(o,void 0,void 0,function(){return(0,T.Jh)(this,function(l){switch(l.label){case 0:return be("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return l.sent(),t.Or.delete(1),[4,Kc(t)];case 2:return l.sent(),[2]}})})}),[2]}})})}function gd(t,e){return e().catch(function(i){return bg(t,i,e)})}function Fo(t){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o,u,l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:e=De(t),i=Ni(e),o=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,f.label=1;case 1:if(!(to(g=e)&&g.Fr.length<10))return[3,7];f.label=2;case 2:return f.trys.push([2,4,,6]),[4,ZD(e.localStore,o)];case 3:return null===(u=f.sent())?(0===e.Fr.length&&i.ir(),[3,7]):(o=u.batchId,function(g,_){g.Fr.push(_);var w=Ni(g);w.er()&&w.pr&&w.Er(_.mutations)}(e,u),[3,6]);case 4:return l=f.sent(),[4,bg(e,l)];case 5:return f.sent(),[3,6];case 6:return[3,1];case 7:return wg(e)&&md(e),[2]}var g})})}function wg(t){return to(t)&&!Ni(t).tr()&&t.Fr.length>0}function md(t){Ni(t).start()}function Dg(t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return Ni(t).Ar(),[2]})})}function uE(t){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o;return(0,T.Jh)(this,function(l){for(e=Ni(t),i=0,o=t.Fr;i<o.length;i++)e.Er(o[i].mutations);return[2]})})}function cE(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return o=t.Fr.shift(),u=x_.from(o,e,i),[4,gd(t,function(){return t.remoteSyncer.applySuccessfulWrite(u)})];case 1:return l.sent(),[4,Fo(t)];case 2:return l.sent(),[2]}})})}function lE(t,e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(i){switch(i.label){case 0:return e&&Ni(t).pr?[4,function(o,u){return(0,T.mG)(this,void 0,void 0,function(){var l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:return h_(f=u.code)&&f!==Y.ABORTED?(l=o.Fr.shift(),Ni(o).sr(),[4,gd(o,function(){return o.remoteSyncer.rejectFailedWrite(l.batchId,u)})]):[3,3];case 1:return g.sent(),[4,Fo(o)];case 2:g.sent(),g.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return wg(t)&&md(t),[2]}})})}function Eg(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return i=De(t),e?(i.Or.delete(2),[4,Kc(i)]):[3,2];case 1:return o.sent(),[3,5];case 2:return e?[3,4]:(i.Or.add(2),[4,tu(i)]);case 3:o.sent(),i.Br.set("Unknown"),o.label=4;case 4:o.label=5;case 5:return[2]}})})}function Fs(t){var i,o,u,l,e=this;return t.Ur||(t.Ur=(i=t.datastore,o=t.asyncQueue,u={Ii:s0.bind(null,t),Ri:sE.bind(null,t),_r:aE.bind(null,t)},(l=De(i)).br(),new yg(o,l.Hi,l.credentials,l.R,u)),t.Mr.push(function(i){return(0,T.mG)(e,void 0,void 0,function(){return(0,T.Jh)(this,function(o){switch(o.label){case 0:return i?(t.Ur.sr(),fd(t)?_g(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:o.sent(),pd(t),o.label=3;case 3:return[2]}})})})),t.Ur}function Ni(t){var i,o,u,l,e=this;return t.Kr||(t.Kr=(i=t.datastore,o=t.asyncQueue,u={Ii:Dg.bind(null,t),Ri:lE.bind(null,t),Ir:uE.bind(null,t),Tr:cE.bind(null,t)},(l=De(i)).br(),new xi(o,l.Hi,l.credentials,l.R,u)),t.Mr.push(function(i){return(0,T.mG)(e,void 0,void 0,function(){return(0,T.Jh)(this,function(o){switch(o.label){case 0:return i?(t.Kr.sr(),[4,Fo(t)]):[3,2];case 1:return o.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:o.sent(),t.Fr.length>0&&(be("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),o.label=4;case 4:return[2]}})})})),t.Kr}var a0=function(){function t(e,i,o,u,l){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=o,this.op=u,this.removalCallback=l,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(f){})}return t.createAndSchedule=function(e,i,o,u,l){var f=new t(e,i,Date.now()+o,u,l);return f.start(o),f},t.prototype.start=function(e){var i=this;this.timerHandle=setTimeout(function(){return i.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(i){return e.deferred.resolve(i)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ru(t,e){if(Lt("AsyncQueue",e+": "+t),xs(t))return new ge(Y.UNAVAILABLE,e+": "+t);throw t}var Cg=function(){function t(e){this.comparator=e?function(i,o){return e(i,o)||Pe.comparator(i.key,o.key)}:function(i,o){return Pe.comparator(i.key,o.key)},this.keyedMap=qh(),this.sortedSet=new Ln(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return null!=this.keyedMap.get(e)},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(i,o){return e(i),!1})},t.prototype.add=function(e){var i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))},t.prototype.delete=function(e){var i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();i.hasNext();){var u=i.getNext().key,l=o.getNext().key;if(!u.isEqual(l))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(i){e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},t.prototype.copy=function(e,i){var o=new t;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=i,o},t}(),Ig=function(){function t(){this.Qr=new Ln(Pe.comparator)}return t.prototype.track=function(e){var i=e.doc.key,o=this.Qr.get(i);o?0!==e.type&&3===o.type?this.Qr=this.Qr.insert(i,e):3===e.type&&1!==o.type?this.Qr=this.Qr.insert(i,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Qr=this.Qr.insert(i,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Qr=this.Qr.insert(i,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Qr=this.Qr.remove(i):1===e.type&&2===o.type?this.Qr=this.Qr.insert(i,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Qr=this.Qr.insert(i,{type:2,doc:e.doc}):Re():this.Qr=this.Qr.insert(i,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(i,o){e.push(o)}),e},t}(),yd=function(){function t(e,i,o,u,l,f,g,_){this.query=e,this.docs=i,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=_}return t.fromInitialDocuments=function(e,i,o,u){var l=[];return i.forEach(function(f){l.push({type:0,doc:f})}),new t(e,i,Cg.emptySet(i),l,o,u,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ur(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var i=this.docChanges,o=e.docChanges;if(i.length!==o.length)return!1;for(var u=0;u<i.length;u++)if(i[u].type!==o[u].type||!i[u].doc.isEqual(o[u].doc))return!1;return!0},t}(),u0=function(){this.Wr=void 0,this.listeners=[]},c0=function(){this.queries=new Gc(function(t){return n_(t)},ur),this.onlineState="Unknown",this.Gr=new Set};function Tg(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u,l,f,g,_;return(0,T.Jh)(this,function(w){switch(w.label){case 0:if(i=De(t),u=!1,(l=i.queries.get(o=e.query))||(u=!0,l=new u0),!u)return[3,4];w.label=1;case 1:return w.trys.push([1,3,,4]),f=l,[4,i.onListen(o)];case 2:return f.Wr=w.sent(),[3,4];case 3:return g=w.sent(),_=ru(g,"Initialization of query '"+Lp(e.query)+"' failed"),[2,void e.onError(_)];case 4:return i.queries.set(o,l),l.listeners.push(e),e.zr(i.onlineState),l.Wr&&e.Hr(l.Wr)&&Po(i),[2]}})})}function vd(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u,l,f;return(0,T.Jh)(this,function(g){return i=De(t),u=!1,(l=i.queries.get(o=e.query))&&(f=l.listeners.indexOf(e))>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length),u?[2,(i.queries.delete(o),i.onUnlisten(o))]:[2]})})}function hE(t,e){for(var i=De(t),o=!1,u=0,l=e;u<l.length;u++){var f=l[u],_=i.queries.get(f.query);if(_){for(var w=0,E=_.listeners;w<E.length;w++)E[w].Hr(f)&&(o=!0);_.Wr=f}}o&&Po(i)}function Wn(t,e,i){var o=De(t),u=o.queries.get(e);if(u)for(var l=0,f=u.listeners;l<f.length;l++)f[l].onError(i);o.queries.delete(e)}function Po(t){t.Gr.forEach(function(e){e.next()})}var Sg=function(){function t(e,i,o){this.query=e,this.Jr=i,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=o||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var i=[],o=0,u=e.docChanges;o<u.length;o++){var l=u[o];3!==l.type&&i.push(l)}e=new yd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var f=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),f=!0):this.eo(e,this.onlineState)&&(this.no(e),f=!0),this.Xr=e,f},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var i=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),i=!0),i},t.prototype.eo=function(e,i){return!e.fromCache||!(this.options.so&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)},t.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}(),dE=function(){function t(e,i){this.payload=e,this.byteLength=i}return t.prototype.io=function(){return"metadata"in this.payload},t}(),fE=function(){function t(e){this.R=e}return t.prototype.qn=function(e){return Si(this.R,e)},t.prototype.Un=function(e){return e.metadata.exists?b_(this.R,e.document,!1):pn.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},t.prototype.Kn=function(e){return mn(e)},t}();!function(){function t(e,i,o){this.ro=e,this.localStore=i,this.R=o,this.queries=[],this.documents=[],this.progress=function l0(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(e)}t.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var i=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null},t.prototype.co=function(e){for(var i=new Map,o=new fE(this.R),u=0,l=e;u<l.length;u++){var f=l[u];if(f.metadata.queries)for(var g=o.qn(f.metadata.name),_=0,w=f.metadata.queries;_<w.length;_++){var E=w[_],I=(i.get(E)||Ct()).add(g);i.set(E,I)}}return i},t.prototype.complete=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o,u,l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return[4,EI(this.localStore,new fE(this.R),this.documents,this.ro.id)];case 1:e=f.sent(),i=this.co(this.documents),o=0,u=this.queries,f.label=2;case 2:return o<u.length?[4,z_(this.localStore,l=u[o],i.get(l.name))]:[3,5];case 3:f.sent(),f.label=4;case 4:return o++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $_(Object.assign({},this.progress),e))]}})})}}();var _d=function(t){this.key=t},h0=function(t){this.key=t},Ag=function(){function t(e,i){this.query=e,this.uo=i,this.ao=null,this.current=!1,this.ho=Ct(),this.mutatedKeys=Ct(),this.lo=Br(e),this.fo=new Cg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,i){var o=this,u=i?i.mo:new Ig,l=i?i.fo:this.fo,f=i?i.mutatedKeys:this.mutatedKeys,g=l,_=!1,w=Lh(this.query)&&l.size===this.query.limit?l.last():null,E=kh(this.query)&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(function(S,O){var V=l.get(S),W=cr(o.query,O)?O:null,se=!!V&&o.mutatedKeys.has(V.key),pe=!!W&&(W.hasLocalMutations||o.mutatedKeys.has(W.key)&&W.hasCommittedMutations),Te=!1;V&&W?V.data.isEqual(W.data)?se!==pe&&(u.track({type:3,doc:W}),Te=!0):o.yo(V,W)||(u.track({type:2,doc:W}),Te=!0,(w&&o.lo(W,w)>0||E&&o.lo(W,E)<0)&&(_=!0)):!V&&W?(u.track({type:0,doc:W}),Te=!0):V&&!W&&(u.track({type:1,doc:V}),Te=!0,(w||E)&&(_=!0)),Te&&(W?(g=g.add(W),f=pe?f.add(S):f.delete(S)):(g=g.delete(S),f=f.delete(S)))}),Lh(this.query)||kh(this.query))for(;g.size>this.query.limit;){var I=Lh(this.query)?g.last():g.first();g=g.delete(I.key),f=f.delete(I.key),u.track({type:1,doc:I})}return{fo:g,mo:u,Nn:_,mutatedKeys:f}},t.prototype.yo=function(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations},t.prototype.applyChanges=function(e,i,o){var u=this,l=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var f=e.mo.jr();f.sort(function(E,I){return O=I.type,(V=function(W){switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}})(E.type)-V(O)||u.lo(E.doc,I.doc);var O,V}),this.po(o);var g=i?this.Eo():[],_=0===this.ho.size&&this.current?1:0,w=_!==this.ao;return this.ao=_,0!==f.length||w?{snapshot:new yd(this.query,e.fo,l,f,e.mutatedKeys,0===_,w,!1),To:g}:{To:g}},t.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ig,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var i=this;e&&(e.addedDocuments.forEach(function(o){return i.uo=i.uo.add(o)}),e.modifiedDocuments.forEach(function(o){}),e.removedDocuments.forEach(function(o){return i.uo=i.uo.delete(o)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var i=this.ho;this.ho=Ct(),this.fo.forEach(function(u){e.Io(u.key)&&(e.ho=e.ho.add(u.key))});var o=[];return i.forEach(function(u){e.ho.has(u)||o.push(new h0(u))}),this.ho.forEach(function(u){i.has(u)||o.push(new _d(u))}),o},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Ct();var i=this._o(e.documents);return this.applyChanges(i,!0)},t.prototype.Ro=function(){return yd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),pE=function(t,e,i){this.query=t,this.targetId=e,this.view=i},gE=function(t){this.key=t,this.bo=!1},Mg=function(){function t(e,i,o,u,l,f){this.localStore=e,this.remoteStore=i,this.eventManager=o,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.vo={},this.Po=new Gc(function(g){return n_(g)},ur),this.Vo=new Map,this.So=new Set,this.Do=new Ln(Pe.comparator),this.Co=new Map,this.No=new W_,this.xo={},this.ko=new Map,this.Fo=Qa.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function d0(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,u,l,f,g;return(0,T.Jh)(this,function(_){switch(_.label){case 0:return i=Pg(t),(l=i.Po.get(e))?(i.sharedClientState.addLocalQueryTarget(l.targetId),u=l.view.Ro(),[3,4]):[3,1];case 1:return[4,qc(i.localStore,Cr(e))];case 2:return f=_.sent(),g=i.sharedClientState.addLocalQueryTarget(f.targetId),[4,bd(i,e,f.targetId,"current"===g)];case 3:u=_.sent(),i.isPrimaryClient&&dd(i.remoteStore,f),_.label=4;case 4:return[2,u]}})})}function bd(t,e,i,o){return(0,T.mG)(this,void 0,void 0,function(){var u,l,f,g,_,w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:return t.Oo=function(I,S,O){return function(V,W,se,pe){return(0,T.mG)(this,void 0,void 0,function(){var Te,Ee,Ge;return(0,T.Jh)(this,function(Oe){switch(Oe.label){case 0:return(Te=W.view._o(se)).Nn?[4,ud(V.localStore,W.query,!1).then(function(Et){return W.view._o(Et.documents,Te)})]:[3,2];case 1:Te=Oe.sent(),Oe.label=2;case 2:return Ee=pe&&pe.targetChanges.get(W.targetId),Ge=W.view.applyChanges(Te,V.isPrimaryClient,Ee),[2,(Rg(V,W.targetId,Ge.To),Ge.snapshot)]}})})}(t,I,S,O)},[4,ud(t.localStore,e,!0)];case 1:return u=E.sent(),l=new Ag(e,u.Bn),f=l._o(u.documents),g=Wh.createSynthesizedTargetChangeForCurrentChange(i,o&&"Offline"!==t.onlineState),_=l.applyChanges(f,t.isPrimaryClient,g),Rg(t,i,_.To),w=new pE(e,i,l),[2,(t.Po.set(e,w),t.Vo.has(i)?t.Vo.get(i).push(e):t.Vo.set(i,[e]),_.snapshot)]}})})}function wd(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return i=De(t),o=i.Po.get(e),(u=i.Vo.get(o.targetId)).length>1?[2,(i.Vo.set(o.targetId,u.filter(function(f){return!ur(f,e)})),void i.Po.delete(e))]:i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)?[3,2]:[4,Ja(i.localStore,o.targetId,!1).then(function(){i.sharedClientState.clearQueryState(o.targetId),Ro(i.remoteStore,o.targetId),Lo(i,o.targetId)}).catch(eo)]):[3,3];case 1:l.sent(),l.label=2;case 2:return[3,5];case 3:return Lo(i,o.targetId),[4,Ja(i.localStore,o.targetId,!0)];case 4:l.sent(),l.label=5;case 5:return[2]}})})}function xg(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:o=Lg(t),g.label=1;case 1:return g.trys.push([1,5,,6]),[4,(_=o.localStore,w=e,I=De(_),S=or.now(),O=w.reduce(function(V,W){return V.add(W.key)},Ct()),I.persistence.runTransaction("Locally write mutations","readwrite",function(V){return I.Mn.pn(V,O).next(function(W){E=W;for(var se=[],pe=0,Te=w;pe<Te.length;pe++){var Ee=Te[pe],Ge=a_(Ee,E.get(Ee.key));null!=Ge&&se.push(new Qi(Ee.key,Ge,Qv(Ge.value.mapValue),gn.exists(!0)))}return I._n.addMutationBatch(V,S,se,w)})}).then(function(V){return V.applyToLocalDocumentSet(E),{batchId:V.batchId,changes:E}}))];case 2:return u=g.sent(),o.sharedClientState.addPendingMutation(u.batchId),function(_,w,E){var I=_.xo[_.currentUser.toKey()];I||(I=new Ln(lt)),I=I.insert(w,E),_.xo[_.currentUser.toKey()]=I}(o,u.batchId,i),[4,Oi(o,u.changes)];case 3:return g.sent(),[4,Fo(o.remoteStore)];case 4:return g.sent(),[3,6];case 5:return l=g.sent(),f=ru(l,"Failed to persist write"),i.reject(f),[3,6];case 6:return[2]}var _,w,E,I,S,O})})}function mE(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o;return(0,T.Jh)(this,function(u){switch(u.label){case 0:i=De(t),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,QD(i.localStore,e)];case 2:return o=u.sent(),e.targetChanges.forEach(function(l,f){var g=i.Co.get(f);g&&(Ke(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?g.bo=!0:l.modifiedDocuments.size>0?Ke(g.bo):l.removedDocuments.size>0&&(Ke(g.bo),g.bo=!1))}),[4,Oi(i,o,e)];case 3:return u.sent(),[3,6];case 4:return[4,eo(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function Ng(t,e,i){var o=De(t);if(o.isPrimaryClient&&0===i||!o.isPrimaryClient&&1===i){var u=[];o.Po.forEach(function(l,f){var g=f.view.zr(e);g.snapshot&&u.push(g.snapshot)}),function(l,f){var g=De(l);g.onlineState=f;var _=!1;g.queries.forEach(function(w,E){for(var I=0,S=E.listeners;I<S.length;I++)S[I].zr(f)&&(_=!0)}),_&&Po(g)}(o.eventManager,e),u.length&&o.vo._r(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function yE(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f,g,_;return(0,T.Jh)(this,function(w){switch(w.label){case 0:return(o=De(t)).sharedClientState.updateQueryState(e,"rejected",i),u=o.Co.get(e),(l=u&&u.key)?(f=(f=new Ln(Pe.comparator)).insert(l,pn.newNoDocument(l,ot.min())),g=Ct().add(l),_=new zh(ot.min(),new Map,new sn(lt),f,g),[4,mE(o,_)]):[3,2];case 1:return w.sent(),o.Do=o.Do.remove(l),o.Co.delete(e),Ed(o),[3,4];case 2:return[4,Ja(o.localStore,e,!1).then(function(){return Lo(o,e,i)}).catch(eo)];case 3:w.sent(),w.label=4;case 4:return[2]}})})}function f0(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:i=De(t),o=e.batch.batchId,l.label=1;case 1:return l.trys.push([1,4,,6]),[4,YD(i.localStore,e)];case 2:return u=l.sent(),Qc(i,o,null),Og(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),[4,Oi(i,u)];case 3:return l.sent(),[3,6];case 4:return[4,eo(l.sent())];case 5:return l.sent(),[3,6];case 6:return[2]}})})}function Dd(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:o=De(t),l.label=1;case 1:return l.trys.push([1,4,,6]),[4,(f=o.localStore,g=e,_=De(f),_.persistence.runTransaction("Reject batch","readwrite-primary",function(w){var E;return _._n.lookupMutationBatch(w,g).next(function(I){return Ke(null!==I),E=I.keys(),_._n.removeMutationBatch(w,I)}).next(function(){return _._n.performConsistencyCheck(w)}).next(function(){return _.Mn.pn(w,E)})}))];case 2:return u=l.sent(),Qc(o,e,i),Og(o,e),o.sharedClientState.updateMutationState(e,"rejected",i),[4,Oi(o,u)];case 3:return l.sent(),[3,6];case 4:return[4,eo(l.sent())];case 5:return l.sent(),[3,6];case 6:return[2]}var f,g,_})})}function p0(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u,l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:to((i=De(t)).remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,(_=i.localStore,w=De(_),w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(E){return w._n.getHighestUnacknowledgedBatchId(E)}))];case 2:return-1===(o=g.sent())?[2,void e.resolve()]:((u=i.ko.get(o)||[]).push(e),i.ko.set(o,u),[3,4]);case 3:return l=g.sent(),f=ru(l,"Initialization of waitForPendingWrites() operation failed"),e.reject(f),[3,4];case 4:return[2]}var _,w})})}function Og(t,e){(t.ko.get(e)||[]).forEach(function(i){i.resolve()}),t.ko.delete(e)}function Qc(t,e,i){var o=De(t),u=o.xo[o.currentUser.toKey()];if(u){var l=u.get(e);l&&(i?l.reject(i):l.resolve(),u=u.remove(e)),o.xo[o.currentUser.toKey()]=u}}function Lo(t,e,i){void 0===i&&(i=null),t.sharedClientState.removeLocalQueryTarget(e);for(var o=0,u=t.Vo.get(e);o<u.length;o++){var l=u[o];t.Po.delete(l),i&&t.vo.Mo(l,i)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(f){t.No.containsKey(f)||vE(t,f)})}function vE(t,e){t.So.delete(e.path.canonicalString());var i=t.Do.get(e);null!==i&&(Ro(t.remoteStore,i),t.Do=t.Do.remove(e),t.Co.delete(i),Ed(t))}function Rg(t,e,i){for(var o=0,u=i;o<u.length;o++){var l=u[o];l instanceof _d?(t.No.addReference(l.key,e),_E(t,l)):l instanceof h0?(be("SyncEngine","Document no longer in limbo: "+l.key),t.No.removeReference(l.key,e),t.No.containsKey(l.key)||vE(t,l.key)):Re()}}function _E(t,e){var i=e.key,o=i.path.canonicalString();t.Do.get(i)||t.So.has(o)||(be("SyncEngine","New document in limbo: "+i),t.So.add(o),Ed(t))}function Ed(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var i=new Pe(gt.fromString(e)),o=t.Fo.next();t.Co.set(o,new gE(i)),t.Do=t.Do.insert(i,o),dd(t.remoteStore,new Zh(Cr(oi(i.path)),o,2,Ur.o))}}function Oi(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:return o=De(t),u=[],l=[],f=[],o.Po.isEmpty()?[3,3]:(o.Po.forEach(function(_,w){f.push(o.Oo(w,e,i).then(function(E){if(E){o.isPrimaryClient&&o.sharedClientState.updateQueryState(w.targetId,E.fromCache?"not-current":"current"),u.push(E);var I=sd.Pn(w.targetId,E);l.push(I)}}))}),[4,Promise.all(f)]);case 1:return g.sent(),o.vo._r(u),[4,function(_,w){return(0,T.mG)(this,void 0,void 0,function(){var E,I,S,O,V,W,se,Te;return(0,T.Jh)(this,function(Ee){switch(Ee.label){case 0:E=De(_),Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,E.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Ge){return ye.forEach(w,function(Oe){return ye.forEach(Oe.bn,function(Et){return E.persistence.referenceDelegate.addReference(Ge,Oe.targetId,Et)}).next(function(){return ye.forEach(Oe.vn,function(Et){return E.persistence.referenceDelegate.removeReference(Ge,Oe.targetId,Et)})})})})];case 2:return Ee.sent(),[3,4];case 3:if(!xs(I=Ee.sent()))throw I;return be("LocalStore","Failed to update sequence numbers: "+I),[3,4];case 4:for(S=0,O=w;S<O.length;S++)W=(V=O[S]).targetId,V.fromCache||(se=E.kn.get(W),Te=se.withLastLimboFreeSnapshotVersion(se.snapshotVersion),E.kn=E.kn.insert(W,Te));return[2]}})})}(o.localStore,l)];case 2:g.sent(),g.label=3;case 3:return[2]}})})}function bE(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return(i=De(t)).currentUser.isEqual(e)?[3,3]:(be("SyncEngine","User change. New user:",e.toKey()),[4,hg(i.localStore,e)]);case 1:return o=u.sent(),i.currentUser=e,(l=i).ko.forEach(function(g){g.forEach(function(_){_.reject(new ge(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ko.clear(),i.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),[4,Oi(i,o.Ln)];case 2:u.sent(),u.label=3;case 3:return[2]}var l})})}function g0(t,e){var i=De(t),o=i.Co.get(e);if(o&&o.bo)return Ct().add(o.key);var u=Ct(),l=i.Vo.get(e);if(!l)return u;for(var f=0,g=l;f<g.length;f++){var w=i.Po.get(g[f]);u=u.unionWith(w.view.wo)}return u}function m0(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,ud((i=De(t)).localStore,e.query,!0)];case 1:return o=l.sent(),u=e.view.Ao(o),[2,(i.isPrimaryClient&&Rg(i,e.targetId,u.To),u)]}})})}function wE(t){return(0,T.mG)(this,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(i){return[2,dg((e=De(t)).localStore).then(function(o){return Oi(e,o)})]})})}function DE(t,e,i,o){return(0,T.mG)(this,void 0,void 0,function(){var u,l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return[4,(g=(u=De(t)).localStore,_=e,w=De(g),E=De(w._n),w.persistence.runTransaction("Lookup mutation documents","readonly",function(I){return E.jt(I,_).next(function(S){return S?w.Mn.pn(I,S):ye.resolve(null)})}))];case 1:return null===(l=f.sent())?[3,6]:"pending"!==i?[3,3]:[4,Fo(u.remoteStore)];case 2:return f.sent(),[3,4];case 3:"acknowledged"===i||"rejected"===i?(Qc(u,e,o||null),Og(u,e),function(g,_){De(De(g)._n).Gt(_)}(u.localStore,e)):Re(),f.label=4;case 4:return[4,Oi(u,l)];case 5:return f.sent(),[3,7];case 6:be("SyncEngine","Cannot apply mutation batch with id: "+e),f.label=7;case 7:return[2]}var g,_,w,E})})}function y0(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u,l,f,_,w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:return Pg(i=De(t)),Lg(i),!0!==e||!0===i.$o?[3,3]:(o=i.sharedClientState.getAllActiveQueryTargets(),[4,v0(i,o.toArray())]);case 1:return u=E.sent(),i.$o=!0,[4,Eg(i.remoteStore,!0)];case 2:for(E.sent(),l=0,f=u;l<f.length;l++)dd(i.remoteStore,f[l]);return[3,7];case 3:return!1!==e||!1===i.$o?[3,7]:(_=[],w=Promise.resolve(),i.Vo.forEach(function(I,S){i.sharedClientState.isLocalQueryTarget(S)?_.push(S):w=w.then(function(){return Lo(i,S),Ja(i.localStore,S,!0)}),Ro(i.remoteStore,S)}),[4,w]);case 4:return E.sent(),[4,v0(i,_)];case 5:return E.sent(),(S=De(i)).Co.forEach(function(O,V){Ro(S.remoteStore,V)}),S.No.ts(),S.Co=new Map,S.Do=new Ln(Pe.comparator),i.$o=!1,[4,Eg(i.remoteStore,!1)];case 6:E.sent(),E.label=7;case 7:return[2]}var S})})}function v0(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f,g,_,w,E,I,S,V,W,se;return(0,T.Jh)(this,function(pe){switch(pe.label){case 0:o=De(t),u=[],l=[],f=0,g=e,pe.label=1;case 1:return f<g.length?(w=void 0,(E=o.Vo.get(_=g[f]))&&0!==E.length?[4,qc(o.localStore,Cr(E[0]))]:[3,7]):[3,13];case 2:w=pe.sent(),I=0,S=E,pe.label=3;case 3:return I<S.length?(V=o.Po.get(S[I]),[4,m0(o,V)]):[3,6];case 4:(W=pe.sent()).snapshot&&l.push(W.snapshot),pe.label=5;case 5:return I++,[3,3];case 6:return[3,11];case 7:return[4,Os(o.localStore,_)];case 8:return se=pe.sent(),[4,qc(o.localStore,se)];case 9:return w=pe.sent(),[4,bd(o,Fg(se),_,!1)];case 10:pe.sent(),pe.label=11;case 11:u.push(w),pe.label=12;case 12:return f++,[3,1];case 13:return[2,(o.vo._r(l),u)]}})})}function Fg(t){return Fp(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _0(t){var e=De(t);return De(De(e.localStore).persistence).fn()}function b0(t,e,i,o){return(0,T.mG)(this,void 0,void 0,function(){var u,l,f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:return(u=De(t)).$o?(be("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!u.Vo.has(e))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,dg(u.localStore)];case 3:return l=g.sent(),f=zh.createSynthesizedRemoteEventForCurrentChange(e,"current"===i),[4,Oi(u,l,f)];case 4:return g.sent(),[3,8];case 5:return[4,Ja(u.localStore,e,!0)];case 6:return g.sent(),Lo(u,e,o),[3,8];case 7:Re(),g.label=8;case 8:return[2]}})})}function w0(t,e,i){return(0,T.mG)(this,void 0,void 0,function(){var o,u,l,f,g,_,w,E,I;return(0,T.Jh)(this,function(O){switch(O.label){case 0:if(!(o=Pg(t)).$o)return[3,10];u=0,l=e,O.label=1;case 1:return u<l.length?o.Vo.has(f=l[u])?(be("SyncEngine","Adding an already active target "+f),[3,5]):[4,Os(o.localStore,f)]:[3,6];case 2:return g=O.sent(),[4,qc(o.localStore,g)];case 3:return _=O.sent(),[4,bd(o,Fg(g),_.targetId,!1)];case 4:O.sent(),dd(o.remoteStore,_),O.label=5;case 5:return u++,[3,1];case 6:w=function(V){return(0,T.Jh)(this,function(W){switch(W.label){case 0:return o.Vo.has(V)?[4,Ja(o.localStore,V,!1).then(function(){Ro(o.remoteStore,V),Lo(o,V)}).catch(eo)]:[3,2];case 1:W.sent(),W.label=2;case 2:return[2]}})},E=0,I=i,O.label=7;case 7:return E<I.length?[5,w(I[E])]:[3,10];case 8:O.sent(),O.label=9;case 9:return E++,[3,7];case 10:return[2]}})})}function Pg(t){var e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yE.bind(null,e),e.vo._r=hE.bind(null,e.eventManager),e.vo.Mo=Wn.bind(null,e.eventManager),e}function Lg(t){var e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dd.bind(null,e),e}var kg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(i){switch(i.label){case 0:return this.R=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return i.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return lg(this.persistence,new Za,e.initialUser,this.R)},t.prototype.qo=function(e){return new XD(tE.bs,this.R)},t.prototype.Bo=function(e){return new mg},t.prototype.terminate=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),EE=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).Qo=i,l.cacheSizeBytes=o,l.forceOwnership=u,l.synchronizeTabs=!1,l}return(0,T.ZT)(e,t),e.prototype.initialize=function(i){return(0,T.mG)(this,void 0,void 0,function(){var o=this;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return[4,t.prototype.initialize.call(this,i)];case 1:return u.sent(),[4,Xa(this.localStore)];case 2:return u.sent(),[4,this.Qo.initialize(this,i)];case 3:return u.sent(),[4,Lg(this.Qo.syncEngine)];case 4:return u.sent(),[4,Fo(this.Qo.remoteStore)];case 5:return u.sent(),[4,this.persistence.He(function(){return o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()})];case 6:return u.sent(),[2]}})})},e.prototype.Ko=function(i){return lg(this.persistence,new Za,i.initialUser,this.R)},e.prototype.Uo=function(i){return new $D(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue)},e.prototype.qo=function(i){var o=id(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?ui.withCacheSize(this.cacheSizeBytes):ui.DEFAULT;return new WD(this.synchronizeTabs,o,i.clientId,u,i.asyncQueue,n0(),hd(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(i){return new mg},e}(kg),TI=function(t){function e(i,o){var u=this;return(u=t.call(this,i,o,!1)||this).Qo=i,u.cacheSizeBytes=o,u.synchronizeTabs=!0,u}return(0,T.ZT)(e,t),e.prototype.initialize=function(i){return(0,T.mG)(this,void 0,void 0,function(){var o,u=this;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,t.prototype.initialize.call(this,i)];case 1:return l.sent(),o=this.Qo.syncEngine,this.sharedClientState instanceof ld?(this.sharedClientState.syncEngine={ui:DE.bind(null,o),ai:b0.bind(null,o),hi:w0.bind(null,o),fn:_0.bind(null,o),ci:wE.bind(null,o)},[4,this.sharedClientState.start()]):[3,3];case 2:l.sent(),l.label=3;case 3:return[4,this.persistence.He(function(f){return(0,T.mG)(u,void 0,void 0,function(){return(0,T.Jh)(this,function(g){switch(g.label){case 0:return[4,y0(this.Qo.syncEngine,f)];case 1:return g.sent(),this.gcScheduler&&(f&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):f||this.gcScheduler.stop()),[2]}})})})];case 4:return l.sent(),[2]}})})},e.prototype.Bo=function(i){var o=n0();if(!ld.yt(o))throw new ge(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var u=id(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey);return new ld(o,i.asyncQueue,u,i.clientId,i.initialUser)},e}(EE),D0=function(){function t(){}return t.prototype.initialize=function(e,i){return(0,T.mG)(this,void 0,void 0,function(){var o=this;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(l){return Ng(o.syncEngine,l,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bE.bind(null,this.syncEngine),[4,Eg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:u.sent(),u.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new c0},t.prototype.createDatastore=function(e){var o=zc(e.databaseInfo.databaseId),u=new iE(e.databaseInfo);return new oE(e.credentials,u,o)},t.prototype.createRemoteStore=function(e){var i,o,u,l,f,g=this;return i=this.localStore,o=this.datastore,u=e.asyncQueue,l=function(_){return Ng(g.syncEngine,_,0)},f=t0.yt()?new t0:new e0,new Wc(i,o,u,l,f)},t.prototype.createSyncEngine=function(e,i){return w=i,E=new Mg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),w&&(E.$o=!0),E;var w,E},t.prototype.terminate=function(){return function(e){return(0,T.mG)(this,void 0,void 0,function(){var i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return i=De(e),be("RemoteStore","RemoteStore shutting down."),i.Or.add(5),[4,tu(i)];case 1:return o.sent(),i.Lr.shutdown(),i.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Vg=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,i){var o=this;this.muted||setTimeout(function(){o.muted||e(i)},0)},t}(),AI=(function(){function t(e,i){var o=this;this.Go=e,this.R=i,this.metadata=new Vn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(u){u&&u.io()?o.metadata.resolve(u.payload.metadata):o.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==u?void 0:u.payload)))},function(u){return o.metadata.reject(u)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i,o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Jo()];case 1:return null===(e=l.sent())?[2,null]:(i=this.zo.decode(e),o=Number(i),isNaN(o)&&this.Yo("length string ("+i+") is not valid number"),[4,this.Xo(o)]);case 2:return u=l.sent(),[2,new dE(JSON.parse(u),e.length+o)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(o.sent())return[3,3];o.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),i=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),i)])}})})},t.prototype.Xo=function(e){return(0,T.mG)(this,void 0,void 0,function(){var i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:o.sent()&&this.Yo("Reached the end of bundle when more is expected."),o.label=2;case 2:return[3,0];case 3:return i=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),i)]}})})},t.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},t.prototype.tc=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return[4,this.Go.read()];case 1:return(e=o.sent()).done||((i=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),i.set(e.value,this.buffer.length),this.buffer=i),[2,e.done]}})})}}(),function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return(0,T.mG)(this,void 0,void 0,function(){var i,o=this;return(0,T.Jh)(this,function(u){switch(u.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ge(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(l,f){return(0,T.mG)(this,void 0,void 0,function(){var g,_,w,E,I,S;return(0,T.Jh)(this,function(O){switch(O.label){case 0:return g=De(l),_=Mt(g.R)+"/documents",w={documents:f.map(function(V){return Ao(g.R,V)})},[4,g.$i("BatchGetDocuments",_,w)];case 1:return E=O.sent(),I=new Map,E.forEach(function(V){var se,pe,W=(se=g.R,"found"in(pe=V)?function(Te,Ee){Ke(!!Ee.found);var Ge=Si(Te,Ee.found.name),Oe=mn(Ee.found.updateTime),Et=new Er({mapValue:{fields:Ee.found.fields}});return pn.newFoundDocument(Ge,Oe,Et)}(se,pe):"missing"in pe?function(Te,Ee){Ke(!!Ee.missing),Ke(!!Ee.readTime);var Ge=Si(Te,Ee.missing),Oe=mn(Ee.readTime);return pn.newNoDocument(Ge,Oe)}(se,pe):Re());I.set(W.key.toString(),W)}),S=[],[2,(f.forEach(function(V){var W=I.get(V.toString());Ke(!!W),S.push(W)}),S)]}})})}(this.datastore,e)];case 1:return[2,((i=u.sent()).forEach(function(l){return o.recordVersion(l)}),i)]}})})},t.prototype.set=function(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new Fc(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i=this;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(u){e.delete(u.key.toString())}),e.forEach(function(u,l){var f=Pe.fromPath(l);i.mutations.push(new Hp(f,i.precondition(f)))}),[4,function(u,l){return(0,T.mG)(this,void 0,void 0,function(){var f,g,_;return(0,T.Jh)(this,function(w){switch(w.label){case 0:return f=De(u),g=Mt(f.R)+"/documents",_={writes:l.map(function(E){return Kh(f.R,E)})},[4,f.Ni("Commit",g,_)];case 1:return w.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return o.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw Re();i=ot.min()}var o=this.readVersions.get(e.key.toString());if(o){if(!i.isEqual(o))throw new ge(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)},t.prototype.precondition=function(e){var i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?gn.updateTime(i):gn.none()},t.prototype.preconditionForUpdate=function(e){var i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(ot.min()))throw new ge(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(i)}return gn.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}()),MI=function(){function t(e,i,o,u){this.asyncQueue=e,this.datastore=i,this.updateFunction=o,this.deferred=u,this.ec=5,this.Zi=new Rs(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,T.mG)(e,void 0,void 0,function(){var i,o,u=this;return(0,T.Jh)(this,function(l){return i=new AI(this.datastore),(o=this.sc(i))&&o.then(function(f){u.asyncQueue.enqueueAndForget(function(){return i.commit().then(function(){u.deferred.resolve(f)}).catch(function(g){u.ic(g)})})}).catch(function(f){u.ic(f)}),[2]})})})},t.prototype.sc=function(e){try{var i=this.updateFunction(e);return!Eo(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}},t.prototype.ic=function(e){var i=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return i.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if("FirebaseError"===e.name){var i=e.code;return"aborted"===i||"failed-precondition"===i||!h_(i)}return!1},t}(),Cd=function(){function t(e,i,o){var u=this;this.credentials=e,this.asyncQueue=i,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=Dp.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(i,function(l){return(0,T.mG)(u,void 0,void 0,function(){return(0,T.Jh)(this,function(f){switch(f.label){case 0:return be("FirestoreClient","Received user=",l.uid),[4,this.credentialListener(l)];case 1:return f.sent(),this.user=l,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var i=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,T.mG)(e,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:l.sent(),l.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:l.sent(),l.label=4;case 4:return this.credentials.removeChangeListener(),i.resolve(),[3,6];case 5:return o=l.sent(),u=ru(o,"Failed to shutdown persistence"),i.reject(u),[3,6];case 6:return[2]}})})}),i.promise},t}();function IE(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o,u=this;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return t.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return i=l.sent(),[4,e.initialize(i)];case 2:return l.sent(),o=i.initialUser,t.setCredentialChangeListener(function(f){return(0,T.mG)(u,void 0,void 0,function(){return(0,T.Jh)(this,function(g){switch(g.label){case 0:return o.isEqual(f)?[3,2]:[4,hg(e.localStore,f)];case 1:g.sent(),o=f,g.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Id(t,e){return(0,T.mG)(this,void 0,void 0,function(){var i,o;return(0,T.Jh)(this,function(u){switch(u.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ko(t)];case 1:return i=u.sent(),be("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return o=u.sent(),[4,e.initialize(i,o)];case 3:return u.sent(),t.setCredentialChangeListener(function(l){return function(f,g){return(0,T.mG)(this,void 0,void 0,function(){var _,w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:return(_=De(f)).asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials"),w=to(_),_.Or.add(3),[4,tu(_)];case 1:return E.sent(),w&&_.Br.set("Unknown"),[4,_.remoteSyncer.handleCredentialChange(g)];case 2:return E.sent(),_.Or.delete(3),[4,Kc(_)];case 3:return E.sent(),[2]}})})}(e.remoteStore,l)}),t.onlineComponents=e,[2]}})})}function ko(t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(be("FirestoreClient","Using default OfflineComponentProvider"),[4,IE(t,new kg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Zc(t){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(be("FirestoreClient","Using default OnlineComponentProvider"),[4,Id(t,new D0)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function E0(t){return ko(t).then(function(e){return e.persistence})}function Ug(t){return ko(t).then(function(e){return e.localStore})}function Td(t){return Zc(t).then(function(e){return e.remoteStore})}function Sd(t){return Zc(t).then(function(e){return e.syncEngine})}function Ps(t){return(0,T.mG)(this,void 0,void 0,function(){var e,i;return(0,T.Jh)(this,function(o){switch(o.label){case 0:return[4,Zc(t)];case 1:return e=o.sent(),[2,((i=e.eventManager).onListen=d0.bind(null,e.syncEngine),i.onUnlisten=wd.bind(null,e.syncEngine),i)]}})})}function jg(t,e,i){var o=this;void 0===i&&(i={});var u=new Vn;return t.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(o,void 0,void 0,function(){var l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return l=function(g,_,w,E,I){var S=new Vg({next:function(V){_.enqueueAndForget(function(){return vd(g,O)});var W=V.docs.has(w);!W&&V.fromCache?I.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&V.fromCache&&E&&"server"===E.source?I.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(V)},error:function(V){return I.reject(V)}}),O=new Sg(oi(w.path),S,{includeMetadataChanges:!0,so:!0});return Tg(g,O)},[4,Ps(t)];case 1:return[2,l.apply(void 0,[f.sent(),t.asyncQueue,e,i,u])]}})})}),u.promise}function TE(t,e,i){var o=this;void 0===i&&(i={});var u=new Vn;return t.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(o,void 0,void 0,function(){var l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return l=function(g,_,w,E,I){var S=new Vg({next:function(V){_.enqueueAndForget(function(){return vd(g,O)}),V.fromCache&&"server"===E.source?I.reject(new ge(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(V)},error:function(V){return I.reject(V)}}),O=new Sg(w,S,{includeMetadataChanges:!0,so:!0});return Tg(g,O)},[4,Ps(t)];case 1:return[2,l.apply(void 0,[f.sent(),t.asyncQueue,e,i,u])]}})})}),u.promise}var C0=function(t,e,i,o,u,l,f,g){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=g},Ls=function(){function t(e,i){this.projectId=e,this.database=i||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Bg=new Map,SE=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},AE=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,i){this.changeListener=i,e.enqueueRetryable(function(){return i(En.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xI=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,i){var o=this;this.changeListener=i,e.enqueueRetryable(function(){return i(o.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ME=function(){function t(e){var i=this;this.currentUser=En.UNAUTHENTICATED,this.oc=new Vn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){i.cc++,i.currentUser=i.ac(),i.oc.resolve(),i.changeListener&&i.asyncQueue.enqueueRetryable(function(){return i.changeListener(i.currentUser)})};var o=function(u){be("FirebaseCredentialsProvider","Auth detected"),i.auth=u,i.auth.addAuthTokenListener(i.uc)};e.onInit(function(u){return o(u)}),setTimeout(function(){if(!i.auth){var u=e.getImmediate({optional:!0});u?o(u):(be("FirebaseCredentialsProvider","Auth not yet detected"),i.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,i=this.cc,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(function(u){return e.cc!==i?(be("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):u?(Ke("string"==typeof u.accessToken),new SE(u.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,i){var o=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,T.mG)(o,void 0,void 0,function(){return(0,T.Jh)(this,function(u){switch(u.label){case 0:return[4,this.oc.promise];case 1:return u.sent(),[4,i(this.currentUser)];case 2:return u.sent(),this.changeListener=i,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Ke(null===e||"string"==typeof e),new En(e)},t}(),Gg=function(){function t(e,i,o){this.hc=e,this.lc=i,this.fc=o,this.type="FirstParty",this.user=En.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},i=this.hc.auth.getAuthHeaderValueForFirstParty([]);return i&&(e.Authorization=i),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),xE=function(){function t(e,i,o){this.hc=e,this.lc=i,this.fc=o}return t.prototype.getToken=function(){return Promise.resolve(new Gg(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,i){e.enqueueRetryable(function(){return i(En.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function I0(t,e,i){if(!i)throw new ge(Y.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge(Y.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ad(t,e,i,o){if(!0===e&&!0===o)throw new ge(Y.INVALID_ARGUMENT,t+" and "+i+" cannot be used together.")}function T0(t){if(!Pe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function lr(t){if(Pe.isDocumentKey(t))throw new ge(Y.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Md(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(i){if(i.constructor){var o=/function\s+([^\s(]+)\s*\(/.exec(i.constructor.toString());if(o&&o.length>1)return o[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Re()}function yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var i=Md(t);throw new ge(Y.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+i)}return t}function S0(t,e){if(e<=0)throw new ge(Y.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var A0=function(){function t(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ad("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),ks=function(){function t(e,i){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A0({}),this._settingsFrozen=!1,e instanceof Ls?(this._databaseId=e,this._credentials=new AE):(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(o.options.projectId)}(e),this._credentials=new ME(i))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A0(e),void 0!==e.credentials&&(this._credentials=function(i){if(!i)return new AE;switch(i.type){case"gapi":var o=i.client;return Ke(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new xE(o,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(i=Bg.get(this))&&(be("ComponentProvider","Removing Datastore"),Bg.delete(this),i.terminate()),Promise.resolve();var i},t}(),jt=function(){function t(e,i,o){this.converter=i,this._key=o,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vo(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Kn=function(){function t(e,i,o){this.converter=i,this._query=o,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Vo=function(t){function e(i,o,u){var l=this;return(l=t.call(this,i,o,oi(u))||this)._path=u,l.type="collection",l}return(0,T.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var i=this._path.popLast();return i.isEmpty()?null:new jt(this.firestore,null,new Pe(i))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(i){return new e(this.firestore,i,this._path)},e}(Kn);function $g(t,e){for(var i,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];if(t=(0,_t.m9)(t),I0("collection","path",e),t instanceof ks)return lr(i=gt.fromString.apply(gt,(0,T.ev)([e],o))),new Vo(t,null,i);if(!(t instanceof jt||t instanceof Vo))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lr(i=gt.fromString.apply(gt,(0,T.ev)([t.path],o)).child(gt.fromString(e))),new Vo(t.firestore,null,i)}function Jc(t,e){for(var i,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];if(t=(0,_t.m9)(t),1===arguments.length&&(e=Dp.u()),I0("doc","path",e),t instanceof ks)return T0(i=gt.fromString.apply(gt,(0,T.ev)([e],o))),new jt(t,null,new Pe(i));if(!(t instanceof jt||t instanceof Vo))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return T0(i=t._path.child(gt.fromString.apply(gt,(0,T.ev)([e],o)))),new jt(t.firestore,t instanceof Vo?t.converter:null,new Pe(i))}function M0(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),(t instanceof jt||t instanceof Vo)&&(e instanceof jt||e instanceof Vo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function x0(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),t instanceof Kn&&e instanceof Kn&&t.firestore===e.firestore&&ur(t._query,e._query)&&t.converter===e.converter}var qg=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rs(this,"async_queue_retry"),this.Ic=function(){var o=hd();o&&be("AsyncQueue","Visibility state changed to "+o.visibilityState),e.Zi.Gi()};var i=hd();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},t.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var i=hd();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(e){var i=this;if(this.Ac(),this._c)return new Promise(function(){});var o=new Vn;return this.Rc(function(){return i._c&&i.Ec?Promise.resolve():(e().then(o.resolve,o.reject),o.promise)}).then(function(){return o.promise})},t.prototype.enqueueRetryable=function(e){var i=this;this.enqueueAndForget(function(){return i.wc.push(e),i.bc()})},t.prototype.bc=function(){return(0,T.mG)(this,void 0,void 0,function(){var e,i=this;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(0===this.wc.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return o.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!xs(e=o.sent()))throw e;return be("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return i.bc()}),o.label=5;case 5:return[2]}})})},t.prototype.Rc=function(e){var i=this,o=this.dc.then(function(){return i.gc=!0,e().catch(function(u){throw i.yc=u,i.gc=!1,Lt("INTERNAL UNHANDLED ERROR: ",(f=(l=u).message||"",l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f)),u;var l,f}).then(function(u){return i.gc=!1,u})});return this.dc=o,o},t.prototype.enqueueAfterDelay=function(e,i,o){var u=this;this.Ac(),this.Tc.indexOf(e)>-1&&(i=0);var l=a0.createAndSchedule(this,e,i,o,function(f){return u.vc(f)});return this.mc.push(l),l},t.prototype.Ac=function(){this.yc&&Re()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,T.mG)(this,void 0,void 0,function(){var e;return(0,T.Jh)(this,function(i){switch(i.label){case 0:return[4,e=this.dc];case 1:i.sent(),i.label=2;case 2:if(e!==this.dc)return[3,0];i.label=3;case 3:return[2]}})})},t.prototype.Vc=function(e){for(var i=0,o=this.mc;i<o.length;i++)if(o[i].timerId===e)return!0;return!1},t.prototype.Sc=function(e){var i=this;return this.Pc().then(function(){i.mc.sort(function(f,g){return f.targetTimeMs-g.targetTimeMs});for(var o=0,u=i.mc;o<u.length;o++){var l=u[o];if(l.skipDelay(),"all"!==e&&l.timerId===e)break}return i.Pc()})},t.prototype.Dc=function(e){this.Tc.push(e)},t.prototype.vc=function(e){var i=this.mc.indexOf(e);this.mc.splice(i,1)},t}();function Un(t){return function(e,i){if("object"!=typeof e||null===e)return!1;for(var o=e,u=0,l=["next","error","complete"];u<l.length;u++){var f=l[u];if(f in o&&"function"==typeof o[f])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(e,i,o){this._progressObserver={next:e,error:i,complete:o}},t.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},t.prototype.then=function(e,i){return this._taskCompletionResolver.promise.then(e,i)},t.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},t.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},t.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Zt=function(t){function e(i,o){var u=this;return(u=t.call(this,i,o)||this).type="firestore",u._queue=new qg,u._persistenceKey="name"in i?i.name:"[DEFAULT]",u}return(0,T.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||N0(this),this._firestoreClient.terminate()},e}(ks);function un(t){return t._firestoreClient||N0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function N0(t){var e,l,g,i=t._freezeSettings(),o=(l=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new C0(t._databaseId,l,t._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));t._firestoreClient=new Cd(t._credentials,t._queue,o)}function O0(t,e,i){var o=this,u=new Vn;return t.asyncQueue.enqueue(function(){return(0,T.mG)(o,void 0,void 0,function(){var l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,IE(t,i)];case 1:return f.sent(),[4,Id(t,e)];case 2:return f.sent(),u.resolve(),[3,4];case 3:if(!("FirebaseError"===(g=l=f.sent()).name?g.code===Y.FAILED_PRECONDITION||g.code===Y.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw l;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),u.reject(l),[3,4];case 4:return[2]}var g})})}).then(function(){return u.promise})}function zg(t){if(t._initialized||t._terminated)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ri=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=0;o<e.length;++o)if(0===e[o].length)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),iu=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(sr.fromBase64String(e))}catch(i){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}},t.fromUint8Array=function(e){return new t(sr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),Uo=function(t){this._methodName=t},Xc=function(){function t(e,i){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return lt(this._lat,e._lat)||lt(this._long,e._long)},t}(),OE=/^__.*__$/,RE=function(){function t(e,i,o){this.data=e,this.fieldMask=i,this.fieldTransforms=o}return t.prototype.toMutation=function(e,i){return null!==this.fieldMask?new Qi(e,this.data,this.fieldMask,i,this.fieldTransforms):new La(e,this.data,i,this.fieldTransforms)},t}(),Wg=function(){function t(e,i,o){this.data=e,this.fieldMask=i,this.fieldTransforms=o}return t.prototype.toMutation=function(e,i){return new Qi(e,this.data,this.fieldMask,i,this.fieldTransforms)},t}();function ou(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}var xd=function(){function t(e,i,o,u,l,f){this.settings=e,this.databaseId=i,this.R=o,this.ignoreUndefinedProperties=u,void 0===l&&this.Cc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(e){var i,o=null===(i=this.path)||void 0===i?void 0:i.child(e),u=this.xc({path:o,Fc:!1});return u.$c(e),u},t.prototype.Oc=function(e){var i,o=null===(i=this.path)||void 0===i?void 0:i.child(e),u=this.xc({path:o,Fc:!1});return u.Cc(),u},t.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(e){return Od(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(i){return e.isPrefixOf(i)})||void 0!==this.fieldTransforms.find(function(i){return e.isPrefixOf(i.field)})},t.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},t.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(ou(this.Nc)&&OE.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),R0=function(){function t(e,i,o){this.databaseId=e,this.ignoreUndefinedProperties=i,this.R=o||zc(e)}return t.prototype.Uc=function(e,i,o,u){return void 0===u&&(u=!1),new xd({Nc:e,methodName:i,qc:o,path:Dr.emptyPath(),Fc:!1,Bc:u},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Vs(t){var e=t._freezeSettings(),i=zc(t._databaseId);return new R0(t._databaseId,!!e.ignoreUndefinedProperties,i)}function el(t,e,i,o,u,l){void 0===l&&(l={});var f=t.Uc(l.merge||l.mergeFields?2:0,e,i,u);k0("Data must be an object, but it was:",f,o);var g,_,w=PE(o,f);if(l.merge)g=new Na(f.fieldMask),_=f.fieldTransforms;else if(l.mergeFields){for(var E=[],I=0,S=l.mergeFields;I<S.length;I++){var O=V0(e,S[I],i);if(!f.contains(O))throw new ge(Y.INVALID_ARGUMENT,"Field '"+O+"' is specified in your field mask but missing from your input data.");U0(E,O)||E.push(O)}g=new Na(E),_=f.fieldTransforms.filter(function(V){return g.covers(V.field)})}else g=null,_=f.fieldTransforms;return new RE(new Er(w),g,_)}var Nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype._toFieldTransform=function(i){if(2!==i.Nc)throw i.Lc(1===i.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return i.fieldMask.push(i.path),null},e.prototype.isEqual=function(i){return i instanceof e},e}(Uo);function F0(t,e,i){return new xd({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:i},e.databaseId,e.R,e.ignoreUndefinedProperties)}var FE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype._toFieldTransform=function(i){return new Pa(i.path,new Ti)},e.prototype.isEqual=function(i){return i instanceof e},e}(Uo),OI=function(t){function e(i,o){var u=this;return(u=t.call(this,i)||this).Kc=o,u}return(0,T.ZT)(e,t),e.prototype._toFieldTransform=function(i){var o=F0(this,i,!0),u=this.Kc.map(function(f){return su(f,o)}),l=new Is(u);return new Pa(i.path,l)},e.prototype.isEqual=function(i){return this===i},e}(Uo),RI=function(t){function e(i,o){var u=this;return(u=t.call(this,i)||this).Kc=o,u}return(0,T.ZT)(e,t),e.prototype._toFieldTransform=function(i){var o=F0(this,i,!0),u=this.Kc.map(function(f){return su(f,o)}),l=new Ts(u);return new Pa(i.path,l)},e.prototype.isEqual=function(i){return this===i},e}(Uo),P0=function(t){function e(i,o){var u=this;return(u=t.call(this,i)||this).Qc=o,u}return(0,T.ZT)(e,t),e.prototype._toFieldTransform=function(i){var o=new Ss(i.R,r_(i.R,this.Qc));return new Pa(i.path,o)},e.prototype.isEqual=function(i){return this===i},e}(Uo);function Kg(t,e,i,o){var u=t.Uc(1,e,i);k0("Data must be an object, but it was:",u,o);var l=[],f=Er.empty();Es(o,function(_,w){var E=au(e,_,i);w=(0,_t.m9)(w);var I=u.Oc(E);if(w instanceof Nd)l.push(E);else{var S=su(w,I);null!=S&&(l.push(E),f.set(E,S))}});var g=new Na(l);return new Wg(f,g,u.fieldTransforms)}function Yg(t,e,i,o,u,l){var f=t.Uc(1,e,i),g=[V0(e,o,i)],_=[u];if(l.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var w=0;w<l.length;w+=2)g.push(V0(e,l[w])),_.push(l[w+1]);for(var E=[],I=Er.empty(),S=g.length-1;S>=0;--S)if(!U0(E,g[S])){var O=g[S],V=_[S];V=(0,_t.m9)(V);var W=f.Oc(O);if(V instanceof Nd)E.push(O);else{var se=su(V,W);null!=se&&(E.push(O),I.set(O,se))}}var pe=new Na(E);return new Wg(I,pe,f.fieldTransforms)}function L0(t,e,i,o){return void 0===o&&(o=!1),su(i,t.Uc(o?4:3,e))}function su(t,e){if(LE(t=(0,_t.m9)(t)))return k0("Unsupported field value:",e,t),PE(t,e);if(t instanceof Uo)return function(i,o){if(!ou(o.Nc))throw o.Lc(i._methodName+"() can only be used with update() and set()");if(!o.path)throw o.Lc(i._methodName+"() is not currently supported inside arrays");var u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(i,o){for(var u=[],l=0,f=0,g=i;f<g.length;f++){var _=su(g[f],o.Mc(l));null==_&&(_={nullValue:"NULL_VALUE"}),u.push(_),l++}return{arrayValue:{values:u}}}(t,e)}return function(i,o){if(null===(i=(0,_t.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return r_(o.R,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){var u=or.fromDate(i);return{timestampValue:ka(o.R,u)}}if(i instanceof or)return u=new or(i.seconds,1e3*Math.floor(i.nanoseconds/1e3)),{timestampValue:ka(o.R,u)};if(i instanceof Xc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof iu)return{bytesValue:RD(o.R,i._byteString)};if(i instanceof jt){var l=i.firestore._databaseId;if(!l.isEqual(u=o.databaseId))throw o.Lc("Document reference is for database "+l.projectId+"/"+l.database+" but should be for database "+u.projectId+"/"+u.database);return{referenceValue:Wp(i.firestore._databaseId||o.databaseId,i._key.path)}}throw o.Lc("Unsupported field value: "+Md(i))}(t,e)}function PE(t,e){var i={};return Cp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,function(o,u){var l=su(u,e.kc(o));null!=l&&(i[o]=l)}),{mapValue:{fields:i}}}function LE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof or||t instanceof Xc||t instanceof iu||t instanceof jt||t instanceof Uo)}function k0(t,e,i){if(!LE(i)||"object"!=typeof(u=i)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){var o=Md(i);throw e.Lc("an object"===o?t+" a custom object":t+" "+o)}var u}function V0(t,e,i){if((e=(0,_t.m9)(e))instanceof Ri)return e._internalPath;if("string"==typeof e)return au(t,e);throw Od("Field path arguments must be of type string or FieldPath.",t,!1,void 0,i)}var kE=new RegExp("[~\\*/\\[\\]]");function au(t,e,i){if(e.search(kE)>=0)throw Od("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,i);try{return(new(Ri.bind.apply(Ri,(0,T.ev)([void 0],e.split(".")))))._internalPath}catch(o){throw Od("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,i)}}function Od(t,e,i,o,u){var l=o&&!o.isEmpty(),f=void 0!==u,g="Function "+e+"() called with invalid data";i&&(g+=" (via `toFirestore()`)");var _="";return(l||f)&&(_+=" (found",l&&(_+=" in field "+o),f&&(_+=" in document "+u),_+=")"),new ge(Y.INVALID_ARGUMENT,(g+=". ")+t+_)}function U0(t,e){return t.some(function(i){return i.isEqual(e)})}var uu=function(){function t(e,i,o,u,l){this._firestore=e,this._userDataWriter=i,this._key=o,this._document=u,this._converter=l}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new jt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var e=new Us(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var i=this._document.data.field(tl("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}},t}(),Us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(uu);function tl(t,e){return"string"==typeof e?au(t,e):e instanceof Ri?e._internalPath:e._delegate._internalPath}var no=function(){function t(e,i){this.hasPendingWrites=e,this.fromCache=i}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),ci=function(t){function e(i,o,u,l,f,g){var _=this;return(_=t.call(this,i,o,u,l,g)||this)._firestore=i,_._firestoreImpl=i,_.metadata=f,_}return(0,T.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(i){if(void 0===i&&(i={}),this._document){if(this._converter){var o=new nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}},e.prototype.get=function(i,o){if(void 0===o&&(o={}),this._document){var u=this._document.data.field(tl("DocumentSnapshot.get",i));if(null!==u)return this._userDataWriter.convertValue(u,o.serverTimestamps)}},e}(uu),nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype.data=function(i){return void 0===i&&(i={}),t.prototype.data.call(this,i)},e}(ci),Fi=function(){function t(e,i,o,u){this._firestore=e,this._userDataWriter=i,this._snapshot=u,this.metadata=new no(u.hasPendingWrites,u.fromCache),this.query=o}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(i){return e.push(i)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,i){var o=this;this._snapshot.docs.forEach(function(u){e.call(i,new nl(o._firestore,o._userDataWriter,u.key,u,new no(o._snapshot.mutatedKeys.has(u.key),o._snapshot.fromCache),o.query.converter))})},t.prototype.docChanges=function(e){void 0===e&&(e={});var i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){var l=0;return o._snapshot.docChanges.map(function(g){return{type:"added",doc:new nl(o._firestore,o._userDataWriter,g.doc.key,g.doc,new no(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:l++}})}var f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(function(g){return u||3!==g.type}).map(function(g){var _=new nl(o._firestore,o._userDataWriter,g.doc.key,g.doc,new no(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),w=-1,E=-1;return 0!==g.type&&(w=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),1!==g.type&&(E=(f=f.add(g.doc)).indexOf(g.doc.key)),{type:Qg(g.type),doc:_,oldIndex:w,newIndex:E}})}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges},t}();function Qg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}function Zg(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Fi&&e instanceof Fi&&t._firestore===e._firestore&&x0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Jg(t){if(kh(t)&&0===t.explicitOrderBy.length)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rd=function(){};function js(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=0,u=e;o<u.length;o++){var l=u[o];t=l._apply(t)}return t}var FI=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).jc=i,l.Wc=o,l.Gc=u,l.type="where",l}return(0,T.ZT)(e,t),e.prototype._apply=function(i){var l,g,o=Vs(i.firestore),u=function(l,f,g,_,w,E,I){var S;if(w.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ge(Y.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+E+"' queries on FieldPath.documentId().");if("in"===E||"not-in"===E){B0(I,E);for(var O=[],V=0,W=I;V<W.length;V++)O.push(j0(_,l,W[V]));S={arrayValue:{values:O}}}else S=j0(_,l,I)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||B0(I,E),S=L0(g,"where",I,"in"===E||"not-in"===E);var pe=ar.create(w,E,S);return function(Te,Ee){if(Ee.g()){var Ge=Pp(Te);if(null!==Ge&&!Ge.isEqual(Ee.field))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Ge.toString()+"' and '"+Ee.field.toString()+"'");var Oe=Vh(Te);null!==Oe&&G0(0,Ee.field,Oe)}var Et=function(Qn,gC){for(var dm=0,YT=Qn.filters;dm<YT.length;dm++){var QT=YT[dm];if(gC.indexOf(QT.op)>=0)return QT.op}return null}(Te,function(Qn){switch(Qn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ee.op));if(null!==Et)throw new ge(Y.INVALID_ARGUMENT,Et===Ee.op?"Invalid query. You cannot use more than one '"+Ee.op.toString()+"' filter.":"Invalid query. You cannot use '"+Ee.op.toString()+"' filters with '"+Et.toString()+"' filters.")}(l,pe),pe}(i._query,0,o,i.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Kn(i.firestore,i.converter,(g=(l=i._query).filters.concat([u]),new Ii(l.path,l.collectionGroup,l.explicitOrderBy.slice(),g,l.limit,l.limitType,l.startAt,l.endAt)))},e}(Rd),PI=function(t){function e(i,o){var u=this;return(u=t.call(this)||this).jc=i,u.zc=o,u.type="orderBy",u}return(0,T.ZT)(e,t),e.prototype._apply=function(i){var u,f,o=function(u,l,f){if(null!==u.startAt)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var g=new Fa(l,f);return function(_,w){if(null===Vh(_)){var E=Pp(_);null!==E&&G0(0,E,w.field)}}(u,g),g}(i._query,this.jc,this.zc);return new Kn(i.firestore,i.converter,(f=(u=i._query).explicitOrderBy.concat([o]),new Ii(u.path,u.collectionGroup,f,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)))},e}(Rd),VE=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).type=i,l.Hc=o,l.Jc=u,l}return(0,T.ZT)(e,t),e.prototype._apply=function(i){return new Kn(i.firestore,i.converter,jh(i._query,this.Hc,this.Jc))},e}(Rd),UE=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).type=i,l.Yc=o,l.Xc=u,l}return(0,T.ZT)(e,t),e.prototype._apply=function(i){var u,l,o=Xg(i,this.type,this.Yc,this.Xc);return new Kn(i.firestore,i.converter,(l=o,new Ii((u=i._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)))},e}(Rd),jE=function(t){function e(i,o,u){var l=this;return(l=t.call(this)||this).type=i,l.Yc=o,l.Xc=u,l}return(0,T.ZT)(e,t),e.prototype._apply=function(i){var u,l,o=Xg(i,this.type,this.Yc,this.Xc);return new Kn(i.firestore,i.converter,(l=o,new Ii((u=i._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)))},e}(Rd);function Xg(t,e,i,o){if(i[0]=(0,_t.m9)(i[0]),i[0]instanceof uu)return function(l,f,g,_,w){if(!_)throw new ge(Y.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+g+"().");for(var E=[],I=0,S=Nc(l);I<S.length;I++){var O=S[I];if(O.field.isKeyField())E.push(Ic(f,_.key));else{var V=_.data.field(O.field);if(Tp(V))throw new ge(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+O.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===V){var W=O.field.canonicalString();throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+W+"' (used as the orderBy) does not exist.")}E.push(V)}}return new Gt(E,w)}(t._query,t.firestore._databaseId,e,i[0]._document,o);var u=Vs(t.firestore);return function(l,f,g,_,w,E){var I=l.explicitOrderBy;if(w.length>I.length)throw new ge(Y.INVALID_ARGUMENT,"Too many arguments provided to "+_+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var S=[],O=0;O<w.length;O++){var V=w[O];if(I[O].field.isKeyField()){if("string"!=typeof V)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+_+"(), but got a "+typeof V);if(!Uh(l)&&-1!==V.indexOf("/"))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+_+"() must be a plain document ID, but '"+V+"' contains a slash.");var W=l.path.child(gt.fromString(V));if(!Pe.isDocumentKey(W))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+_+"() must result in a valid document path, but '"+W+"' is not because it contains an odd number of segments.");var se=new Pe(W);S.push(Ic(f,se))}else{var pe=L0(g,_,V);S.push(pe)}}return new Gt(S,E)}(t._query,t.firestore._databaseId,u,e,i,o)}function j0(t,e,i){if("string"==typeof(i=(0,_t.m9)(i))){if(""===i)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uh(e)&&-1!==i.indexOf("/"))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+i+"' contains a '/' character.");var o=e.path.child(gt.fromString(i));if(!Pe.isDocumentKey(o))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+o+"' is not because it has an odd number of segments ("+o.length+").");return Ic(t,new Pe(o))}if(i instanceof jt)return Ic(t,i._key);throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Md(i)+".")}function B0(t,e){if(!Array.isArray(t)||0===t.length)throw new ge(Y.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ge(Y.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function G0(t,e,i){if(!i.isEqual(e))throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+i.toString()+"' instead.")}var em=function(){function t(){}return t.prototype.convertValue=function(e,i){switch(void 0===i&&(i="none"),Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw Re()}},t.prototype.convertObject=function(e,i){var o=this,u={};return Es(e.fields,function(l,f){u[l]=o.convertValue(f,i)}),u},t.prototype.convertGeoPoint=function(e){return new Xc(qt(e.latitude),qt(e.longitude))},t.prototype.convertArray=function(e,i){var o=this;return(e.values||[]).map(function(u){return o.convertValue(u,i)})},t.prototype.convertServerTimestamp=function(e,i){switch(i){case"previous":var o=Oh(e);return null==o?null:this.convertValue(o,i);case"estimate":return this.convertTimestamp(Cs(e));default:return null}},t.prototype.convertTimestamp=function(e){var i=Yi(e);return new or(i.seconds,i.nanos)},t.prototype.convertDocumentKey=function(e,i){var o=gt.fromString(e);Ke(Xp(o));var u=new Ls(o.get(1),o.get(3)),l=new Pe(o.popFirst(5));return u.isEqual(i)||Lt("Document "+l+" contains a document reference within a different database ("+u.projectId+"/"+u.database+") which is not supported. It will be treated as a reference in the current database ("+i.projectId+"/"+i.database+") instead."),l},t}();function rl(t,e,i){return t?i&&(i.merge||i.mergeFields)?t.toFirestore(e,i):t.toFirestore(e):e}var H0=function(t){function e(i){var o=this;return(o=t.call(this)||this).firestore=i,o}return(0,T.ZT)(e,t),e.prototype.convertBytes=function(i){return new iu(i)},e.prototype.convertReference=function(i){var o=this.convertDocumentKey(i,this.firestore._databaseId);return new jt(this.firestore,null,o)},e}(em),$0=function(){function t(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Vs(e)}return t.prototype.set=function(e,i,o){this._verifyNotCommitted();var u=jo(e,this._firestore),l=rl(u.converter,i,o),f=el(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,o);return this._mutations.push(f.toMutation(u._key,gn.none())),this},t.prototype.update=function(e,i,o){for(var u=[],l=3;l<arguments.length;l++)u[l-3]=arguments[l];this._verifyNotCommitted();var f,g=jo(e,this._firestore);return f="string"==typeof(i=(0,_t.m9)(i))||i instanceof Ri?Yg(this._dataReader,"WriteBatch.update",g._key,i,o,u):Kg(this._dataReader,"WriteBatch.update",g._key,i),this._mutations.push(f.toMutation(g._key,gn.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var i=jo(e,this._firestore);return this._mutations=this._mutations.concat(new Fc(i._key,gn.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ge(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function jo(t,e){if((t=(0,_t.m9)(t)).firestore!==e)throw new ge(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Bs=function(t){function e(i){var o=this;return(o=t.call(this)||this).firestore=i,o}return(0,T.ZT)(e,t),e.prototype.convertBytes=function(i){return new iu(i)},e.prototype.convertReference=function(i){var o=this.convertDocumentKey(i,this.firestore._databaseId);return new jt(this.firestore,null,o)},e}(em);function tm(t,e,i){t=yt(t,jt);var o=yt(t.firestore,Zt),u=rl(t.converter,e,i);return cu(o,[el(Vs(o),"setDoc",t._key,u,null!==t.converter,i).toMutation(t._key,gn.none())])}function il(t,e,i){for(var o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];t=yt(t,jt);var l=yt(t.firestore,Zt),f=Vs(l);return cu(l,[("string"==typeof(e=(0,_t.m9)(e))||e instanceof Ri?Yg(f,"updateDoc",t._key,e,i,o):Kg(f,"updateDoc",t._key,e)).toMutation(t._key,gn.exists(!0))])}function q0(t){for(var e,i,o,u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];t=(0,_t.m9)(t);var f={includeMetadataChanges:!1},g=0;"object"!=typeof u[g]||Un(u[g])||(f=u[g],g++);var _,w,E,I={includeMetadataChanges:f.includeMetadataChanges};if(Un(u[g])){var S=u[g];u[g]=null===(e=S.next)||void 0===e?void 0:e.bind(S),u[g+1]=null===(i=S.error)||void 0===i?void 0:i.bind(S),u[g+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}if(t instanceof jt)w=yt(t.firestore,Zt),E=oi(t._key.path),_={next:function(W){u[g]&&u[g](lu(w,t,W))},error:u[g+1],complete:u[g+2]};else{var O=yt(t,Kn);w=yt(O.firestore,Zt),E=O._query;var V=new Bs(w);_={next:function(W){u[g]&&u[g](new Fi(w,V,O,W))},error:u[g+1],complete:u[g+2]},Jg(t._query)}return function(W,se,pe,Te){var Ee=this,Ge=new Vg(Te),Oe=new Sg(se,Ge,pe);return W.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(Ee,void 0,void 0,function(){var Et;return(0,T.Jh)(this,function(Qn){switch(Qn.label){case 0:return Et=Tg,[4,Ps(W)];case 1:return[2,Et.apply(void 0,[Qn.sent(),Oe])]}})})}),function(){Ge.Wo(),W.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(Ee,void 0,void 0,function(){var Et;return(0,T.Jh)(this,function(Qn){switch(Qn.label){case 0:return Et=vd,[4,Ps(W)];case 1:return[2,Et.apply(void 0,[Qn.sent(),Oe])]}})})})}}(un(w),E,I,_)}function cu(t,e){return function(i,o){var u=this,l=new Vn;return i.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(u,void 0,void 0,function(){var f;return(0,T.Jh)(this,function(g){switch(g.label){case 0:return f=xg,[4,Sd(i)];case 1:return[2,f.apply(void 0,[g.sent(),o,l])]}})})}),l.promise}(un(t),e)}function lu(t,e,i){var o=i.docs.get(e._key),u=new Bs(t);return new ci(t,u,e._key,o,new no(i.hasPendingWrites,i.fromCache),e.converter)}var BE=function(t){function e(i,o){var u=this;return(u=t.call(this,i,o)||this)._firestore=i,u}return(0,T.ZT)(e,t),e.prototype.get=function(i){var o=this,u=jo(i,this._firestore),l=new Bs(this._firestore);return t.prototype.get.call(this,i).then(function(f){return new ci(o._firestore,l,u._key,f._document,new no(!1,!1),u.converter)})},e}(function(){function t(e,i){this._firestore=e,this._transaction=i,this._dataReader=Vs(e)}return t.prototype.get=function(e){var i=this,o=jo(e,this._firestore),u=new H0(this._firestore);return this._transaction.lookup([o._key]).then(function(l){if(!l||1!==l.length)return Re();var f=l[0];if(f.isFoundDocument())return new uu(i._firestore,u,f.key,f,o.converter);if(f.isNoDocument())return new uu(i._firestore,u,o._key,null,o.converter);throw Re()})},t.prototype.set=function(e,i,o){var u=jo(e,this._firestore),l=rl(u.converter,i,o),f=el(this._dataReader,"Transaction.set",u._key,l,null!==u.converter,o);return this._transaction.set(u._key,f),this},t.prototype.update=function(e,i,o){for(var u=[],l=3;l<arguments.length;l++)u[l-3]=arguments[l];var f,g=jo(e,this._firestore);return f="string"==typeof(i=(0,_t.m9)(i))||i instanceof Ri?Yg(this._dataReader,"Transaction.update",g._key,i,o,u):Kg(this._dataReader,"Transaction.update",g._key,i),this._transaction.update(g._key,f),this},t.prototype.delete=function(e){var i=jo(e,this._firestore);return this._transaction.delete(i._key),this},t}());function z0(){if("undefined"==typeof Uint8Array)throw new ge(Y.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function W0(){if("undefined"==typeof atob)throw new ge(Y.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var K0=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return W0(),new t(iu.fromBase64String(e))},t.fromUint8Array=function(e){return z0(),new t(iu.fromUint8Array(e))},t.prototype.toBase64=function(){return W0(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return z0(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),LI=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,i){return function(o,u){zg(o=yt(o,Zt));var l=un(o),f=o._freezeSettings(),g=new D0;return O0(l,g,new EE(g,f.cacheSizeBytes,null==u?void 0:u.forceOwnership))}(e._delegate,{forceOwnership:i})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(i){zg(i=yt(i,Zt));var o=un(i),u=i._freezeSettings(),l=new D0;return O0(o,l,new TI(l,u.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(i){var o=this;if(i._initialized&&!i._terminated)throw new ge(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var u=new Vn;return i._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,T.mG)(o,void 0,void 0,function(){var l;return(0,T.Jh)(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,function(g){return(0,T.mG)(this,void 0,void 0,function(){return(0,T.Jh)(this,function(w){switch(w.label){case 0:return qa.yt()?[4,qa.delete(g+"main")]:[2,Promise.resolve()];case 1:return w.sent(),[2]}})})}(id(i._databaseId,i._persistenceKey))];case 1:return f.sent(),u.resolve(),[3,3];case 2:return l=f.sent(),u.reject(l),[3,3];case 3:return[2]}})})}),u.promise}(e._delegate)},t}(),Y0=function(){function t(e,i,o){var u=this;this._delegate=i,this.Zc=o,this.INTERNAL={delete:function(){return u.terminate()}},e instanceof Ls||(this.tu=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var i=this._delegate._getSettings();e.merge||i.host===e.host||Dc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,i,o){void 0===o&&(o={}),function(u,l,f,g){var _;void 0===g&&(g={});var w=(u=yt(u,ks))._getSettings();if("firestore.googleapis.com"!==w.host&&w.host!==l&&Dc("Host has been set in both settings() and useEmulator(), emulator host will be used"),u._setSettings(Object.assign(Object.assign({},w),{host:l+":"+f,ssl:!1})),g.mockUserToken){var E,I;if("string"==typeof g.mockUserToken)E=g.mockUserToken,I=En.MOCK_USER;else{E=(0,_t.Sg)(g.mockUserToken,null===(_=u._app)||void 0===_?void 0:_.options.projectId);var S=g.mockUserToken.sub||g.mockUserToken.user_id;if(!S)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new En(S)}u._credentials=new xI(new SE(E,I))}}(this._delegate,e,i,o)},t.prototype.enableNetwork=function(){return function(e){var i=this;return e.asyncQueue.enqueue(function(){return(0,T.mG)(i,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,E0(e)];case 1:return o=l.sent(),[4,Td(e)];case 2:return u=l.sent(),[2,(o.setNetworkEnabled(!0),f=u,g=De(f),g.Or.delete(0),Kc(g))]}var f,g})})})}(un(yt(this._delegate,Zt)))},t.prototype.disableNetwork=function(){return function(e){var i=this;return e.asyncQueue.enqueue(function(){return(0,T.mG)(i,void 0,void 0,function(){var o,u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return[4,E0(e)];case 1:return o=l.sent(),[4,Td(e)];case 2:return u=l.sent(),[2,(o.setNetworkEnabled(!1),function(f){return(0,T.mG)(this,void 0,void 0,function(){var g;return(0,T.Jh)(this,function(_){switch(_.label){case 0:return(g=De(f)).Or.add(0),[4,tu(g)];case 1:return _.sent(),g.Br.set("Offline"),[2]}})})}(u))]}})})})}(un(yt(this._delegate,Zt)))},t.prototype.enablePersistence=function(e){var i=!1,o=!1;return e&&Ad("synchronizeTabs",i=!!e.synchronizeTabs,"experimentalForceOwningTab",o=!!e.experimentalForceOwningTab),i?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,o)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var i=this,o=new Vn;return e.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(i,void 0,void 0,function(){var u;return(0,T.Jh)(this,function(l){switch(l.label){case 0:return u=p0,[4,Sd(e)];case 1:return[2,u.apply(void 0,[l.sent(),o])]}})})}),o.promise}(un(yt(this._delegate,Zt)))},t.prototype.onSnapshotsInSync=function(e){return o=e,function(u,l){var f=this,g=new Vg(l);return u.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(f,void 0,void 0,function(){var _;return(0,T.Jh)(this,function(w){switch(w.label){case 0:return _=function(E,I){De(E).Gr.add(I),I.next()},[4,Ps(u)];case 1:return[2,_.apply(void 0,[w.sent(),g])]}})})}),function(){g.Wo(),u.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(f,void 0,void 0,function(){var _;return(0,T.Jh)(this,function(w){switch(w.label){case 0:return _=function(E,I){De(E).Gr.delete(I)},[4,Ps(u)];case 1:return[2,_.apply(void 0,[w.sent(),g])]}})})})}}(un(yt(this._delegate,Zt)),Un(o)?o:{next:o});var o},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new nm(this,$g(this._delegate,e))}catch(i){throw Yn(i,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new Gs(this,Jc(this._delegate,e))}catch(i){throw Yn(i,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new Vd(this,function(i,o){if(i=yt(i,ks),I0("collectionGroup","collection id",o),o.indexOf("/")>=0)throw new ge(Y.INVALID_ARGUMENT,"Invalid collection ID '"+o+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kn(i,null,(u=o,new Ii(gt.emptyPath(),u)));var u}(this._delegate,e))}catch(i){throw Yn(i,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var o,i=this;return function(l,f){var g=this,_=new Vn;return l.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(g,void 0,void 0,function(){var w;return(0,T.Jh)(this,function(E){switch(E.label){case 0:return[4,(I=l,Zc(I).then(function(S){return S.datastore}))];case 1:return w=E.sent(),new MI(l.asyncQueue,w,f,_).run(),[2]}var I})})}),_.promise}(un(o=this._delegate),function(l){return function(o){return e(new Q0(i,o))}(new BE(o,l))})},t.prototype.batch=function(){var e=this;return un(this._delegate),new Z0(new $0(this._delegate,function(i){return cu(e._delegate,i)}))},t.prototype.loadBundle=function(e){throw new ge(Y.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new ge(Y.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Fd=function(t){function e(i){var o=this;return(o=t.call(this)||this).firestore=i,o}return(0,T.ZT)(e,t),e.prototype.convertBytes=function(i){return new K0(new iu(i))},e.prototype.convertReference=function(i){var o=this.convertDocumentKey(i,this.firestore._databaseId);return Gs.eu(o,this.firestore,null)},e}(em),Q0=function(){function t(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new Fd(e)}return t.prototype.get=function(e){var i=this,o=hu(e);return this._delegate.get(o).then(function(u){return new Ld(i._firestore,new ci(i._firestore._delegate,i._userDataWriter,u._key,u._document,u.metadata,o.converter))})},t.prototype.set=function(e,i,o){var u=hu(e);return o?(Hg("Transaction.set",o),this._delegate.set(u,i,o)):this._delegate.set(u,i),this},t.prototype.update=function(e,i,o){for(var u,l=[],f=3;f<arguments.length;f++)l[f-3]=arguments[f];var g=hu(e);return 2===arguments.length?this._delegate.update(g,i):(u=this._delegate).update.apply(u,(0,T.ev)([g,i,o],l)),this},t.prototype.delete=function(e){var i=hu(e);return this._delegate.delete(i),this},t}(),Z0=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,i,o){var u=hu(e);return o?(Hg("WriteBatch.set",o),this._delegate.set(u,i,o)):this._delegate.set(u,i),this},t.prototype.update=function(e,i,o){for(var u,l=[],f=3;f<arguments.length;f++)l[f-3]=arguments[f];var g=hu(e);return 2===arguments.length?this._delegate.update(g,i):(u=this._delegate).update.apply(u,(0,T.ev)([g,i,o],l)),this},t.prototype.delete=function(e){var i=hu(e);return this._delegate.delete(i),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Pd=function(){function t(e,i,o){this._firestore=e,this._userDataWriter=i,this._delegate=o}return t.prototype.fromFirestore=function(e,i){var o=new nl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kd(this._firestore,o),null!=i?i:{})},t.prototype.toFirestore=function(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)},t.nu=function(e,i){var o=t.su,u=o.get(e);u||o.set(e,u=new WeakMap);var l=u.get(i);return l||(l=new t(e,new Fd(e),i),u.set(i,l)),l},t}();Pd.su=new WeakMap;var Gs=function(){function t(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Fd(e)}return t.iu=function(e,i,o){if(e.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(i,new jt(i._delegate,o,new Pe(e)))},t.eu=function(e,i,o){return new t(i,new jt(i._delegate,o,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nm(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new nm(this.firestore,$g(this._delegate,e))}catch(i){throw Yn(i,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=(0,_t.m9)(e))instanceof jt&&M0(this._delegate,e)},t.prototype.set=function(e,i){i=Hg("DocumentReference.set",i);try{return i?tm(this._delegate,e,i):tm(this._delegate,e)}catch(o){throw Yn(o,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,i){for(var o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];try{return 1===arguments.length?il(this._delegate,e):il.apply(void 0,(0,T.ev)([this._delegate,e,i],o))}catch(l){throw Yn(l,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return cu(yt((e=this._delegate).firestore,Zt),[new Fc(e._key,gn.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=HE(i),l=$E(i,function(f){return new Ld(e.firestore,new ci(e.firestore._delegate,e._userDataWriter,f._key,f._document,f.metadata,e._delegate.converter))});return q0(this._delegate,u,l)},t.prototype.get=function(e){var i=this;return("cache"===(null==e?void 0:e.source)?function(o){o=yt(o,jt);var u=yt(o.firestore,Zt),l=un(u),f=new Bs(u);return function(g,_){var w=this,E=new Vn;return g.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(w,void 0,void 0,function(){var I;return(0,T.Jh)(this,function(S){switch(S.label){case 0:return I=function(O,V,W){return(0,T.mG)(this,void 0,void 0,function(){var se,pe;return(0,T.Jh)(this,function(Te){switch(Te.label){case 0:return Te.trys.push([0,2,,3]),[4,(Ee=O,Ge=V,Oe=De(Ee),Oe.persistence.runTransaction("read document","readonly",function(Et){return Oe.Mn.mn(Et,Ge)}))];case 1:return(pe=Te.sent()).isFoundDocument()?W.resolve(pe):pe.isNoDocument()?W.resolve(null):W.reject(new ge(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return se=Te.sent(),pe=ru(se,"Failed to get document '"+V+" from cache"),W.reject(pe),[3,3];case 3:return[2]}var Ee,Ge,Oe})})},[4,Ug(g)];case 1:return[2,I.apply(void 0,[S.sent(),_,E])]}})})}),E.promise}(l,o._key).then(function(g){return new ci(u,f,o._key,g,new no(null!==g&&g.hasLocalMutations,!0),o.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(o){o=yt(o,jt);var u=yt(o.firestore,Zt);return jg(un(u),o._key,{source:"server"}).then(function(l){return lu(u,o,l)})}(this._delegate):function(o){o=yt(o,jt);var u=yt(o.firestore,Zt);return jg(un(u),o._key).then(function(l){return lu(u,o,l)})}(this._delegate)).then(function(o){return new Ld(i.firestore,new ci(i.firestore._delegate,i._userDataWriter,o._key,o._document,o.metadata,i._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Pd.nu(this.firestore,e):null))},t}();function Yn(t,e,i){return t.message=t.message.replace(e,i),t}function HE(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];if("object"==typeof o&&!Un(o))return o}return{}}function $E(t,e){var i,o,u;return{next:function(l){u.next&&u.next(e(l))},error:null===(i=(u=Un(t[0])?t[0]:Un(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===i?void 0:i.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}var Ld=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Gs(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,i){return this._delegate.get(e,i)},t.prototype.isEqual=function(e){return Zg(this._delegate,e._delegate)},t}(),kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,T.ZT)(e,t),e.prototype.data=function(i){return this._delegate.data(i)},e}(Ld),Vd=function(){function t(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Fd(e)}return t.prototype.where=function(e,i,o){try{return new t(this.firestore,js(this._delegate,(f=o,g=i,_=tl("where",u=e),new FI(_,g,f))))}catch(u){throw Yn(u,/(orderBy|where)\(\)/,"Query.$1()")}var u,f,g,_},t.prototype.orderBy=function(e,i){try{return new t(this.firestore,js(this._delegate,function(o,u){void 0===u&&(u="asc");var l=u,f=tl("orderBy",o);return new PI(f,l)}(e,i)))}catch(o){throw Yn(o,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,js(this._delegate,(S0("limit",i=e),new VE("limit",i,"F"))))}catch(i){throw Yn(i,"limit()","Query.limit()")}var i},t.prototype.limitToLast=function(e){try{return new t(this.firestore,js(this._delegate,(S0("limitToLast",i=e),new VE("limitToLast",i,"L"))))}catch(i){throw Yn(i,"limitToLast()","Query.limitToLast()")}var i},t.prototype.startAt=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,js(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new UE("startAt",o,!0)}.apply(void 0,e)))}catch(o){throw Yn(o,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,js(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new UE("startAfter",o,!1)}.apply(void 0,e)))}catch(o){throw Yn(o,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,js(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new jE("endBefore",o,!0)}.apply(void 0,e)))}catch(o){throw Yn(o,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,js(this._delegate,function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return new jE("endAt",o,!1)}.apply(void 0,e)))}catch(o){throw Yn(o,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return x0(this._delegate,e._delegate)},t.prototype.get=function(e){var i=this;return("cache"===(null==e?void 0:e.source)?function(o){o=yt(o,Kn);var u=yt(o.firestore,Zt),l=un(u),f=new Bs(u);return function(g,_){var w=this,E=new Vn;return g.asyncQueue.enqueueAndForget(function(){return(0,T.mG)(w,void 0,void 0,function(){var I;return(0,T.Jh)(this,function(S){switch(S.label){case 0:return I=function(O,V,W){return(0,T.mG)(this,void 0,void 0,function(){var se,pe,Te,Ee,Ge;return(0,T.Jh)(this,function(Oe){switch(Oe.label){case 0:return Oe.trys.push([0,2,,3]),[4,ud(O,V,!0)];case 1:return Ge=Oe.sent(),se=new Ag(V,Ge.Bn),pe=se._o(Ge.documents),Te=se.applyChanges(pe,!1),W.resolve(Te.snapshot),[3,3];case 2:return Ee=Oe.sent(),Ge=ru(Ee,"Failed to execute query '"+V+" against cache"),W.reject(Ge),[3,3];case 3:return[2]}})})},[4,Ug(g)];case 1:return[2,I.apply(void 0,[S.sent(),_,E])]}})})}),E.promise}(l,o._query).then(function(g){return new Fi(u,f,o,g)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(o){o=yt(o,Kn);var u=yt(o.firestore,Zt),l=un(u),f=new Bs(u);return TE(l,o._query,{source:"server"}).then(function(g){return new Fi(u,f,o,g)})}(this._delegate):function(o){o=yt(o,Kn);var u=yt(o.firestore,Zt),l=un(u),f=new Bs(u);return Jg(o._query),TE(l,o._query).then(function(g){return new Fi(u,f,o,g)})}(this._delegate)).then(function(o){return new J0(i.firestore,new Fi(i.firestore._delegate,i._userDataWriter,i._delegate,o._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=HE(i),l=$E(i,function(f){return new J0(e.firestore,new Fi(e.firestore._delegate,e._userDataWriter,e._delegate,f._snapshot))});return q0(this._delegate,u,l)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Pd.nu(this.firestore,e):null))},t}(),qE=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new kd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),J0=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"query",{get:function(){return new Vd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(i){return new kd(e._firestore,i)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var i=this;return this._delegate.docChanges(e).map(function(o){return new qE(i._firestore,o)})},t.prototype.forEach=function(e,i){var o=this;this._delegate.forEach(function(u){e.call(i,new kd(o._firestore,u))})},t.prototype.isEqual=function(e){return Zg(this._delegate,e._delegate)},t}(),nm=function(t){function e(i,o){var u=this;return(u=t.call(this,i,o)||this).firestore=i,u._delegate=o,u}return(0,T.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var i=this._delegate.parent;return i?new Gs(this.firestore,i):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(i){try{return new Gs(this.firestore,void 0===i?Jc(this._delegate):Jc(this._delegate,i))}catch(o){throw Yn(o,"doc()","CollectionReference.doc()")}},e.prototype.add=function(i){var u,l,f,g,_,o=this;return(u=this._delegate,l=i,f=yt(u.firestore,Zt),g=Jc(u),_=rl(u.converter,l),cu(f,[el(Vs(u.firestore),"addDoc",g._key,_,null!==u.converter,{}).toMutation(g._key,gn.exists(!1))]).then(function(){return g})).then(function(u){return new Gs(o.firestore,u)})},e.prototype.isEqual=function(i){return M0(this._delegate,i._delegate)},e.prototype.withConverter=function(i){return new e(this.firestore,this._delegate.withConverter(i?Pd.nu(this.firestore,i):null))},e}(Vd);function hu(t){return yt(t,jt)}var kI=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._delegate=new(Ri.bind.apply(Ri,(0,T.ev)([void 0],e)))}return t.documentId=function(){return new t(Dr.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=(0,_t.m9)(e))instanceof Ri&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),s=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new FE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Nd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return new OI("arrayUnion",u)}.apply(void 0,e);return o._methodName="FieldValue.arrayUnion",new t(o)},t.arrayRemove=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return new RI("arrayRemove",u)}.apply(void 0,e);return o._methodName="FieldValue.arrayRemove",new t(o)},t.increment=function(e){var i=new P0("increment",e);return i._methodName="FieldValue.increment",new t(i)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(),h=N(2461),d={Firestore:Y0,GeoPoint:Xc,Timestamp:or,Blob:K0,Transaction:Q0,WriteBatch:Z0,DocumentReference:Gs,DocumentSnapshot:Ld,Query:Vd,QueryDocumentSnapshot:kd,QuerySnapshot:J0,CollectionReference:nm,FieldPath:kI,FieldValue:s,setLogLevel:function GE(t){jr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function p(t){t.INTERNAL.registerComponent(new h.wA("firestore",function(o){return e=o.getProvider("app").getImmediate(),i=o.getProvider("auth-internal"),new Y0(e,new Zt(e,i),new LI);var e,i},"PUBLIC").setServiceProps(Object.assign({},d))),t.registerVersion("@firebase/firestore","2.4.1")}(qw.Z),N(6787),N(341),N(5283),N(8915);const we=new m.OlP("angularfire2.auth.use-emulator");function Ud(t,e){return function rm(t,e=Zy.z){return new Bn.y(i=>{let o;return null!=e?e.schedule(()=>{o=t.onSnapshot({includeMetadataChanges:!0},i)}):o=t.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=o&&o()}})}(t,e)}function ol(t,e){return Ud(t,e).pipe((0,it.U)(i=>({payload:i,type:"query"})))}function fu(t,e){return ol(t,e).pipe(xu(void 0),jf(),(0,it.U)(([i,o])=>{const u=o.payload.docChanges(),l=u.map(f=>({type:f.type,payload:f}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((f,g)=>{const _=u.find(E=>E.doc.ref.isEqual(f.ref)),w=null==i?void 0:i.payload.docs.find(E=>E.ref.isEqual(f.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(f.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:f}})}),l}))}function jd(t,e,i){return fu(t,i).pipe(Js((o,u)=>function om(t,e,i){return e.forEach(o=>{i.indexOf(o.type)>-1&&(t=function sm(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return sl(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=t.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return sl(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sl(t,e.oldIndex,1)}return t}(t,o))}),t}(o,u.map(l=>l.payload),e),[]),function Gw(t,e){return i=>i.lift(new ei(t,e))}(),(0,it.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function sl(t,e,i,...o){const u=t.slice();return u.splice(e,i,...o),u}function VI(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class UI{constructor(e,i,o){this.ref=e,this.query=i,this.afs=o}stateChanges(e){let i=fu(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,it.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),i.pipe(xu(void 0),jf(),Yr(([o,u])=>u.length>0||!o),(0,it.U)(([o,u])=>u),this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Js((i,o)=>[...i,...o],[]))}snapshotChanges(e){const i=VI(e);return jd(this.query,i,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return ol(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(i=>i.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,Bt.D)(this.query.get(e)).pipe((0,Gi.QV)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new jI(this.ref.doc(e),this.afs)}}class jI{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const o=this.ref.collection(e),{ref:u,query:l}=HI(o,i);return new UI(u,l,this.afs)}snapshotChanges(){return function im(t,e){return Ud(t,e).pipe(xu(void 0),jf(),(0,it.U)(([i,o])=>o.exists?(null==i?void 0:i.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,Bt.D)(this.ref.get(e)).pipe((0,Gi.QV)(this.afs.schedulers.insideAngular))}}class XT{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?fu(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(i=>i.filter(o=>e.indexOf(o.type)>-1)),Yr(i=>i.length>0),this.afs.keepUnstableUntilFirst):fu(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(Js((i,o)=>[...i,...o],[]))}snapshotChanges(e){const i=VI(e);return jd(this.query,i,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return ol(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,Bt.D)(this.query.get(e)).pipe((0,Gi.QV)(this.afs.schedulers.insideAngular))}}const zE=new m.OlP("angularfire2.enableFirestorePersistence"),WE=new m.OlP("angularfire2.firestore.persistenceSettings"),BI=new m.OlP("angularfire2.firestore.settings"),GI=new m.OlP("angularfire2.firestore.use-emulator");function HI(t,e=(i=>i)){return{query:e(t),ref:t}}let $I=(()=>{class t{constructor(i,o,u,l,f,g,_,w,E){this.schedulers=new Qt.HU(g),this.keepUnstableUntilFirst=(0,Qt.ss)(this.schedulers);const I=(0,Qt.on)(i,g,o);!$w.Z.auth&&E&&(0,Qt.yq)();const S=w;[this.firestore,this.persistenceEnabled$]=(0,Qt.sI)(`${I.name}.firestore`,"AngularFirestore",I,()=>{const O=g.runOutsideAngular(()=>I.firestore());if(l&&O.settings(l),S&&O.useEmulator(...S),u&&!function Yd(t){return"server"===t}(f)){const V=()=>{try{return(0,Bt.D)(O.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(W){return"undefined"!=typeof console&&console.warn(W),(0,Ye.of)(!1)}};return[O,g.runOutsideAngular(V)]}return[O,(0,Ye.of)(!1)]},[l,S,u])}collection(i,o){let u;u="string"==typeof i?this.firestore.collection(i):i;const{ref:l,query:f}=HI(u,o),g=this.schedulers.ngZone.run(()=>l);return new UI(g,f,this)}collectionGroup(i,o){const u=o||(f=>f),l=this.firestore.collectionGroup(i);return new XT(u(l),this)}doc(i){let o;o="string"==typeof i?this.firestore.doc(i):i;const u=this.schedulers.ngZone.run(()=>o);return new jI(u,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(i){return new(i||t)(m.LFG(Qt.Dh),m.LFG(Qt.xv,8),m.LFG(zE,8),m.LFG(BI,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(WE,8),m.LFG(GI,8),m.LFG(we,8))},t.\u0275prov=m.Yz7({factory:function(){return new t(m.LFG(Qt.Dh),m.LFG(Qt.xv,8),m.LFG(zE,8),m.LFG(BI,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(WE,8),m.LFG(GI,8),m.LFG(we,8))},token:t,providedIn:"any"}),t})(),eS=(()=>{class t{static enablePersistence(i){return{ngModule:t,providers:[{provide:zE,useValue:!0},{provide:WE,useValue:i}]}}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[$I]}),t})(),qI=(()=>{class t{constructor(i){this.firestore=i}createUser(i){this.firestore.collection("Utilisateur").add(i)}readUser(){return this.firestore.collection("Utilisateur").snapshotChanges()}updateUser(i,o){return this.firestore.doc("Utilisateur/"+i).update(o)}deleteUser(i){return this.firestore.doc("Utilisateur/"+i).delete()}}return t.\u0275fac=function(i){return new(i||t)(m.LFG($I))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function tS(t,e){if(1&t){const i=m.EpF();m.TgZ(0,"button",16),m.NdJ("click",function(){return m.CHM(i),m.oxw().createUser()}),m._uU(1,"Ajouter"),m.qZA()}}function nS(t,e){if(1&t){const i=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"button",17),m.NdJ("click",function(){return m.CHM(i),m.oxw().update()}),m._uU(2,"Modifier"),m.qZA(),m._uU(3," \xa0\xa0 "),m.TgZ(4,"button",18),m.NdJ("click",function(){return m.CHM(i),m.oxw().annuler()}),m._uU(5,"annuler"),m.qZA(),m._UZ(6,"br"),m.qZA()}}let KE=(()=>{class t{constructor(i){this.userService=i,this.selected=!1,this.utilisateur=new Uf}ngOnInit(){this.utilisateur.grade="client"}createUser(){let i=Object.assign({},this.utilisateur);this.userService.createUser(i),this.utilisateur=new Uf,this.utilisateur.grade="client"}detectUser(i){this.utilisateur=i,this.selected=!0}annuler(){this.utilisateur=new Uf,this.selected=!1}update(){let i=Object.assign({},this.utilisateur);this.userService.updateUser(i.id,i),alert("modifi\xe9 avec succ\xe9s"),this.annuler()}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(qI))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-adduser"]],decls:32,vars:7,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"mb-3"],["type","text","name","nc","placeholder","Nom complet",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlInput1",1,"form-label"],["type","email","name","mail","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],["type","password","name","pass","placeholder","Votre mot de passe ici",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","adr","placeholder","tel",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","name","tel","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3","text-center"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],["list",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m._UZ(2,"div",2),m.TgZ(3,"div",2),m.TgZ(4,"form"),m.TgZ(5,"div",3),m.TgZ(6,"label"),m._uU(7,"Nom complet"),m.qZA(),m.TgZ(8,"input",4),m.NdJ("ngModelChange",function(l){return o.utilisateur.nomcomplet=l}),m.qZA(),m.qZA(),m.TgZ(9,"div",3),m.TgZ(10,"label",5),m._uU(11,"Email address"),m.qZA(),m.TgZ(12,"input",6),m.NdJ("ngModelChange",function(l){return o.utilisateur.email=l}),m.qZA(),m.qZA(),m.TgZ(13,"div",3),m.TgZ(14,"label",7),m._uU(15,"Mot de passe"),m.qZA(),m.TgZ(16,"input",8),m.NdJ("ngModelChange",function(l){return o.utilisateur.mdp=l}),m.qZA(),m.qZA(),m.TgZ(17,"div",3),m.TgZ(18,"label",7),m._uU(19,"Telephone"),m.qZA(),m.TgZ(20,"input",9),m.NdJ("ngModelChange",function(l){return o.utilisateur.tel=l}),m.qZA(),m.qZA(),m.TgZ(21,"div",3),m.TgZ(22,"label",10),m._uU(23,"Adresse"),m.qZA(),m.TgZ(24,"textarea",11),m.NdJ("ngModelChange",function(l){return o.utilisateur.adresse=l}),m.qZA(),m.qZA(),m.TgZ(25,"div",12),m.YNc(26,tS,2,0,"button",13),m.YNc(27,nS,7,0,"div",14),m.qZA(),m.qZA(),m.qZA(),m._UZ(28,"div",2),m.qZA(),m.qZA(),m._UZ(29,"div"),m._UZ(30,"app-list-users",null,15)),2&i&&(m.xp6(8),m.Q6J("ngModel",o.utilisateur.nomcomplet),m.xp6(4),m.Q6J("ngModel",o.utilisateur.email),m.xp6(4),m.Q6J("ngModel",o.utilisateur.mdp),m.xp6(4),m.Q6J("ngModel",o.utilisateur.tel),m.xp6(4),m.Q6J("ngModel",o.utilisateur.adresse),m.xp6(2),m.Q6J("ngIf",!o.selected),m.xp6(1),m.Q6J("ngIf",o.selected))},styles:[""]}),t})();function rS(t,e){if(1&t){const i=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m.TgZ(2,"input",4),m.NdJ("click",function(){const l=m.CHM(i).$implicit;return m.oxw().adddel(l.id)}),m.qZA(),m._uU(3," Select"),m.qZA(),m.TgZ(4,"td"),m._uU(5),m.qZA(),m.TgZ(6,"td"),m._uU(7),m.qZA(),m.TgZ(8,"td"),m._uU(9),m.qZA(),m.TgZ(10,"td"),m._uU(11),m.qZA(),m.TgZ(12,"td"),m.TgZ(13,"button",5),m.NdJ("click",function(){const l=m.CHM(i).$implicit;return m.oxw().deleteOne(l.id)}),m._uU(14,"supprimer"),m.qZA(),m._uU(15," \xa0\xa0"),m.TgZ(16,"button",6),m.NdJ("click",function(){const l=m.CHM(i).$implicit;return m.oxw().selectit(l)}),m._uU(17,"selectionner"),m.qZA(),m._UZ(18,"br"),m._uU(19),m.qZA(),m.qZA()}if(2&t){const i=e.$implicit;m.xp6(5),m.Oqu(i.nomcomplet),m.xp6(2),m.Oqu(i.email),m.xp6(2),m.Oqu(i.adresse),m.xp6(2),m.Oqu(i.tel),m.xp6(8),m.hij(" ",i.id," ")}}const iS=function(){return[]};let zI=(()=>{class t{constructor(i,o){this.userService=i,this.addUser=o,this.selection=[],this.filtre="",this.cuser=new Uf}ngOnInit(){this.users=[],this.selection=[],this.readMyUsers()}readMyUsers(){this.userService.readUser().pipe((0,it.U)(i=>i.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data())))).subscribe(i=>{this.users=i,console.log("users",this.users)})}adddel(i){var o;null===(o=this.selection)||void 0===o||o.push(i)}deleteAdll(){for(let i of this.selection)this.userService.deleteUser(i);this.selection=[]}deleteOne(i){confirm("vous \xeates s\xfbre de vouloire supprimer")&&this.userService.deleteUser(i)}selectit(i){this.cuser=i,this.addUser.detectUser(this.cuser)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(qI),m.Y36(KE))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-list-users"]],decls:20,vars:3,consts:[[1,"text-center"],[1,"btn","btn-danger",3,"disabled","click"],[1,"table","bordered"],[4,"ngFor","ngForOf"],["placeholder","x","name","sel","type","checkbox",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(i,o){1&i&&(m.TgZ(0,"div",0),m.TgZ(1,"button",1),m.NdJ("click",function(){return o.deleteAdll()}),m._uU(2,"Supprimer la s\xe9l\xe9ction"),m.qZA(),m.qZA(),m.TgZ(3,"table",2),m.TgZ(4,"thead"),m.TgZ(5,"tr"),m.TgZ(6,"th"),m._uU(7,"#"),m.qZA(),m.TgZ(8,"th"),m._uU(9,"Nom Complet"),m.qZA(),m.TgZ(10,"th"),m._uU(11,"Email"),m.qZA(),m.TgZ(12,"th"),m._uU(13,"Adresse"),m.qZA(),m.TgZ(14,"th"),m._uU(15,"Tel"),m.qZA(),m.TgZ(16,"th"),m._uU(17,"Action"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(18,"tbody"),m.YNc(19,rS,20,5,"tr",3),m.qZA(),m.qZA()),2&i&&(m.xp6(1),m.Q6J("disabled",o.selection==m.DdM(2,iS)),m.xp6(18),m.Q6J("ngForOf",o.users))},directives:[$o],styles:[""]}),t})();const oS=[{path:"",component:KE},{path:"list",component:zI}];let sS=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[Qu.forRoot(oS)],Qu]}),t})(),aS=(()=>{class t{constructor(){this.title="commerce"}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){1&i&&m._UZ(0,"router-outlet")},directives:[$u],styles:[""]}),t})();const WI_firebase={apiKey:"AIzaSyCaWXeLf1dYtJJ8JYdkYJMRbmTGl0ahKTE",authDomain:"mycommerce-28cab.firebaseapp.com",projectId:"mycommerce-28cab",storageBucket:"mycommerce-28cab.appspot.com",messagingSenderId:"553477085294",appId:"1:553477085294:web:5d97f0da4e87bf1457ae7f",measurementId:"G-TF554DXLXG"};var uS=N(7830);function X0(t,e){return new Bn.y(i=>{const o=t.length;if(0===o)return void i.complete();const u=new Array(o);let l=0,f=0;for(let g=0;g<o;g++){const _=(0,Bt.D)(t[g]);let w=!1;i.add(_.subscribe({next:E=>{w||(w=!0,f++),u[g]=E},error:E=>i.error(E),complete:()=>{l++,(l===o||!w)&&(f===o&&i.next(e?e.reduce((E,I,S)=>(E[I]=u[S],E),{}):u),i.complete())}}))}})}let KI=(()=>{class t{constructor(i,o){this._renderer=i,this._elementRef=o,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(i,o){this._renderer.setProperty(this._elementRef.nativeElement,i,o)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(m.Qsj),m.Y36(m.SBq))},t.\u0275dir=m.lG2({type:t}),t})(),al=(()=>{class t extends KI{}return t.\u0275fac=function(){let e;return function(o){return(e||(e=m.n5z(t)))(o||t)}}(),t.\u0275dir=m.lG2({type:t,features:[m.qOj]}),t})();const Bo=new m.OlP("NgValueAccessor"),hS={provide:Bo,useExisting:(0,m.Gpc)(()=>eb),multi:!0},fS=new m.OlP("CompositionEventMode");let eb=(()=>{class t extends KI{constructor(i,o,u){super(i,o),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dS(){const t=le()?le().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(i){this.setProperty("value",null==i?"":i)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(fS,8))},t.\u0275dir=m.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){1&i&&m.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[m._Bn([hS]),m.qOj]}),t})();const hr=new m.OlP("NgValidators"),gu=new m.OlP("NgAsyncValidators");function oT(t){return null!=t}function sT(t){const e=(0,m.QGY)(t)?(0,Bt.D)(t):t;return(0,m.CqO)(e),e}function aT(t){let e={};return t.forEach(i=>{e=null!=i?Object.assign(Object.assign({},e),i):e}),0===Object.keys(e).length?null:e}function uT(t,e){return e.map(i=>i(t))}function cT(t){return t.map(e=>function gS(t){return!t.validate}(e)?e:i=>e.validate(i))}function YE(t){return null!=t?function lT(t){if(!t)return null;const e=t.filter(oT);return 0==e.length?null:function(i){return aT(uT(i,e))}}(cT(t)):null}function QE(t){return null!=t?function hT(t){if(!t)return null;const e=t.filter(oT);return 0==e.length?null:function(i){return function cS(...t){if(1===t.length){const e=t[0];if((0,Tl.k)(e))return X0(e,null);if((0,uS.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const i=Object.keys(e);return X0(i.map(o=>e[o]),i)}}if("function"==typeof t[t.length-1]){const e=t.pop();return X0(t=1===t.length&&(0,Tl.k)(t[0])?t[0]:t,null).pipe((0,it.U)(i=>e(...i)))}return X0(t,null)}(uT(i,e).map(sT)).pipe((0,it.U)(aT))}}(cT(t)):null}function dT(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ZE(t){return t?Array.isArray(t)?t:[t]:[]}function tb(t,e){return Array.isArray(t)?t.includes(e):t===e}function gT(t,e){const i=ZE(e);return ZE(t).forEach(u=>{tb(i,u)||i.push(u)}),i}function mT(t,e){return ZE(e).filter(i=>!tb(t,i))}class yT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,i){return!!this.control&&this.control.hasError(e,i)}getError(e,i){return this.control?this.control.getError(e,i):null}}class mu extends yT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ar extends yT{get formDirective(){return null}get path(){return null}}class vT{constructor(e){this._cd=e}is(e){var i,o,u;return"submitted"===e?!!(null===(i=this._cd)||void 0===i?void 0:i.submitted):!!(null===(u=null===(o=this._cd)||void 0===o?void 0:o.control)||void 0===u?void 0:u[e])}}let _T=(()=>{class t extends vT{constructor(i){super(i)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(mu,2))},t.\u0275dir=m.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){2&i&&m.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[m.qOj]}),t})(),bT=(()=>{class t extends vT{constructor(i){super(i)}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(Ar,10))},t.\u0275dir=m.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){2&i&&m.ekj("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))("ng-submitted",o.is("submitted"))},features:[m.qOj]}),t})();function um(t,e){eC(t,e),e.valueAccessor.writeValue(t.value),function bS(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&wT(t,e)})}(t,e),function DS(t,e){const i=(o,u)=>{e.valueAccessor.writeValue(o),u&&e.viewToModelUpdate(o)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}(t,e),function wS(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&wT(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function _S(t,e){if(e.valueAccessor.setDisabledState){const i=o=>{e.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}(t,e)}function ob(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function eC(t,e){const i=function fT(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(dT(i,e.validator)):"function"==typeof i&&t.setValidators([i]);const o=function pT(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(dT(o,e.asyncValidator)):"function"==typeof o&&t.setAsyncValidators([o]);const u=()=>t.updateValueAndValidity();ob(e._rawValidators,u),ob(e._rawAsyncValidators,u)}function wT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ab(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}const cm="VALID",ub="INVALID",Bd="PENDING",lm="DISABLED";function rC(t){return(oC(t)?t.validators:t)||null}function CT(t){return Array.isArray(t)?YE(t):t||null}function iC(t,e){return(oC(e)?e.asyncValidators:t)||null}function IT(t){return Array.isArray(t)?QE(t):t||null}function oC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class sC{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=i,this._composedValidatorFn=CT(this._rawValidators),this._composedAsyncValidatorFn=IT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cm}get invalid(){return this.status===ub}get pending(){return this.status==Bd}get disabled(){return this.status===lm}get enabled(){return this.status!==lm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=CT(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=IT(e)}addValidators(e){this.setValidators(gT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mT(e,this._rawAsyncValidators))}hasValidator(e){return tb(this._rawValidators,e)}hasAsyncValidator(e){return tb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const i=this._parentMarkedDirty(e.onlySelf);this.status=lm,this.errors=null,this._forEachChild(o=>{o.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){const i=this._parentMarkedDirty(e.onlySelf);this.status=cm,this._forEachChild(o=>{o.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cm||this.status===Bd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lm:cm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bd,this._hasOwnPendingAsyncValidator=!0;const i=sT(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(!1!==i.emitEvent)}get(e){return function TS(t,e,i){if(null==e||(Array.isArray(e)||(e=e.split(i)),Array.isArray(e)&&0===e.length))return null;let o=t;return e.forEach(u=>{o=o instanceof aC?o.controls.hasOwnProperty(u)?o.controls[u]:null:o instanceof SS&&o.at(u)||null}),o}(this,e,".")}getError(e,i){const o=i?this.get(i):this;return o&&o.errors?o.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?lm:this.errors?ub:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bd)?Bd:this._anyControlsHaveStatus(ub)?ub:cm}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cb extends sC{constructor(e=null,i,o){super(rC(i),iC(o,i)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==i.emitViewToModelChange)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=null,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ab(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ab(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class aC extends sC{constructor(e,i,o){super(rC(i),iC(o,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,o={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){null!=e&&(Object.keys(e).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(e[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((o,u)=>{o.reset(e[u],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,o)=>(e[o]=i instanceof cb?i.value:i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,o)=>!!o._syncPendingControls()||i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(i=>{const o=this.controls[i];o&&e(o,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const i of Object.keys(this.controls)){const o=this.controls[i];if(this.contains(i)&&e(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(e,i){let o=e;return this._forEachChild((u,l)=>{o=i(o,u,l)}),o}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((i,o)=>{if(void 0===e[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class SS extends sC{constructor(e,i,o){super(rC(i),iC(o,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,i={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(e,i,o={}){this.controls.splice(e,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(e,i,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),i&&(this.controls.splice(e,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,i={}){this._checkAllValuesPresent(e),e.forEach((o,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){null!=e&&(e.forEach((o,u)=>{this.at(u)&&this.at(u).patchValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e=[],i={}){this._forEachChild((o,u)=>{o.reset(e[u],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(e=>e instanceof cb?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((i,o)=>!!o._syncPendingControls()||i,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((i,o)=>{e(i,o)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(i=>i.enabled&&e(i))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((i,o)=>{if(void 0===e[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const AS={provide:Ar,useExisting:(0,m.Gpc)(()=>lb)},hm=(()=>Promise.resolve(null))();let lb=(()=>{class t extends Ar{constructor(i,o){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new m.vpe,this.form=new aC({},YE(i),QE(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){hm.then(()=>{const o=this._findContainer(i.path);i.control=o.registerControl(i.name,i.control),um(i.control,i),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){hm.then(()=>{const o=this._findContainer(i.path);o&&o.removeControl(i.name),ab(this._directives,i)})}addFormGroup(i){hm.then(()=>{const o=this._findContainer(i.path),u=new aC({});(function DT(t,e){eC(t,e)})(u,i),o.registerControl(i.name,u),u.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){hm.then(()=>{const o=this._findContainer(i.path);o&&o.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,o){hm.then(()=>{this.form.get(i.path).setValue(o)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,function ET(t,e){t._syncPendingControls(),e.forEach(i=>{const o=i.control;"submit"===o.updateOn&&o._pendingChange&&(i.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(i),!1}onReset(){this.resetForm()}resetForm(i){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(hr,10),m.Y36(gu,10))},t.\u0275dir=m.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){1&i&&m.NdJ("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([AS]),m.qOj]}),t})();const xS={provide:mu,useExisting:(0,m.Gpc)(()=>uC)},AT=(()=>Promise.resolve(null))();let uC=(()=>{class t extends mu{constructor(i,o,u,l){super(),this.control=new cb,this._registered=!1,this.update=new m.vpe,this._parent=i,this._setValidators(o),this._setAsyncValidators(u),this.valueAccessor=function nC(t,e){if(!e)return null;let i,o,u;return Array.isArray(e),e.forEach(l=>{l.constructor===eb?i=l:function IS(t){return Object.getPrototypeOf(t.constructor)===al}(l)?o=l:u=l}),u||o||i||null}(0,l)}ngOnChanges(i){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in i&&this._updateDisabled(i),function tC(t,e){if(!t.hasOwnProperty("model"))return!1;const i=t.model;return!!i.isFirstChange()||!Object.is(e,i.currentValue)}(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function rb(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){um(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(i){AT.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1})})}_updateDisabled(i){const o=i.isDisabled.currentValue,u=""===o||o&&"false"!==o;AT.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(Ar,9),m.Y36(hr,10),m.Y36(gu,10),m.Y36(Bo,10))},t.\u0275dir=m.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([xS]),m.qOj,m.TTD]}),t})(),MT=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=m.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),NT=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({}),t})(),eA=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[NT]]}),t})(),tA=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[eA]}),t})(),nA=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t,bootstrap:[aS]}),t.\u0275inj=m.cJS({providers:[],imports:[[Sb,tA,sS,Qt.hO,Qt.hO.initializeApp(WI_firebase),eS]]}),t})();m.B6R(KE,[MT,bT,lb,eb,_T,uC,qo,zI],[]),(0,m.G48)(),Tb().bootstrapModule(nA).catch(t=>console.error(t))},5867:(Ve,me,N)=>{N.d(me,{Z:()=>m.Z});var m=N(8367);m.Z.registerVersion("firebase","8.10.1","app"),m.Z.SDK_VERSION="8.10.1"},2916:(Ve,me,N)=>{N.d(me,{y:()=>P});var m=N(3489),le=N(7668),X=N(3292),K=N(3821),ce=N(5379);var x=N(2830);let P=(()=>{class R{constructor(re){this._isScalar=!1,re&&(this._subscribe=re)}lift(re){const ee=new R;return ee.source=this,ee.operator=re,ee}subscribe(re,ee,ue){const{operator:Ue}=this,Ce=function ne(R,j,re){if(R){if(R instanceof m.L)return R;if(R[le.b])return R[le.b]()}return R||j||re?new m.L(R,j,re):new m.L(X.c)}(re,ee,ue);if(Ce.add(Ue?Ue.call(Ce,this.source):this.source||x.v.useDeprecatedSynchronousErrorHandling&&!Ce.syncErrorThrowable?this._subscribe(Ce):this._trySubscribe(Ce)),x.v.useDeprecatedSynchronousErrorHandling&&Ce.syncErrorThrowable&&(Ce.syncErrorThrowable=!1,Ce.syncErrorThrown))throw Ce.syncErrorValue;return Ce}_trySubscribe(re){try{return this._subscribe(re)}catch(ee){x.v.useDeprecatedSynchronousErrorHandling&&(re.syncErrorThrown=!0,re.syncErrorValue=ee),function Q(R){for(;R;){const{closed:j,destination:re,isStopped:ee}=R;if(j||ee)return!1;R=re&&re instanceof m.L?re:null}return!0}(re)?re.error(ee):console.warn(ee)}}forEach(re,ee){return new(ee=k(ee))((ue,Ue)=>{let Ce;Ce=this.subscribe(_e=>{try{re(_e)}catch(qe){Ue(qe),Ce&&Ce.unsubscribe()}},Ue,ue)})}_subscribe(re){const{source:ee}=this;return ee&&ee.subscribe(re)}[K.L](){return this}pipe(...re){return 0===re.length?this:function H(R){return 0===R.length?ce.y:1===R.length?R[0]:function(re){return R.reduce((ee,ue)=>ue(ee),re)}}(re)(this)}toPromise(re){return new(re=k(re))((ee,ue)=>{let Ue;this.subscribe(Ce=>Ue=Ce,Ce=>ue(Ce),()=>ee(Ue))})}}return R.create=j=>new R(j),R})();function k(R){if(R||(R=x.v.Promise||Promise),!R)throw new Error("no Promise impl found");return R}},3292:(Ve,me,N)=>{N.d(me,{c:()=>le});var m=N(2830),Q=N(2782);const le={closed:!0,next(X){},error(X){if(m.v.useDeprecatedSynchronousErrorHandling)throw X;(0,Q.z)(X)},complete(){}}},8929:(Ve,me,N)=>{N.d(me,{Yc:()=>ce,xQ:()=>ie});var m=N(2916),Q=N(3489),le=N(2654),X=N(5279),ne=N(5283),K=N(7668);class ce extends Q.L{constructor(P){super(P),this.destination=P}}let ie=(()=>{class x extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[K.b](){return new ce(this)}lift(k){const R=new H(this,this);return R.operator=k,R}next(k){if(this.closed)throw new X.N;if(!this.isStopped){const{observers:R}=this,j=R.length,re=R.slice();for(let ee=0;ee<j;ee++)re[ee].next(k)}}error(k){if(this.closed)throw new X.N;this.hasError=!0,this.thrownError=k,this.isStopped=!0;const{observers:R}=this,j=R.length,re=R.slice();for(let ee=0;ee<j;ee++)re[ee].error(k);this.observers.length=0}complete(){if(this.closed)throw new X.N;this.isStopped=!0;const{observers:k}=this,R=k.length,j=k.slice();for(let re=0;re<R;re++)j[re].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(k){if(this.closed)throw new X.N;return super._trySubscribe(k)}_subscribe(k){if(this.closed)throw new X.N;return this.hasError?(k.error(this.thrownError),le.w.EMPTY):this.isStopped?(k.complete(),le.w.EMPTY):(this.observers.push(k),new ne.W(this,k))}asObservable(){const k=new m.y;return k.source=this,k}}return x.create=(P,k)=>new H(P,k),x})();class H extends ie{constructor(P,k){super(),this.destination=P,this.source=k}next(P){const{destination:k}=this;k&&k.next&&k.next(P)}error(P){const{destination:k}=this;k&&k.error&&this.destination.error(P)}complete(){const{destination:P}=this;P&&P.complete&&this.destination.complete()}_subscribe(P){const{source:k}=this;return k?this.source.subscribe(P):le.w.EMPTY}}},5283:(Ve,me,N)=>{N.d(me,{W:()=>Q});var m=N(2654);class Q extends m.w{constructor(X,ne){super(),this.subject=X,this.subscriber=ne,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const X=this.subject,ne=X.observers;if(this.subject=null,!ne||0===ne.length||X.isStopped||X.closed)return;const K=ne.indexOf(this.subscriber);-1!==K&&ne.splice(K,1)}}},3489:(Ve,me,N)=>{N.d(me,{L:()=>ce});var m=N(7043),Q=N(3292),le=N(2654),X=N(7668),ne=N(2830),K=N(2782);class ce extends le.w{constructor(x,P,k){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Q.c;break;case 1:if(!x){this.destination=Q.c;break}if("object"==typeof x){x instanceof ce?(this.syncErrorThrowable=x.syncErrorThrowable,this.destination=x,x.add(this)):(this.syncErrorThrowable=!0,this.destination=new ie(this,x));break}default:this.syncErrorThrowable=!0,this.destination=new ie(this,x,P,k)}}[X.b](){return this}static create(x,P,k){const R=new ce(x,P,k);return R.syncErrorThrowable=!1,R}next(x){this.isStopped||this._next(x)}error(x){this.isStopped||(this.isStopped=!0,this._error(x))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(x){this.destination.next(x)}_error(x){this.destination.error(x),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:x}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=x,this}}class ie extends ce{constructor(x,P,k,R){super(),this._parentSubscriber=x;let j,re=this;(0,m.m)(P)?j=P:P&&(j=P.next,k=P.error,R=P.complete,P!==Q.c&&(re=Object.create(P),(0,m.m)(re.unsubscribe)&&this.add(re.unsubscribe.bind(re)),re.unsubscribe=this.unsubscribe.bind(this))),this._context=re,this._next=j,this._error=k,this._complete=R}next(x){if(!this.isStopped&&this._next){const{_parentSubscriber:P}=this;ne.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?this.__tryOrSetError(P,this._next,x)&&this.unsubscribe():this.__tryOrUnsub(this._next,x)}}error(x){if(!this.isStopped){const{_parentSubscriber:P}=this,{useDeprecatedSynchronousErrorHandling:k}=ne.v;if(this._error)k&&P.syncErrorThrowable?(this.__tryOrSetError(P,this._error,x),this.unsubscribe()):(this.__tryOrUnsub(this._error,x),this.unsubscribe());else if(P.syncErrorThrowable)k?(P.syncErrorValue=x,P.syncErrorThrown=!0):(0,K.z)(x),this.unsubscribe();else{if(this.unsubscribe(),k)throw x;(0,K.z)(x)}}}complete(){if(!this.isStopped){const{_parentSubscriber:x}=this;if(this._complete){const P=()=>this._complete.call(this._context);ne.v.useDeprecatedSynchronousErrorHandling&&x.syncErrorThrowable?(this.__tryOrSetError(x,P),this.unsubscribe()):(this.__tryOrUnsub(P),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(x,P){try{x.call(this._context,P)}catch(k){if(this.unsubscribe(),ne.v.useDeprecatedSynchronousErrorHandling)throw k;(0,K.z)(k)}}__tryOrSetError(x,P,k){if(!ne.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{P.call(this._context,k)}catch(R){return ne.v.useDeprecatedSynchronousErrorHandling?(x.syncErrorValue=R,x.syncErrorThrown=!0,!0):((0,K.z)(R),!0)}return!1}_unsubscribe(){const{_parentSubscriber:x}=this;this._context=null,this._parentSubscriber=null,x.unsubscribe()}}},2654:(Ve,me,N)=>{N.d(me,{w:()=>K});var m=N(6688),Q=N(7830),le=N(7043);const ne=(()=>{function ie(H){return Error.call(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((x,P)=>`${P+1}) ${x.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H,this}return ie.prototype=Object.create(Error.prototype),ie})();class K{constructor(H){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,H&&(this._ctorUnsubscribe=!0,this._unsubscribe=H)}unsubscribe(){let H;if(this.closed)return;let{_parentOrParents:x,_ctorUnsubscribe:P,_unsubscribe:k,_subscriptions:R}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,x instanceof K)x.remove(this);else if(null!==x)for(let j=0;j<x.length;++j)x[j].remove(this);if((0,le.m)(k)){P&&(this._unsubscribe=void 0);try{k.call(this)}catch(j){H=j instanceof ne?ce(j.errors):[j]}}if((0,m.k)(R)){let j=-1,re=R.length;for(;++j<re;){const ee=R[j];if((0,Q.K)(ee))try{ee.unsubscribe()}catch(ue){H=H||[],ue instanceof ne?H=H.concat(ce(ue.errors)):H.push(ue)}}}if(H)throw new ne(H)}add(H){let x=H;if(!H)return K.EMPTY;switch(typeof H){case"function":x=new K(H);case"object":if(x===this||x.closed||"function"!=typeof x.unsubscribe)return x;if(this.closed)return x.unsubscribe(),x;if(!(x instanceof K)){const R=x;x=new K,x._subscriptions=[R]}break;default:throw new Error("unrecognized teardown "+H+" added to Subscription.")}let{_parentOrParents:P}=x;if(null===P)x._parentOrParents=this;else if(P instanceof K){if(P===this)return x;x._parentOrParents=[P,this]}else{if(-1!==P.indexOf(this))return x;P.push(this)}const k=this._subscriptions;return null===k?this._subscriptions=[x]:k.push(x),x}remove(H){const x=this._subscriptions;if(x){const P=x.indexOf(H);-1!==P&&x.splice(P,1)}}}var ie;function ce(ie){return ie.reduce((H,x)=>H.concat(x instanceof ne?x.errors:x),[])}K.EMPTY=((ie=new K).closed=!0,ie)},2830:(Ve,me,N)=>{N.d(me,{v:()=>Q});let m=!1;const Q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(le){if(le){const X=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+X.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=le},get useDeprecatedSynchronousErrorHandling(){return m}}},1177:(Ve,me,N)=>{N.d(me,{Ds:()=>K,IY:()=>X,ft:()=>ie});var m=N(3489),Q=N(2916),le=N(9249);class X extends m.L{constructor(x){super(),this.parent=x}_next(x){this.parent.notifyNext(x)}_error(x){this.parent.notifyError(x),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class K extends m.L{notifyNext(x){this.destination.next(x)}notifyError(x){this.destination.error(x)}notifyComplete(){this.destination.complete()}}function ie(H,x){if(x.closed)return;if(H instanceof Q.y)return H.subscribe(x);let P;try{P=(0,le.s)(H)(x)}catch(k){x.error(k)}return P}},1762:(Ve,me,N)=>{N.d(me,{N:()=>K,c:()=>ne});var m=N(8929),Q=N(2916),le=N(2654),X=N(4327);class ne extends Q.y{constructor(P,k){super(),this.source=P,this.subjectFactory=k,this._refCount=0,this._isComplete=!1}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let P=this._connection;return P||(this._isComplete=!1,P=this._connection=new le.w,P.add(this.source.subscribe(new ce(this.getSubject(),this))),P.closed&&(this._connection=null,P=le.w.EMPTY)),P}refCount(){return(0,X.x)()(this)}}const K=(()=>{const x=ne.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:x._subscribe},_isComplete:{value:x._isComplete,writable:!0},getSubject:{value:x.getSubject},connect:{value:x.connect},refCount:{value:x.refCount}}})();class ce extends m.Yc{constructor(P,k){super(P),this.connectable=k}_error(P){this._unsubscribe(),super._error(P)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const P=this.connectable;if(P){this.connectable=null;const k=P._connection;P._refCount=0,P._subject=null,P._connection=null,k&&k.unsubscribe()}}}},8896:(Ve,me,N)=>{N.d(me,{E:()=>Q,c:()=>le});var m=N(2916);const Q=new m.y(ne=>ne.complete());function le(ne){return ne?function X(ne){return new m.y(K=>ne.schedule(()=>K.complete()))}(ne):Q}},5254:(Ve,me,N)=>{N.d(me,{D:()=>re});var m=N(2916),Q=N(9249),le=N(2654),X=N(3821),ce=N(6454),ie=N(5430),P=N(8955),k=N(8515);function re(ee,ue){return ue?function j(ee,ue){if(null!=ee){if(function x(ee){return ee&&"function"==typeof ee[X.L]}(ee))return function ne(ee,ue){return new m.y(Ue=>{const Ce=new le.w;return Ce.add(ue.schedule(()=>{const _e=ee[X.L]();Ce.add(_e.subscribe({next(qe){Ce.add(ue.schedule(()=>Ue.next(qe)))},error(qe){Ce.add(ue.schedule(()=>Ue.error(qe)))},complete(){Ce.add(ue.schedule(()=>Ue.complete()))}}))})),Ce})}(ee,ue);if((0,P.t)(ee))return function K(ee,ue){return new m.y(Ue=>{const Ce=new le.w;return Ce.add(ue.schedule(()=>ee.then(_e=>{Ce.add(ue.schedule(()=>{Ue.next(_e),Ce.add(ue.schedule(()=>Ue.complete()))}))},_e=>{Ce.add(ue.schedule(()=>Ue.error(_e)))}))),Ce})}(ee,ue);if((0,k.z)(ee))return(0,ce.r)(ee,ue);if(function R(ee){return ee&&"function"==typeof ee[ie.hZ]}(ee)||"string"==typeof ee)return function H(ee,ue){if(!ee)throw new Error("Iterable cannot be null");return new m.y(Ue=>{const Ce=new le.w;let _e;return Ce.add(()=>{_e&&"function"==typeof _e.return&&_e.return()}),Ce.add(ue.schedule(()=>{_e=ee[ie.hZ](),Ce.add(ue.schedule(function(){if(Ue.closed)return;let qe,xe;try{const Se=_e.next();qe=Se.value,xe=Se.done}catch(Se){return void Ue.error(Se)}xe?Ue.complete():(Ue.next(qe),this.schedule())}))})),Ce})}(ee,ue)}throw new TypeError((null!==ee&&typeof ee||ee)+" is not observable")}(ee,ue):ee instanceof m.y?ee:new m.y((0,Q.s)(ee))}},3009:(Ve,me,N)=>{N.d(me,{n:()=>X});var m=N(2916),Q=N(3650),le=N(6454);function X(ne,K){return K?(0,le.r)(ne,K):new m.y((0,Q.V)(ne))}},6787:(Ve,me,N)=>{N.d(me,{T:()=>ne});var m=N(2916),Q=N(2866),le=N(9146),X=N(3009);function ne(...K){let ce=Number.POSITIVE_INFINITY,ie=null,H=K[K.length-1];return(0,Q.K)(H)?(ie=K.pop(),K.length>1&&"number"==typeof K[K.length-1]&&(ce=K.pop())):"number"==typeof H&&(ce=K.pop()),null===ie&&1===K.length&&K[0]instanceof m.y?K[0]:(0,le.J)(ce)((0,X.n)(K,ie))}},1086:(Ve,me,N)=>{N.d(me,{of:()=>X});var m=N(2866),Q=N(3009),le=N(6454);function X(...ne){let K=ne[ne.length-1];return(0,m.K)(K)?(ne.pop(),(0,le.r)(ne,K)):(0,Q.n)(ne)}},4850:(Ve,me,N)=>{N.d(me,{U:()=>Q});var m=N(3489);function Q(ne,K){return function(ie){if("function"!=typeof ne)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ie.lift(new le(ne,K))}}class le{constructor(K,ce){this.project=K,this.thisArg=ce}call(K,ce){return ce.subscribe(new X(K,this.project,this.thisArg))}}class X extends m.L{constructor(K,ce,ie){super(K),this.project=ce,this.count=0,this.thisArg=ie||this}_next(K){let ce;try{ce=this.project.call(this.thisArg,K,this.count++)}catch(ie){return void this.destination.error(ie)}this.destination.next(ce)}}},9146:(Ve,me,N)=>{N.d(me,{J:()=>le});var m=N(1709),Q=N(5379);function le(X=Number.POSITIVE_INFINITY){return(0,m.zg)(Q.y,X)}},1709:(Ve,me,N)=>{N.d(me,{zg:()=>X});var m=N(4850),Q=N(5254),le=N(1177);function X(ie,H,x=Number.POSITIVE_INFINITY){return"function"==typeof H?P=>P.pipe(X((k,R)=>(0,Q.D)(ie(k,R)).pipe((0,m.U)((j,re)=>H(k,j,R,re))),x)):("number"==typeof H&&(x=H),P=>P.lift(new ne(ie,x)))}class ne{constructor(H,x=Number.POSITIVE_INFINITY){this.project=H,this.concurrent=x}call(H,x){return x.subscribe(new K(H,this.project,this.concurrent))}}class K extends le.Ds{constructor(H,x,P=Number.POSITIVE_INFINITY){super(H),this.project=x,this.concurrent=P,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(H){this.active<this.concurrent?this._tryNext(H):this.buffer.push(H)}_tryNext(H){let x;const P=this.index++;try{x=this.project(H,P)}catch(k){return void this.destination.error(k)}this.active++,this._innerSub(x)}_innerSub(H){const x=new le.IY(this),P=this.destination;P.add(x);const k=(0,le.ft)(H,x);k!==x&&P.add(k)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(H){this.destination.next(H)}notifyComplete(){const H=this.buffer;this.active--,H.length>0?this._next(H.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7951:(Ve,me,N)=>{N.d(me,{ht:()=>P,QV:()=>H});var m=N(3489),Q=N(8896),le=N(1086),X=N(2916);function K({error:R,subscriber:j}){j.error(R)}class ie{constructor(j,re,ee){this.kind=j,this.value=re,this.error=ee,this.hasValue="N"===j}observe(j){switch(this.kind){case"N":return j.next&&j.next(this.value);case"E":return j.error&&j.error(this.error);case"C":return j.complete&&j.complete()}}do(j,re,ee){switch(this.kind){case"N":return j&&j(this.value);case"E":return re&&re(this.error);case"C":return ee&&ee()}}accept(j,re,ee){return j&&"function"==typeof j.next?this.observe(j):this.do(j,re,ee)}toObservable(){switch(this.kind){case"N":return(0,le.of)(this.value);case"E":return function ne(R,j){return new X.y(j?re=>j.schedule(K,0,{error:R,subscriber:re}):re=>re.error(R))}(this.error);case"C":return(0,Q.c)()}throw new Error("unexpected notification kind value")}static createNext(j){return void 0!==j?new ie("N",j):ie.undefinedValueNotification}static createError(j){return new ie("E",void 0,j)}static createComplete(){return ie.completeNotification}}function H(R,j=0){return function(ee){return ee.lift(new x(R,j))}}ie.completeNotification=new ie("C"),ie.undefinedValueNotification=new ie("N",void 0);class x{constructor(j,re=0){this.scheduler=j,this.delay=re}call(j,re){return re.subscribe(new P(j,this.scheduler,this.delay))}}class P extends m.L{constructor(j,re,ee=0){super(j),this.scheduler=re,this.delay=ee}static dispatch(j){const{notification:re,destination:ee}=j;re.observe(ee),this.unsubscribe()}scheduleMessage(j){this.destination.add(this.scheduler.schedule(P.dispatch,this.delay,new k(j,this.destination)))}_next(j){this.scheduleMessage(ie.createNext(j))}_error(j){this.scheduleMessage(ie.createError(j)),this.unsubscribe()}_complete(){this.scheduleMessage(ie.createComplete()),this.unsubscribe()}}class k{constructor(j,re){this.notification=j,this.destination=re}}},4327:(Ve,me,N)=>{N.d(me,{x:()=>Q});var m=N(3489);function Q(){return function(K){return K.lift(new le(K))}}class le{constructor(K){this.connectable=K}call(K,ce){const{connectable:ie}=this;ie._refCount++;const H=new X(K,ie),x=ce.subscribe(H);return H.closed||(H.connection=ie.connect()),x}}class X extends m.L{constructor(K,ce){super(K),this.connectable=ce}_unsubscribe(){const{connectable:K}=this;if(!K)return void(this.connection=null);this.connectable=null;const ce=K._refCount;if(ce<=0)return void(this.connection=null);if(K._refCount=ce-1,ce>1)return void(this.connection=null);const{connection:ie}=this,H=K._connection;this.connection=null,H&&(!ie||H===ie)&&H.unsubscribe()}}},8915:(Ve,me,N)=>{N.d(me,{R:()=>ue});var m=N(2916);let Q=1;const le=Promise.resolve(),X={};function ne(Ce){return Ce in X&&(delete X[Ce],!0)}const K={setImmediate(Ce){const _e=Q++;return X[_e]=!0,le.then(()=>ne(_e)&&Ce()),_e},clearImmediate(Ce){ne(Ce)}};var ie=N(6686),x=N(2268);const R=new class P extends x.v{flush(_e){this.active=!0,this.scheduled=void 0;const{actions:qe}=this;let xe,Se=-1,St=qe.length;_e=_e||qe.shift();do{if(xe=_e.execute(_e.state,_e.delay))break}while(++Se<St&&(_e=qe.shift()));if(this.active=!1,xe){for(;++Se<St&&(_e=qe.shift());)_e.unsubscribe();throw xe}}}(class H extends ie.o{constructor(_e,qe){super(_e,qe),this.scheduler=_e,this.work=qe}requestAsyncId(_e,qe,xe=0){return null!==xe&&xe>0?super.requestAsyncId(_e,qe,xe):(_e.actions.push(this),_e.scheduled||(_e.scheduled=K.setImmediate(_e.flush.bind(_e,null))))}recycleAsyncId(_e,qe,xe=0){if(null!==xe&&xe>0||null===xe&&this.delay>0)return super.recycleAsyncId(_e,qe,xe);0===_e.actions.length&&(K.clearImmediate(qe),_e.scheduled=void 0)}});var j=N(6688);class ee extends m.y{constructor(_e,qe=0,xe=R){super(),this.source=_e,this.delayTime=qe,this.scheduler=xe,(!function re(Ce){return!(0,j.k)(Ce)&&Ce-parseFloat(Ce)+1>=0}(qe)||qe<0)&&(this.delayTime=0),(!xe||"function"!=typeof xe.schedule)&&(this.scheduler=R)}static create(_e,qe=0,xe=R){return new ee(_e,qe,xe)}static dispatch(_e){const{source:qe,subscriber:xe}=_e;return this.add(qe.subscribe(xe))}_subscribe(_e){return this.scheduler.schedule(ee.dispatch,this.delayTime,{source:this.source,subscriber:_e})}}function ue(Ce,_e=0){return function(xe){return xe.lift(new Ue(Ce,_e))}}class Ue{constructor(_e,qe){this.scheduler=_e,this.delay=qe}call(_e,qe){return new ee(qe,this.delay,this.scheduler).subscribe(_e)}}},2868:(Ve,me,N)=>{N.d(me,{b:()=>X});var m=N(3489);function Q(){}var le=N(7043);function X(ce,ie,H){return function(P){return P.lift(new ne(ce,ie,H))}}class ne{constructor(ie,H,x){this.nextOrObserver=ie,this.error=H,this.complete=x}call(ie,H){return H.subscribe(new K(ie,this.nextOrObserver,this.error,this.complete))}}class K extends m.L{constructor(ie,H,x,P){super(ie),this._tapNext=Q,this._tapError=Q,this._tapComplete=Q,this._tapError=x||Q,this._tapComplete=P||Q,(0,le.m)(H)?(this._context=this,this._tapNext=H):H&&(this._context=H,this._tapNext=H.next||Q,this._tapError=H.error||Q,this._tapComplete=H.complete||Q)}_next(ie){try{this._tapNext.call(this._context,ie)}catch(H){return void this.destination.error(H)}this.destination.next(ie)}_error(ie){try{this._tapError.call(this._context,ie)}catch(H){return void this.destination.error(H)}this.destination.error(ie)}_complete(){try{this._tapComplete.call(this._context)}catch(ie){return void this.destination.error(ie)}return this.destination.complete()}}},6454:(Ve,me,N)=>{N.d(me,{r:()=>le});var m=N(2916),Q=N(2654);function le(X,ne){return new m.y(K=>{const ce=new Q.w;let ie=0;return ce.add(ne.schedule(function(){ie!==X.length?(K.next(X[ie++]),K.closed||ce.add(this.schedule())):K.complete()})),ce})}},6686:(Ve,me,N)=>{N.d(me,{o:()=>le});var m=N(2654);class Q extends m.w{constructor(ne,K){super()}schedule(ne,K=0){return this}}class le extends Q{constructor(ne,K){super(ne,K),this.scheduler=ne,this.work=K,this.pending=!1}schedule(ne,K=0){if(this.closed)return this;this.state=ne;const ce=this.id,ie=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(ie,ce,K)),this.pending=!0,this.delay=K,this.id=this.id||this.requestAsyncId(ie,this.id,K),this}requestAsyncId(ne,K,ce=0){return setInterval(ne.flush.bind(ne,this),ce)}recycleAsyncId(ne,K,ce=0){if(null!==ce&&this.delay===ce&&!1===this.pending)return K;clearInterval(K)}execute(ne,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ne,K);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,K){let ie,ce=!1;try{this.work(ne)}catch(H){ce=!0,ie=!!H&&H||new Error(H)}if(ce)return this.unsubscribe(),ie}_unsubscribe(){const ne=this.id,K=this.scheduler,ce=K.actions,ie=ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ie&&ce.splice(ie,1),null!=ne&&(this.id=this.recycleAsyncId(K,ne,null)),this.delay=null}}},2268:(Ve,me,N)=>{N.d(me,{v:()=>Q});let m=(()=>{class le{constructor(ne,K=le.now){this.SchedulerAction=ne,this.now=K}schedule(ne,K=0,ce){return new this.SchedulerAction(this,ne).schedule(ce,K)}}return le.now=()=>Date.now(),le})();class Q extends m{constructor(X,ne=m.now){super(X,()=>Q.delegate&&Q.delegate!==this?Q.delegate.now():ne()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(X,ne=0,K){return Q.delegate&&Q.delegate!==this?Q.delegate.schedule(X,ne,K):super.schedule(X,ne,K)}flush(X){const{actions:ne}=this;if(this.active)return void ne.push(X);let K;this.active=!0;do{if(K=X.execute(X.state,X.delay))break}while(X=ne.shift());if(this.active=!1,K){for(;X=ne.shift();)X.unsubscribe();throw K}}}},353:(Ve,me,N)=>{N.d(me,{z:()=>le});var m=N(6686);const le=new(N(2268).v)(m.o)},341:(Ve,me,N)=>{N.d(me,{c:()=>K,N:()=>ne});var m=N(6686),le=N(2268);const ne=new class X extends le.v{}(class Q extends m.o{constructor(ie,H){super(ie,H),this.scheduler=ie,this.work=H}schedule(ie,H=0){return H>0?super.schedule(ie,H):(this.delay=H,this.state=ie,this.scheduler.flush(this),this)}execute(ie,H){return H>0||this.closed?super.execute(ie,H):this._execute(ie,H)}requestAsyncId(ie,H,x=0){return null!==x&&x>0||null===x&&this.delay>0?super.requestAsyncId(ie,H,x):ie.flush(this)}}),K=ne},5430:(Ve,me,N)=>{N.d(me,{hZ:()=>Q});const Q=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(Ve,me,N)=>{N.d(me,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(Ve,me,N)=>{N.d(me,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},5279:(Ve,me,N)=>{N.d(me,{N:()=>Q});const Q=(()=>{function le(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return le.prototype=Object.create(Error.prototype),le})()},2782:(Ve,me,N)=>{function m(Q){setTimeout(()=>{throw Q},0)}N.d(me,{z:()=>m})},5379:(Ve,me,N)=>{function m(Q){return Q}N.d(me,{y:()=>m})},6688:(Ve,me,N)=>{N.d(me,{k:()=>m});const m=Array.isArray||(Q=>Q&&"number"==typeof Q.length)},8515:(Ve,me,N)=>{N.d(me,{z:()=>m});const m=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},7043:(Ve,me,N)=>{function m(Q){return"function"==typeof Q}N.d(me,{m:()=>m})},7830:(Ve,me,N)=>{function m(Q){return null!==Q&&"object"==typeof Q}N.d(me,{K:()=>m})},8955:(Ve,me,N)=>{function m(Q){return!!Q&&"function"!=typeof Q.subscribe&&"function"==typeof Q.then}N.d(me,{t:()=>m})},2866:(Ve,me,N)=>{function m(Q){return Q&&"function"==typeof Q.schedule}N.d(me,{K:()=>m})},9249:(Ve,me,N)=>{N.d(me,{s:()=>P});var m=N(3650),Q=N(2782),X=N(5430),K=N(3821),ie=N(8515),H=N(8955),x=N(7830);const P=k=>{if(k&&"function"==typeof k[K.L])return(k=>R=>{const j=k[K.L]();if("function"!=typeof j.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return j.subscribe(R)})(k);if((0,ie.z)(k))return(0,m.V)(k);if((0,H.t)(k))return(k=>R=>(k.then(j=>{R.closed||(R.next(j),R.complete())},j=>R.error(j)).then(null,Q.z),R))(k);if(k&&"function"==typeof k[X.hZ])return(k=>R=>{const j=k[X.hZ]();for(;;){let re;try{re=j.next()}catch(ee){return R.error(ee),R}if(re.done){R.complete();break}if(R.next(re.value),R.closed)break}return"function"==typeof j.return&&R.add(()=>{j.return&&j.return()}),R})(k);{const j=`You provided ${(0,x.K)(k)?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(j)}}},3650:(Ve,me,N)=>{N.d(me,{V:()=>m});const m=Q=>le=>{for(let X=0,ne=Q.length;X<ne&&!le.closed;X++)le.next(Q[X]);le.complete()}},655:(Ve,me,N)=>{N.d(me,{CR:()=>R,Jh:()=>H,XA:()=>k,ZT:()=>Q,ev:()=>ee,mG:()=>ie,pi:()=>le});var m=function(q,B){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,oe){z.__proto__=oe}||function(z,oe){for(var J in oe)Object.prototype.hasOwnProperty.call(oe,J)&&(z[J]=oe[J])})(q,B)};function Q(q,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function z(){this.constructor=q}m(q,B),q.prototype=null===B?Object.create(B):(z.prototype=B.prototype,new z)}var le=function(){return le=Object.assign||function(B){for(var z,oe=1,J=arguments.length;oe<J;oe++)for(var fe in z=arguments[oe])Object.prototype.hasOwnProperty.call(z,fe)&&(B[fe]=z[fe]);return B},le.apply(this,arguments)};function ie(q,B,z,oe){return new(z||(z=Promise))(function(fe,Ne){function ht(Le){try{Xe(oe.next(Le))}catch(Fe){Ne(Fe)}}function It(Le){try{Xe(oe.throw(Le))}catch(Fe){Ne(Fe)}}function Xe(Le){Le.done?fe(Le.value):function J(fe){return fe instanceof z?fe:new z(function(Ne){Ne(fe)})}(Le.value).then(ht,It)}Xe((oe=oe.apply(q,B||[])).next())})}function H(q,B){var oe,J,fe,Ne,z={label:0,sent:function(){if(1&fe[0])throw fe[1];return fe[1]},trys:[],ops:[]};return Ne={next:ht(0),throw:ht(1),return:ht(2)},"function"==typeof Symbol&&(Ne[Symbol.iterator]=function(){return this}),Ne;function ht(Xe){return function(Le){return function It(Xe){if(oe)throw new TypeError("Generator is already executing.");for(;z;)try{if(oe=1,J&&(fe=2&Xe[0]?J.return:Xe[0]?J.throw||((fe=J.return)&&fe.call(J),0):J.next)&&!(fe=fe.call(J,Xe[1])).done)return fe;switch(J=0,fe&&(Xe=[2&Xe[0],fe.value]),Xe[0]){case 0:case 1:fe=Xe;break;case 4:return z.label++,{value:Xe[1],done:!1};case 5:z.label++,J=Xe[1],Xe=[0];continue;case 7:Xe=z.ops.pop(),z.trys.pop();continue;default:if(!(fe=(fe=z.trys).length>0&&fe[fe.length-1])&&(6===Xe[0]||2===Xe[0])){z=0;continue}if(3===Xe[0]&&(!fe||Xe[1]>fe[0]&&Xe[1]<fe[3])){z.label=Xe[1];break}if(6===Xe[0]&&z.label<fe[1]){z.label=fe[1],fe=Xe;break}if(fe&&z.label<fe[2]){z.label=fe[2],z.ops.push(Xe);break}fe[2]&&z.ops.pop(),z.trys.pop();continue}Xe=B.call(q,z)}catch(Le){Xe=[6,Le],J=0}finally{oe=fe=0}if(5&Xe[0])throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}([Xe,Le])}}}function k(q){var B="function"==typeof Symbol&&Symbol.iterator,z=B&&q[B],oe=0;if(z)return z.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&oe>=q.length&&(q=void 0),{value:q&&q[oe++],done:!q}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(q,B){var z="function"==typeof Symbol&&q[Symbol.iterator];if(!z)return q;var J,Ne,oe=z.call(q),fe=[];try{for(;(void 0===B||B-- >0)&&!(J=oe.next()).done;)fe.push(J.value)}catch(ht){Ne={error:ht}}finally{try{J&&!J.done&&(z=oe.return)&&z.call(oe)}finally{if(Ne)throw Ne.error}}return fe}function ee(q,B,z){if(z||2===arguments.length)for(var fe,oe=0,J=B.length;oe<J;oe++)(fe||!(oe in B))&&(fe||(fe=Array.prototype.slice.call(B,0,oe)),fe[oe]=B[oe]);return q.concat(fe||Array.prototype.slice.call(B))}},6435:(Ve,me,N)=>{N.d(me,{deG:()=>Qm,tb:()=>jg,AFp:()=>Zc,ip1:()=>Id,CZH:()=>ko,hGG:()=>Yn,z2F:()=>ou,sBO:()=>Kg,Sil:()=>Gg,_Vd:()=>Hc,EJc:()=>Bg,SBq:()=>qr,qLn:()=>uo,vpe:()=>xi,tBr:()=>Qr,XFs:()=>Je,OlP:()=>$t,zs3:()=>Fn,ZZ4:()=>il,aQg:()=>lu,soG:()=>Ls,YKP:()=>dg,h0i:()=>Os,PXZ:()=>N0,R0b:()=>lr,FiY:()=>nt,Lbi:()=>Ps,g9A:()=>Sd,Qsj:()=>cg,FYo:()=>ug,JOm:()=>Xr,tp0:()=>sa,Rgc:()=>Wc,dDg:()=>$g,q4F:()=>$_,GfV:()=>id,s_b:()=>nu,ifc:()=>fr,eFA:()=>zg,G48:()=>FE,Gpc:()=>ee,X6Q:()=>F0,_c5:()=>Y0,VLi:()=>x0,c2e:()=>C0,zSh:()=>Ea,wAp:()=>Be,vHH:()=>_e,cg1:()=>zp,kL8:()=>v_,dqk:()=>M,sIi:()=>Ta,CqO:()=>Rh,QGY:()=>Io,F4k:()=>Ap,RDi:()=>wb,AaK:()=>R,qOj:()=>yc,TTD:()=>Kd,_Bn:()=>B_,xp6:()=>Xy,uIk:()=>_c,ekj:()=>jh,Suo:()=>Cg,Xpm:()=>ro,lG2:()=>$s,Yz7:()=>cn,cJS:()=>Go,oAB:()=>qd,Yjl:()=>mm,Y36:()=>Ec,_UZ:()=>Eo,qZA:()=>Cs,TgZ:()=>Oh,EpF:()=>Oa,n5z:()=>Wm,LFG:()=>hn,$8M:()=>uf,$Z:()=>Yi,NdJ:()=>Cc,CRH:()=>Ig,oxw:()=>Tc,Q6J:()=>qt,DdM:()=>Y_,iGM:()=>a0,CHM:()=>Nm,LSH:()=>$u,B6R:()=>hl,YNc:()=>_p,_uU:()=>o_,Oqu:()=>gn,hij:()=>As});var m=N(8929),Q=N(2654),le=N(2916),X=N(6787),ne=N(1762);class ce{constructor(a,c){this.subjectFactory=a,this.selector=c}call(a,c){const{selector:h}=this,d=this.subjectFactory(),p=h(d).subscribe(a);return p.add(c.subscribe(d)),p}}var ie=N(4327);function H(){return new m.xQ}function P(s){for(let a in s)if(s[a]===P)return a;throw Error("Could not find renamed property on target object.")}function k(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function R(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(R).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function j(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const re=P({__forward_ref__:P});function ee(s){return s.__forward_ref__=ee,s.toString=function(){return R(this())},s}function ue(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(re)&&s.__forward_ref__===ee}class _e extends Error{constructor(a,c){super(function xe(s,a){return`${s?`NG0${s}: `:""}${a}`}(a,c)),this.code=a}}function Se(s){return"string"==typeof s?s:null==s?"":String(s)}function St(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Se(s)}function q(s,a){const c=a?` in ${a}`:"";throw new _e("201",`No provider for ${St(s)} found${c}`)}function bt(s,a){null==s&&function st(s,a,c,h){throw new Error(`ASSERTION ERROR: ${s}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,s,null,"!=")}function cn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Go(s){return{providers:s.providers||[],imports:s.imports||[]}}function dt(s){return ft(s,Ot)||ft(s,In)}function ft(s,a){return s.hasOwnProperty(a)?s[a]:null}function Jt(s){return s&&(s.hasOwnProperty(rn)||s.hasOwnProperty(cl))?s[rn]:null}const Ot=P({\u0275prov:P}),rn=P({\u0275inj:P}),In=P({ngInjectableDef:P}),cl=P({ngInjectorDef:P});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let ll;function Pi(s){const a=ll;return ll=s,a}function Wt(s,a,c){const h=dt(s);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&Je.Optional?null:void 0!==a?a:void q(R(s),"Injector")}function He(s){return{toString:s}.toString()}var dr=(()=>((dr=dr||{})[dr.OnPush=0]="OnPush",dr[dr.Default=1]="Default",dr))(),fr=(()=>{return(s=fr||(fr={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",fr;var s})();const Nr="undefined"!=typeof globalThis&&globalThis,Hd="undefined"!=typeof window&&window,Ht="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M=Nr||"undefined"!=typeof global&&global||Hd||Ht,G={},de=[],$e=P({\u0275cmp:P}),pt=P({\u0275dir:P}),wt=P({\u0275pipe:P}),vt=P({\u0275mod:P}),kt=P({\u0275fac:P}),yn=P({__NG_ELEMENT_ID__:P});let pr=0;function ro(s){return He(()=>{const c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===dr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||de,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||fr.Emulated,id:"c",styles:s.styles||de,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return h.id+=pr++,h.inputs=_u(s.inputs,c),h.outputs=_u(s.outputs),p&&p.forEach(v=>v(h)),h.directiveDefs=d?()=>("function"==typeof d?d():d).map(fm):null,h.pipeDefs=y?()=>("function"==typeof y?y():y).map(pm):null,h})}function hl(s,a,c){const h=s.\u0275cmp;h.directiveDefs=()=>a.map(fm),h.pipeDefs=()=>c.map(pm)}function fm(s){return Tn(s)||function hi(s){return s[pt]||null}(s)}function pm(s){return function io(s){return s[wt]||null}(s)}const $d={};function qd(s){return He(()=>{const a={type:s.type,bootstrap:s.bootstrap||de,declarations:s.declarations||de,imports:s.imports||de,exports:s.exports||de,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&($d[s.id]=s.type),a})}function _u(s,a){if(null==s)return G;const c={};for(const h in s)if(s.hasOwnProperty(h)){let d=s[h],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),c[d]=h,a&&(a[d]=p)}return c}const $s=ro;function mm(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Tn(s){return s[$e]||null}function Or(s,a){const c=s[vt]||null;if(!c&&!0===a)throw new Error(`Type ${R(s)} does not have '\u0275mod' property.`);return c}function di(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wr(s){return Array.isArray(s)&&!0===s[1]}function vm(s){return 0!=(8&s.flags)}function Jn(s){return 2==(2&s.flags)}function pl(s){return 1==(1&s.flags)}function Kr(s){return null!==s.template}function pb(s){return 0!=(512&s[2])}function Ko(s,a){return s.hasOwnProperty(kt)?s[kt]:null}class wm{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Kd(){return Dm}function Dm(s){return s.type.prototype.ngOnChanges&&(s.setInput=NC),vb}function vb(){const s=_b(this),a=null==s?void 0:s.current;if(a){const c=s.previous;if(c===G)s.previous=a;else for(let h in a)c[h]=a[h];s.current=null,this.ngOnChanges(a)}}function NC(s,a,c,h){const d=_b(s)||function OC(s,a){return s[Yd]=a}(s,{previous:G,current:null}),p=d.current||(d.current={}),y=d.previous,v=this.declaredInputs[c],b=y[v];p[v]=new wm(b&&b.currentValue,a,y===G),s[h]=a}Kd.ngInherit=!0;const Yd="__ngSimpleChanges__";function _b(s){return s[Yd]||null}let Im;function wb(s){Im=s}function At(s){return!!s.listen}const Sm={createRenderer:(s,a)=>function Zd(){return void 0!==Im?Im:"undefined"!=typeof document?document:void 0}()};function Xt(s){for(;Array.isArray(s);)s=s[0];return s}function ml(s,a){return Xt(a[s])}function Xn(s,a){return Xt(a[s.index])}function Ks(s,a){return s.data[a]}function er(s,a){const c=a[s];return di(c)?c:c[0]}function Jd(s){return 4==(4&s[2])}function Yo(s){return 128==(128&s[2])}function fi(s,a){return null==a?null:s[a]}function yl(s){s[18]=0}function vl(s,a){s[5]+=a;let c=s,h=s[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const Ze={lFrame:rf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Eu(){return Ze.bindingsEnabled}function he(){return Ze.lFrame.lView}function ct(){return Ze.lFrame.tView}function Nm(s){return Ze.lFrame.contextLView=s,s[8]}function en(){let s=Om();for(;null!==s&&64===s.type;)s=s.parent;return s}function Om(){return Ze.lFrame.currentTNode}function pi(s,a){const c=Ze.lFrame;c.currentTNode=s,c.isParent=a}function _l(){return Ze.lFrame.isParent}function bl(){return Ze.isInCheckNoChangesMode}function wl(s){Ze.isInCheckNoChangesMode=s}function Ys(){return Ze.lFrame.bindingIndex++}function Sb(s,a){const c=Ze.lFrame;c.bindingIndex=c.bindingRootIndex=s,ef(a)}function ef(s){Ze.lFrame.currentDirectiveIndex=s}function Ab(){return Ze.lFrame.currentQueryIndex}function tf(s){Ze.lFrame.currentQueryIndex=s}function Mb(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function km(s,a,c){if(c&Je.SkipSelf){let d=a,p=s;for(;!(d=d.parent,null!==d||c&Je.Host||(d=Mb(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;a=d,s=p}const h=Ze.lFrame=xb();return h.currentTNode=a,h.lView=s,!0}function nf(s){const a=xb(),c=s[1];Ze.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function xb(){const s=Ze.lFrame,a=null===s?null:s.child;return null===a?rf(s):a}function rf(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function ji(){const s=Ze.lFrame;return Ze.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Vm=ji;function Dl(){const s=ji();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function tr(){return Ze.lFrame.selectedIndex}function Qo(s){Ze.lFrame.selectedIndex=s}function Yt(){const s=Ze.lFrame;return Ks(s.tView,s.selectedIndex)}function El(s,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:C}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-c,y),v&&((s.contentHooks||(s.contentHooks=[])).push(c,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,v)),b&&(s.viewHooks||(s.viewHooks=[])).push(-c,b),D&&((s.viewHooks||(s.viewHooks=[])).push(c,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,D)),null!=C&&(s.destroyHooks||(s.destroyHooks=[])).push(c,C)}}function sf(s,a,c){Rb(s,a,3,c)}function af(s,a,c,h){(3&s[2])===c&&Rb(s,a,c,h)}function jm(s,a){let c=s[2];(3&c)===a&&(c&=2047,c+=1,s[2]=c)}function Rb(s,a,c,h){const p=null!=h?h:-1,y=a.length-1;let v=0;for(let b=void 0!==h?65535&s[18]:0;b<y;b++)if("number"==typeof a[b+1]){if(v=a[b],null!=h&&v>=h)break}else a[b]<0&&(s[18]+=65536),(v<p||-1==p)&&(GC(s,c,a,b),s[18]=(4294901760&s[18])+b+2),b++}function GC(s,a,c,h){const d=c[h]<0,p=c[h+1],v=s[d?-c[h]:c[h]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Cl{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Iu(s,a,c){const h=At(s);let d=0;for(;d<c.length;){const p=c[d];if("number"==typeof p){if(0!==p)break;d++;const y=c[d++],v=c[d++],b=c[d++];h?s.setAttribute(a,v,b,y):a.setAttributeNS(y,v,b)}else{const y=p,v=c[++d];mr(y)?h&&s.setProperty(a,y,v):h?s.setAttribute(a,y,v):a.setAttribute(y,v),d++}}return d}function Tl(s){return 3===s||4===s||6===s}function mr(s){return 64===s.charCodeAt(0)}function Sl(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const d=a[h];"number"==typeof d?c=d:0===c||Bm(s,c,d,null,-1===c||2===c?a[++h]:null)}}return s}function Bm(s,a,c,h,d){let p=0,y=s.length;if(-1===a)y=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===a){y=-1;break}if(v>a){y=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===c){if(null===h)return void(null!==d&&(s[p+1]=d));if(h===s[p+1])return void(s[p+2]=d)}p++,null!==h&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,a),p=y+1),s.splice(p++,0,c),null!==h&&s.splice(p++,0,h),null!==d&&s.splice(p++,0,d)}function Gm(s){return-1!==s}function Bn(s){return 32767&s}function Qs(s,a){let c=function Lb(s){return s>>16}(s),h=a;for(;c>0;)h=h[15],c--;return h}let Al=!0;function Ml(s){const a=Al;return Al=s,a}let xl=0;function Tu(s,a){const c=mi(s,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(s.injectorIndex=a.length,Su(h.data,s),Su(a,null),Su(h.blueprint,null));const d=Au(s,a),p=s.injectorIndex;if(Gm(d)){const y=Bn(d),v=Qs(d,a),b=v[1].data;for(let D=0;D<8;D++)a[p+D]=v[y+D]|b[y+D]}return a[p+8]=d,p}function Su(s,a){s.push(0,0,0,0,0,0,0,0,a)}function mi(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Au(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,h=null,d=a;for(;null!==d;){const p=d[1],y=p.type;if(h=2===y?p.declTNode:1===y?d[6]:null,null===h)return-1;if(c++,d=d[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function Ol(s,a,c){!function Nl(s,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(yn)&&(h=c[yn]),null==h&&(h=c[yn]=xl++);const d=255&h;a.data[s+(d>>5)]|=1<<d}(s,a,c)}function Jo(s,a,c){if(c&Je.Optional)return s;q(a,"NodeInjector")}function vn(s,a,c,h){if(c&Je.Optional&&void 0===h&&(h=null),0==(c&(Je.Self|Je.Host))){const d=s[9],p=Pi(void 0);try{return d?d.get(a,h,c&Je.Optional):Wt(a,h,c&Je.Optional)}finally{Pi(p)}}return Jo(h,a,c)}function $m(s,a,c,h=Je.Default,d){if(null!==s){const p=function Vb(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(yn)?s[yn]:void 0;return"number"==typeof a?a>=0?255&a:qC:a}(c);if("function"==typeof p){if(!km(a,s,h))return h&Je.Host?Jo(d,c,h):vn(a,c,h,d);try{const y=p(h);if(null!=y||h&Je.Optional)return y;q(c)}finally{Vm()}}else if("number"==typeof p){let y=null,v=mi(s,a),b=-1,D=h&Je.Host?a[16][6]:null;for((-1===v||h&Je.SkipSelf)&&(b=-1===v?Au(s,a):a[v+8],-1!==b&&Js(h,!1)?(y=a[1],v=Bn(b),a=Qs(b,a)):v=-1);-1!==v;){const C=a[1];if(xu(p,v,C.data)){const A=zm(v,a,c,y,h,D);if(A!==qm)return A}b=a[v+8],-1!==b&&Js(h,a[1].data[v+8]===D)&&xu(p,v,a)?(y=C,v=Bn(b),a=Qs(b,a)):v=-1}}}return vn(a,c,h,d)}const qm={};function qC(){return new Xs(en(),he())}function zm(s,a,c,h,d,p){const y=a[1],v=y.data[s+8],C=Zs(v,y,c,null==h?Jn(v)&&Al:h!=y&&0!=(3&v.type),d&Je.Host&&p===v);return null!==C?Mu(a,y,C,v):qm}function Zs(s,a,c,h,d){const p=s.providerIndexes,y=a.data,v=1048575&p,b=s.directiveStart,C=p>>20,F=d?v+C:s.directiveEnd;for(let U=h?v:v+C;U<F;U++){const te=y[U];if(U<b&&c===te||U>=b&&te.type===c)return U}if(d){const U=y[b];if(U&&Kr(U)&&U.type===c)return b}return null}function Mu(s,a,c,h){let d=s[c];const p=a.data;if(function HC(s){return s instanceof Cl}(d)){const y=d;y.resolving&&function Nt(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new _e("200",`Circular dependency in DI detected for ${s}${c}`)}(St(p[c]));const v=Ml(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Pi(y.injectImpl):null;km(s,h,Je.Default);try{d=s[c]=y.factory(void 0,p,s,h),a.firstCreatePass&&c>=h.directiveStart&&function BC(s,a,c){const{ngOnChanges:h,ngOnInit:d,ngDoCheck:p}=a.type.prototype;if(h){const y=Dm(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y)}d&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,d),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],a)}finally{null!==b&&Pi(b),Ml(v),y.resolving=!1,Vm()}}return d}function xu(s,a,c){return!!(c[a+(s>>5)]&1<<s)}function Js(s,a){return!(s&Je.Self||s&Je.Host&&a)}class Xs{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return $m(this._tNode,this._lView,a,h,c)}}function Wm(s){return He(()=>{const a=s.prototype.constructor,c=a[kt]||Yr(a),h=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==h;){const p=d[kt]||Yr(d);if(p&&p!==c)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Yr(s){return Ue(s)?()=>{const a=Yr(ue(s));return a&&a()}:Ko(s)}function uf(s){return function it(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const h=c.length;let d=0;for(;d<h;){const p=c[d];if(Tl(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<h&&"string"==typeof c[d];)d++;else{if(p===a)return c[d+1];d+=2}}}return null}(en(),s)}const Pr="__parameters__";function yi(s,a,c){return He(()=>{const h=function _n(s){return function(...c){if(s){const h=s(...c);for(const d in h)this[d]=h[d]}}}(a);function d(...p){if(this instanceof d)return h.apply(this,p),this;const y=new d(...p);return v.annotation=y,v;function v(b,D,C){const A=b.hasOwnProperty(Pr)?b[Pr]:Object.defineProperty(b,Pr,{value:[]})[Pr];for(;A.length<=C;)A.push(null);return(A[C]=A[C]||[]).push(y),b}}return c&&(d.prototype=Object.create(c.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class $t{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=cn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Qm=new $t("AnalyzeForEntryComponents");function Lr(s,a){void 0===a&&(a=s);for(let c=0;c<s.length;c++){let h=s[c];Array.isArray(h)?(a===s&&(a=s.slice(0,c)),Lr(h,a)):a!==s&&a.push(h)}return a}function vi(s,a){s.forEach(c=>Array.isArray(c)?vi(c,a):a(c))}function _i(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function ra(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function yr(s,a,c){let h=Xo(s,a);return h>=0?s[1|h]=c:(h=~h,function $b(s,a,c,h){let d=s.length;if(d==a)s.push(c,h);else if(1===d)s.push(h,s[0]),s[0]=c;else{for(d--,s.push(s[d-1],s[d]);d>a;)s[d]=s[d-2],d--;s[a]=c,s[a+1]=h}}(s,h,a,c)),h}function Rl(s,a){const c=Xo(s,a);if(c>=0)return s[1|c]}function Xo(s,a){return function Jm(s,a,c){let h=0,d=s.length>>c;for(;d!==h;){const p=h+(d-h>>1),y=s[p<<c];if(a===y)return p<<c;y>a?d=p:h=p+1}return~(d<<c)}(s,a,1)}const Ou={},lf="__NG_DI_FLAG__",vr="ngTempTokenPath",ty=/\n/gm,Kb="__source",bn=P({provide:String,useValue:P});let nr;function ry(s){const a=nr;return nr=s,a}function Yb(s,a=Je.Default){if(void 0===nr)throw new Error("inject() must be called from an injection context");return null===nr?Wt(s,void 0,a):nr.get(s,a&Je.Optional?null:void 0,a)}function hn(s,a=Je.Default){return(function Hs(){return ll}()||Yb)(ue(s),a)}function Pl(s){const a=[];for(let c=0;c<s.length;c++){const h=ue(s[c]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let d,p=Je.Default;for(let y=0;y<h.length;y++){const v=h[y],b=iy(v);"number"==typeof b?-1===b?d=v.token:p|=b:d=v}a.push(hn(d,p))}else a.push(hn(h))}return a}function Ru(s,a){return s[lf]=a,s.prototype[lf]=a,s}function iy(s){return s[lf]}const Qr=Ru(yi("Inject",s=>({token:s})),-1),nt=Ru(yi("Optional"),8),sa=Ru(yi("SkipSelf"),4);class ff{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zr(s){return s instanceof ff?s.changingThisBreaksApplicationSecurity:s}const Uu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,my=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Vt=(()=>((Vt=Vt||{})[Vt.NONE=0]="NONE",Vt[Vt.HTML=1]="HTML",Vt[Vt.STYLE=2]="STYLE",Vt[Vt.SCRIPT=3]="SCRIPT",Vt[Vt.URL=4]="URL",Vt[Vt.RESOURCE_URL=5]="RESOURCE_URL",Vt))();function $u(s){const a=function la(){const s=he();return s&&s[12]}();return a?a.sanitize(Vt.URL,s)||"":function ca(s,a){const c=function pf(s){return s instanceof ff&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(s,"URL")?Zr(s):function ju(s){return(s=String(s)).match(Uu)||s.match(my)?s:"unsafe:"+s}(Se(s))}const Sy="__ngContext__";function Mn(s,a){s[Sy]=a}function da(s){const a=function qu(s){return s[Sy]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function pa(s){return s.ngOriginalError}function bw(s,...a){s.error(...a)}class uo{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),h=function _w(s){return s&&s.ngErrorLogger||bw}(a);h(this._console,"ERROR",a),c&&h(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&pa(a);for(;c&&pa(c);)c=pa(c);return c||null}}const Fy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function wi(s){return s instanceof Function?s():s}var Xr=(()=>((Xr=Xr||{})[Xr.Important=1]="Important",Xr[Xr.DashCase=2]="DashCase",Xr))();function ql(s,a){return undefined(s,a)}function ga(s){const a=s[3];return Wr(a)?a[3]:a}function Cf(s){return jy(s[13])}function If(s){return jy(s[4])}function jy(s){for(;null!==s&&!Wr(s);)s=s[4];return s}function ma(s,a,c,h,d){if(null!=h){let p,y=!1;Wr(h)?p=h:di(h)&&(y=!0,h=h[0]);const v=Xt(h);0===s&&null!==c?null==d?xf(a,c,v):us(a,c,v,d||null,!0):1===s&&null!==c?us(a,c,v,d||null,!0):2===s?function Pf(s,a,c){const h=Yu(s,a);h&&function Ky(s,a,c,h){At(s)?s.removeChild(a,c,h):a.removeChild(c)}(s,h,a,c)}(a,v,y):3===s&&a.destroyNode(v),null!=p&&function Vw(s,a,c,h,d){const p=c[7];p!==Xt(c)&&ma(a,s,h,p,d);for(let v=10;v<c.length;v++){const b=c[v];Zu(b[1],b,s,a,h,p)}}(a,s,p,c,d)}}function zl(s,a,c){return At(s)?s.createElement(a,c):null===c?s.createElement(a):s.createElementNS(c,a)}function $y(s,a){const c=s[9],h=c.indexOf(a),d=a[3];1024&a[2]&&(a[2]&=-1025,vl(d,-1)),c.splice(h,1)}function Hn(s,a){if(s.length<=10)return;const c=10+a,h=s[c];if(h){const d=h[17];null!==d&&d!==s&&$y(d,h),a>0&&(s[c-1][4]=h[4]);const p=ra(s,10+a);!function Nw(s,a){Zu(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const y=p[19];null!==y&&y.detachView(p[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function qy(s,a){if(!(256&a[2])){const c=a[11];At(c)&&c.destroyNode&&Zu(s,a,c,3,null,null),function Fw(s){let a=s[13];if(!a)return ya(s[1],s);for(;a;){let c=null;if(di(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==s;)di(a)&&ya(a[1],a),a=a[3];null===a&&(a=s),di(a)&&ya(a[1],a),c=a&&a[4]}a=c}}(a)}}function ya(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function Mf(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let h=0;h<c.length;h+=2){const d=a[c[h]];if(!(d instanceof Cl)){const p=c[h+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const v=d[p[y]],b=p[y+1];try{b.call(v)}finally{}}else try{p.call(d)}finally{}}}}(s,a),function Af(s,a){const c=s.cleanup,h=a[7];let d=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+1],v="function"==typeof y?y(a):Xt(a[y]),b=h[d=c[p+2]],D=c[p+3];"boolean"==typeof D?v.removeEventListener(c[p],b,D):D>=0?h[d=D]():h[d=-D].unsubscribe(),p+=2}else{const y=h[d=c[p+1]];c[p].call(y)}if(null!==h){for(let p=d+1;p<h.length;p++)h[p]();a[7]=null}}(s,a),1===a[1].type&&At(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&Wr(a[3])){c!==a[3]&&$y(c,a);const h=a[19];null!==h&&h.detachView(s)}}}function as(s,a,c){return function zy(s,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const d=s.data[h.directiveStart].encapsulation;if(d===fr.None||d===fr.Emulated)return null}return Xn(h,c)}(s,a.parent,c)}function us(s,a,c,h,d){At(s)?s.insertBefore(a,c,h,d):a.insertBefore(c,h,d)}function xf(s,a,c){At(s)?s.appendChild(a,c):a.appendChild(c)}function Wy(s,a,c,h,d){null!==h?us(s,a,c,h,d):xf(s,a,c)}function Yu(s,a){return At(s)?s.parentNode(a):a.parentNode}let Of=function co(s,a,c){return 40&s.type?Xn(s,c):null};function Qu(s,a,c,h){const d=as(s,h,a),p=a[11],v=function Lw(s,a,c){return Of(s,a,c)}(h.parent||a[6],h,a);if(null!=d)if(Array.isArray(c))for(let b=0;b<c.length;b++)Wy(p,d,c[b],v,!1);else Wy(p,d,c,v,!1)}function Wl(s,a){if(null!==a){const c=a.type;if(3&c)return Xn(a,s);if(4&c)return Ff(-1,s[a.index]);if(8&c){const h=a.child;if(null!==h)return Wl(s,h);{const d=s[a.index];return Wr(d)?Ff(-1,d):Xt(d)}}if(32&c)return ql(a,s)()||Xt(s[a.index]);{const h=Qy(s,a);return null!==h?Array.isArray(h)?h[0]:Wl(ga(s[16]),h):Wl(s,a.next)}}return null}function Qy(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Ff(s,a){const c=10+s+1;if(c<a.length){const h=a[c],d=h[1].firstChild;if(null!==d)return Wl(h,d)}return a[7]}function Lf(s,a,c,h,d,p,y){for(;null!=c;){const v=h[c.index],b=c.type;if(y&&0===a&&(v&&Mn(Xt(v),h),c.flags|=4),64!=(64&c.flags))if(8&b)Lf(s,a,c.child,h,d,p,!1),ma(a,s,d,v,p);else if(32&b){const D=ql(c,h);let C;for(;C=D();)ma(a,s,d,C,p);ma(a,s,d,v,p)}else 16&b?Kl(s,a,h,c,d,p):ma(a,s,d,v,p);c=y?c.projectionNext:c.next}}function Zu(s,a,c,h,d,p){Lf(c,h,s.firstChild,a,d,p,!1)}function Kl(s,a,c,h,d,p){const y=c[16],b=y[6].projection[h.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)ma(a,s,d,b[D],p);else Lf(s,a,b,y[3],d,p,!0)}function kf(s,a,c){At(s)?s.setAttribute(a,"style",c):a.style.cssText=c}function Vf(s,a,c){At(s)?""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c):a.className=c}function jw(s,a,c){let h=s.length;for(;;){const d=s.indexOf(a,c);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=a.length;if(d+p===h||s.charCodeAt(d+p)<=32)return d}c=d+1}}const Zy="ng-template";function jf(s,a,c){let h=0;for(;h<s.length;){let d=s[h++];if(c&&"class"===d){if(d=s[h],-1!==jw(d.toLowerCase(),a,0))return!0}else if(1===d){for(;h<s.length&&"string"==typeof(d=s[h++]);)if(d.toLowerCase()===a)return!0;return!1}}return!1}function Jy(s){return 4===s.type&&s.value!==Zy}function Bw(s,a,c){return a===(4!==s.type||c?s.value:Zy)}function Gw(s,a,c){let h=4;const d=s.attrs||[],p=function $w(s){for(let a=0;a<s.length;a++)if(Tl(s[a]))return a;return s.length}(d);let y=!1;for(let v=0;v<a.length;v++){const b=a[v];if("number"!=typeof b){if(!y)if(4&h){if(h=2|1&h,""!==b&&!Bw(s,b,c)||""===b&&1===a.length){if(ei(h))return!1;y=!0}}else{const D=8&h?b:a[++v];if(8&h&&null!==s.attrs){if(!jf(s.attrs,D,c)){if(ei(h))return!1;y=!0}continue}const A=Hw(8&h?"class":b,d,Jy(s),c);if(-1===A){if(ei(h))return!1;y=!0;continue}if(""!==D){let F;F=A>p?"":d[A+1].toLowerCase();const U=8&h?F:null;if(U&&-1!==jw(U,D,0)||2&h&&D!==F){if(ei(h))return!1;y=!0}}}}else{if(!y&&!ei(h)&&!ei(b))return!1;if(y&&ei(b))continue;y=!1,h=b|1&h}}return ei(h)||y}function ei(s){return 0==(1&s)}function Hw(s,a,c,h){if(null===a)return-1;let d=0;if(h||!c){let p=!1;for(;d<a.length;){const y=a[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let v=a[++d];for(;"string"==typeof v;)v=a[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function qw(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const h=s[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,s)}function Gi(s,a,c=!1){for(let h=0;h<a.length;h++)if(Gw(s,a[h],c))return!0;return!1}function _t(s,a){return s?":not("+a.trim()+")":a}function cs(s){let a=s[0],c=1,h=2,d="",p=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&h){const v=s[++c];d+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&h?d+="."+y:4&h&&(d+=" "+y);else""!==d&&!ei(y)&&(a+=_t(p,d),d=""),h=y,p=p||!ei(h);c++}return""!==d&&(a+=_t(p,d)),a}const et={};function Xy(s){Ae(ct(),he(),tr()+s,bl())}function Ae(s,a,c,h){if(!h)if(3==(3&a[2])){const p=s.preOrderCheckHooks;null!==p&&sf(a,p,c)}else{const p=s.preOrderHooks;null!==p&&af(a,p,0,c)}Qo(c)}function Qe(s,a){return s<<17|a<<2}function rr(s){return s>>17&32767}function Gf(s){return 2|s}function ti(s){return(131068&s)>>2}function Hf(s,a){return-131069&s|a<<2}function $f(s){return 1|s}function va(s,a){const c=s.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const d=c[h],p=c[h+1];if(-1!==p){const y=s.data[p];tf(d),y.contentQueries(2,a[p],p)}}}function ho(s,a,c,h,d,p,y,v,b,D){const C=a.blueprint.slice();return C[0]=d,C[2]=140|h,yl(C),C[3]=C[15]=s,C[8]=c,C[10]=y||s&&s[10],C[11]=v||s&&s[11],C[12]=b||s&&s[12]||null,C[9]=D||s&&s[9]||null,C[6]=p,C[16]=2==a.type?s[16]:C,C}function Hi(s,a,c,h,d){let p=s.data[a];if(null===p)p=function rc(s,a,c,h,d){const p=Om(),y=_l(),b=s.data[a]=function wn(s,a,c,h,d,p){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,a,h,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,a,c,h,d),function Tb(){return Ze.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=h,p.attrs=d;const y=function Cu(){const s=Ze.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return pi(p,!0),p}function fo(s,a,c,h){if(0===c)return-1;const d=a.length;for(let p=0;p<c;p++)a.push(h),s.blueprint.push(h),s.data.push(null);return d}function hs(s,a,c){nf(a);try{const h=s.viewQuery;null!==h&&lc(1,h,c);const d=s.template;null!==d&&Qf(s,a,d,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&va(s,a),s.staticViewQueries&&lc(2,s.viewQuery,c);const p=s.components;null!==p&&function eD(s,a){for(let c=0;c<a.length;c++)qn(s,a[c])}(a,p)}catch(h){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),h}finally{a[2]&=-5,Dl()}}function po(s,a,c,h){const d=a[2];if(256==(256&d))return;nf(a);const p=bl();try{yl(a),function Fm(s){return Ze.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Qf(s,a,c,2,h);const y=3==(3&d);if(!p)if(y){const D=s.preOrderCheckHooks;null!==D&&sf(a,D,null)}else{const D=s.preOrderHooks;null!==D&&af(a,D,0,null),jm(a,0)}if(function vv(s){for(let a=Cf(s);null!==a;a=If(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const d=c[h],p=d[3];0==(1024&d[2])&&vl(p,1),d[2]|=1024}}}(a),function dh(s){for(let a=Cf(s);null!==a;a=If(a))for(let c=10;c<a.length;c++){const h=a[c],d=h[1];Yo(h)&&po(d,h,d.template,h[8])}}(a),null!==s.contentQueries&&va(s,a),!p)if(y){const D=s.contentCheckHooks;null!==D&&sf(a,D)}else{const D=s.contentHooks;null!==D&&af(a,D,1),jm(a,1)}!function Jw(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const d=c[h];if(d<0)Qo(~d);else{const p=d,y=c[++h],v=c[++h];Sb(y,p),v(2,a[p])}}}finally{Qo(-1)}}(s,a);const v=s.components;null!==v&&function Xw(s,a){for(let c=0;c<a.length;c++)ac(s,a[c])}(a,v);const b=s.viewQuery;if(null!==b&&lc(2,b,h),!p)if(y){const D=s.viewCheckHooks;null!==D&&sf(a,D)}else{const D=s.viewHooks;null!==D&&af(a,D,2),jm(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,vl(a[3],-1))}finally{Dl()}}function lv(s,a,c,h){const d=a[10],p=!bl(),y=Jd(a);try{p&&!y&&d.begin&&d.begin(),y&&hs(s,a,h),po(s,a,c,h)}finally{p&&!y&&d.end&&d.end()}}function Qf(s,a,c,h,d){const p=tr(),y=2&h;try{Qo(-1),y&&a.length>20&&Ae(s,a,20,bl()),c(h,d)}finally{Qo(p)}}function ih(s,a,c){!Eu()||(function Xf(s,a,c,h){const d=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||Tu(c,a),Mn(h,a);const y=c.initialInputs;for(let v=d;v<p;v++){const b=s.data[v],D=Kr(b);D&&oD(a,c,b);const C=Mu(a,s,v,c);Mn(C,a),null!==y&&sD(0,v-d,C,b,0,y),D&&(er(c.index,a)[8]=C)}}(s,a,c,Xn(c,a)),128==(128&c.flags)&&function ep(s,a,c){const h=c.directiveStart,d=c.directiveEnd,y=c.index,v=function kC(){return Ze.lFrame.currentDirectiveIndex}();try{Qo(y);for(let b=h;b<d;b++){const D=s.data[b],C=a[b];ef(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&tp(D,C)}}finally{Qo(-1),ef(v)}}(s,a,c))}function oh(s,a,c=Xn){const h=a.localNames;if(null!==h){let d=a.index+1;for(let p=0;p<h.length;p+=2){const y=h[p+1],v=-1===y?c(a,s):s[y];s[d++]=v}}}function sh(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=ic(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function ic(s,a,c,h,d,p,y,v,b,D){const C=20+h,A=C+d,F=function tD(s,a){const c=[];for(let h=0;h<a;h++)c.push(h<s?null:et);return c}(C,A),U="function"==typeof D?D():D;return F[1]={type:s,blueprint:F,template:c,queries:null,viewQuery:v,declTNode:a,data:F.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:U,incompleteFirstPass:!1}}function on(s,a,c,h){const d=Da(a);null===c?d.push(h):(d.push(c),s.firstCreatePass&&sp(s).push(h,d.length-1))}function oc(s,a,c){for(let h in s)if(s.hasOwnProperty(h)){const d=s[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,d):c[h]=[a,d]}return c}function lh(s,a,c,h){let d=!1;if(Eu()){const p=function iD(s,a,c){const h=s.directiveRegistry;let d=null;if(h)for(let p=0;p<h.length;p++){const y=h[p];Gi(c,y.selectors,!1)&&(d||(d=[]),Ol(Tu(c,a),s,y.type),Kr(y)?(_a(s,c),d.unshift(y)):d.push(y))}return d}(s,a,c),y=null===h?null:{"":-1};if(null!==p){d=!0,np(c,s.data.length,p.length);for(let C=0;C<p.length;C++){const A=p[C];A.providersResolver&&A.providersResolver(A)}let v=!1,b=!1,D=fo(s,a,p.length,null);for(let C=0;C<p.length;C++){const A=p[C];c.mergedAttrs=Sl(c.mergedAttrs,A.hostAttrs),sc(s,c,a,D,A),yv(D,A,y),null!==A.contentQueries&&(c.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(c.flags|=128);const F=A.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),v=!0),!b&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),b=!0),D++}!function Zf(s,a){const h=a.directiveEnd,d=s.data,p=a.attrs,y=[];let v=null,b=null;for(let D=a.directiveStart;D<h;D++){const C=d[D],A=C.inputs,F=null===p||Jy(a)?null:aD(A,p);y.push(F),v=oc(A,D,v),b=oc(C.outputs,D,b)}null!==v&&(v.hasOwnProperty("class")&&(a.flags|=16),v.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=v,a.outputs=b}(s,c)}y&&function mv(s,a,c){if(a){const h=s.localNames=[];for(let d=0;d<a.length;d+=2){const p=c[a[d+1]];if(null==p)throw new _e("301",`Export of name '${a[d+1]}' not found!`);h.push(a[d],p)}}}(c,h,y)}return c.mergedAttrs=Sl(c.mergedAttrs,c.attrs),d}function gv(s,a,c,h,d,p){const y=p.hostBindings;if(y){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const b=~a.index;(function hh(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=b&&v.push(b),v.push(h,d,y)}}function tp(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function _a(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function yv(s,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=s;Kr(a)&&(c[""]=s)}}function np(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}function sc(s,a,c,h,d){s.data[h]=d;const p=d.factory||(d.factory=Ko(d.type)),y=new Cl(p,Kr(d),null);s.blueprint[h]=y,c[h]=y,gv(s,a,0,h,fo(s,c,d.hostVars,et),d)}function oD(s,a,c){const h=Xn(a,s),d=sh(c),p=s[10],y=mo(s,ho(s,d,null,c.onPush?64:16,h,a,p,p.createRenderer(h,c),null,null));s[a.index]=y}function Di(s,a,c,h,d,p){const y=Xn(s,a);!function go(s,a,c,h,d,p,y){if(null==p)At(s)?s.removeAttribute(a,d,c):a.removeAttribute(d);else{const v=null==y?Se(p):y(p,h||"",d);At(s)?s.setAttribute(a,d,v,c):c?a.setAttributeNS(c,d,v):a.setAttribute(d,v)}}(a[11],y,p,s.value,c,h,d)}function sD(s,a,c,h,d,p){const y=p[a];if(null!==y){const v=h.setInput;for(let b=0;b<y.length;){const D=y[b++],C=y[b++],A=y[b++];null!==v?h.setInput(c,A,D,C):c[C]=A}}}function aD(s,a){let c=null,h=0;for(;h<a.length;){const d=a[h];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===c&&(c=[]),c.push(d,s[d],a[h+1])),h+=2}else h+=2;else h+=4}return c}function rp(s,a,c,h){return new Array(s,!0,!1,a,null,0,h,c,null,null)}function ac(s,a){const c=er(a,s);if(Yo(c)){const h=c[1];80&c[2]?po(h,c,h.template,c[8]):c[5]>0&&fh(c)}}function fh(s){for(let h=Cf(s);null!==h;h=If(h))for(let d=10;d<h.length;d++){const p=h[d];if(1024&p[2]){const y=p[1];po(y,p,y.template,p[8])}else p[5]>0&&fh(p)}const c=s[1].components;if(null!==c)for(let h=0;h<c.length;h++){const d=er(c[h],s);Yo(d)&&d[5]>0&&fh(d)}}function qn(s,a){const c=er(a,s),h=c[1];(function _v(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(h,c),hs(h,c,c[8])}function mo(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function wa(s){for(;s;){s[2]|=64;const a=ga(s);if(pb(s)&&!a)return s;s=a}return null}function ph(s,a,c){const h=a[10];h.begin&&h.begin();try{po(s,a,s.template,c)}catch(d){throw mh(a,d),d}finally{h.end&&h.end()}}function ip(s){!function uc(s){for(let a=0;a<s.components.length;a++){const c=s.components[a],h=da(c),d=h[1];lv(d,h,d.template,c)}}(s[8])}function lc(s,a,c){tf(0),a(s,c)}const gh=(()=>Promise.resolve(null))();function Da(s){return s[7]||(s[7]=[])}function sp(s){return s.cleanup||(s.cleanup=[])}function mh(s,a){const c=s[9],h=c?c.get(uo,null):null;h&&h.handleError(a)}function hc(s,a,c,h,d){for(let p=0;p<c.length;){const y=c[p++],v=c[p++],b=a[y],D=s.data[y];null!==D.setInput?D.setInput(b,d,h,v):b[v]=d}}function ii(s,a,c){const h=ml(a,s);!function Gy(s,a,c){At(s)?s.setValue(a,c):a.textContent=c}(s[11],h,c)}function dc(s,a,c){let h=c?s.styles:null,d=c?s.classes:null,p=0;if(null!==a)for(let y=0;y<a.length;y++){const v=a[y];"number"==typeof v?p=v:1==p?d=j(d,v):2==p&&(h=j(h,v+": "+a[++y]+";"))}c?s.styles=h:s.stylesWithoutHost=h,c?s.classes=d:s.classesWithoutHost=d}const ds=new $t("INJECTOR",-1);class ap{get(a,c=Ou){if(c===Ou){const h=new Error(`NullInjectorError: No provider for ${R(a)}!`);throw h.name="NullInjectorError",h}return c}}const Ea=new $t("Set Injector scope."),$i={},fs={};let fc;function Iv(){return void 0===fc&&(fc=new ap),fc}function yh(s,a=null,c=null,h){const d=ps(s,a,c,h);return d._resolveInjectorDefTypes(),d}function ps(s,a=null,c=null,h){return new up(s,c,a||Iv(),h)}class up{constructor(a,c,h,d=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&vi(c,v=>this.processProvider(v,a,c)),vi([a],v=>this.processInjectorType(v,[],p)),this.records.set(ds,ir(void 0,this));const y=this.records.get(Ea);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof a?null:R(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=Ou,h=Je.Default){this.assertNotDestroyed();const d=ry(this),p=Pi(void 0);try{if(!(h&Je.SkipSelf)){let v=this.records.get(a);if(void 0===v){const b=function lD(s){return"function"==typeof s||"object"==typeof s&&s instanceof $t}(a)&&dt(a);v=b&&this.injectableDefInScope(b)?ir(qi(a),$i):null,this.records.set(a,v)}if(null!=v)return this.hydrate(a,v)}return(h&Je.Self?Iv():this.parent).get(a,c=h&Je.Optional&&c===Ou?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[vr]=y[vr]||[]).unshift(R(a)),d)throw y;return function oy(s,a,c,h){const d=s[vr];throw a[Kb]&&d.unshift(a[Kb]),s.message=function Ll(s,a,c,h=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=R(a);if(Array.isArray(a))d=a.map(R).join(" -> ");else if("object"==typeof a){let p=[];for(let y in a)if(a.hasOwnProperty(y)){let v=a[y];p.push(y+":"+("string"==typeof v?JSON.stringify(v):R(v)))}d=`{${p.join(", ")}}`}return`${c}${h?"("+h+")":""}[${d}]: ${s.replace(ty,"\n  ")}`}("\n"+s.message,d,c,h),s.ngTokenPath=d,s[vr]=null,s}(y,a,"R3InjectorError",this.source)}throw y}finally{Pi(p),ry(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,d)=>a.push(R(d))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,c,h){if(!(a=ue(a)))return!1;let d=Jt(a);const p=null==d&&a.ngModule||void 0,y=void 0===p?a:p,v=-1!==h.indexOf(y);if(void 0!==p&&(d=Jt(p)),null==d)return!1;if(null!=d.imports&&!v){let C;h.push(y);try{vi(d.imports,A=>{this.processInjectorType(A,c,h)&&(void 0===C&&(C=[]),C.push(A))})}finally{}if(void 0!==C)for(let A=0;A<C.length;A++){const{ngModule:F,providers:U}=C[A];vi(U,te=>this.processProvider(te,F,U||de))}}this.injectorDefTypes.add(y);const b=Ko(y)||(()=>new y);this.records.set(y,ir(b,$i));const D=d.providers;if(null!=D&&!v){const C=a;vi(D,A=>this.processProvider(A,C,D))}return void 0!==p&&void 0!==a.providers}processProvider(a,c,h){let d=gs(a=ue(a))?a:ue(a&&a.provide);const p=function uD(s,a,c){return pc(s)?ir(void 0,s.useValue):ir(yo(s),$i)}(a);if(gs(a)||!0!==a.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=ir(void 0,$i,!0),y.factory=()=>Pl(y.multi),this.records.set(d,y)),d=a,y.multi.push(a)}this.records.set(d,p)}hydrate(a,c){return c.value===$i&&(c.value=fs,c.value=c.factory()),"object"==typeof c.value&&c.value&&function cD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ue(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function qi(s){const a=dt(s),c=null!==a?a.factory:Ko(s);if(null!==c)return c;if(s instanceof $t)throw new Error(`Token ${R(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function Tv(s){const a=s.length;if(a>0){const h=function Bi(s,a){const c=[];for(let h=0;h<s;h++)c.push(a);return c}(a,"?");throw new Error(`Can't resolve all parameters for ${R(s)}: (${h.join(", ")}).`)}const c=function xr(s){const a=s&&(s[Ot]||s[In]);if(a){const c=function Cn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function yo(s,a,c){let h;if(gs(s)){const d=ue(s);return Ko(d)||qi(d)}if(pc(s))h=()=>ue(s.useValue);else if(function _h(s){return!(!s||!s.useFactory)}(s))h=()=>s.useFactory(...Pl(s.deps||[]));else if(function vh(s){return!(!s||!s.useExisting)}(s))h=()=>hn(ue(s.useExisting));else{const d=ue(s&&(s.useClass||s.provide));if(!function bh(s){return!!s.deps}(s))return Ko(d)||qi(d);h=()=>new d(...Pl(s.deps))}return h}function ir(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function pc(s){return null!==s&&"object"==typeof s&&bn in s}function gs(s){return"function"==typeof s}let Fn=(()=>{class s{static create(c,h){var d;if(Array.isArray(c))return yh({name:""},h,c,"");{const p=null!==(d=c.name)&&void 0!==d?d:"";return yh({name:p},c.parent,c.providers,p)}}}return s.THROW_IF_NOT_FOUND=Ou,s.NULL=new ap,s.\u0275prov=cn({token:s,providedIn:"any",factory:()=>hn(ds)}),s.__NG_ELEMENT_ID__=-1,s})();function Dh(s,a){El(da(s)[1],en())}function yc(s){let a=function mc(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const h=[s];for(;a;){let d;if(Kr(s))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");d=a.\u0275dir}if(d){if(c){h.push(d);const y=s;y.inputs=ys(s.inputs),y.declaredInputs=ys(s.declaredInputs),y.outputs=ys(s.outputs);const v=d.hostBindings;v&&tn(s,v);const b=d.viewQuery,D=d.contentQueries;if(b&&vc(s,b),D&&yD(s,D),k(s.inputs,d.inputs),k(s.declaredInputs,d.declaredInputs),k(s.outputs,d.outputs),Kr(d)&&d.data.animation){const C=s.data;C.animation=(C.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const v=p[y];v&&v.ngInherit&&v(s),v===yc&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Lv(s){let a=0,c=null;for(let h=s.length-1;h>=0;h--){const d=s[h];d.hostVars=a+=d.hostVars,d.hostAttrs=Sl(d.hostAttrs,c=Sl(c,d.hostAttrs))}}(h)}function ys(s){return s===G?{}:s===de?[]:s}function vc(s,a){const c=s.viewQuery;s.viewQuery=c?(h,d)=>{a(h,d),c(h,d)}:a}function yD(s,a){const c=s.contentQueries;s.contentQueries=c?(h,d,p)=>{a(h,d,p),c(h,d,p)}:a}function tn(s,a){const c=s.hostBindings;s.hostBindings=c?(h,d)=>{a(h,d),c(h,d)}:a}let Ch=null;function Ia(){if(!Ch){const s=M.Symbol;if(s&&s.iterator)Ch=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Ch=h)}}}return Ch}function Ta(s){return!!Th(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ia()in s)}function Th(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Pn(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function _c(s,a,c,h){const d=he();return Pn(d,Ys(),a)&&(ct(),Di(Yt(),d,s,a,c,h)),_c}function _p(s,a,c,h,d,p,y,v){const b=he(),D=ct(),C=s+20,A=D.firstCreatePass?function jv(s,a,c,h,d,p,y,v,b){const D=a.consts,C=Hi(a,s,4,y||null,fi(D,v));lh(a,c,C,fi(D,b)),El(a,C);const A=C.tViews=ic(2,C,h,d,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,D);return null!==a.queries&&(a.queries.template(a,C),A.queries=a.queries.embeddedTView(C)),C}(C,D,b,a,c,h,d,p,y):D.data[C];pi(A,!1);const F=b[11].createComment("");Qu(D,b,F,A),Mn(F,b),mo(b,b[C]=rp(F,b,F,A)),pl(A)&&ih(D,b,A),null!=y&&oh(b,A,v)}function Ec(s,a=Je.Default){const c=he();return null===c?hn(s,a):$m(en(),c,ue(s),a)}function Yi(){throw new Error("invalid")}function qt(s,a,c){const h=he();return Pn(h,Ys(),a)&&function _r(s,a,c,h,d,p,y,v){const b=Xn(a,c);let C,D=a.inputs;!v&&null!=D&&(C=D[h])?(hc(s,c,C,h,d),Jn(a)&&function fv(s,a){const c=er(a,s);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(h=function nD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(h),d=null!=y?y(d,a.value||"",h):d,At(p)?p.setProperty(b,h,d):mr(h)||(b.setProperty?b.setProperty(h,d):b[h]=d))}(ct(),Yt(),h,s,a,h[11],c,!1),qt}function Do(s,a,c,h,d){const y=d?"class":"style";hc(s,c,a.inputs[y],y,h)}function Oh(s,a,c,h){const d=he(),p=ct(),y=20+s,v=d[11],b=d[y]=zl(v,a,function jC(){return Ze.lFrame.currentNamespace}()),D=p.firstCreatePass?function Tp(s,a,c,h,d,p,y){const v=a.consts,D=Hi(a,s,2,d,fi(v,p));return lh(a,c,D,fi(v,y)),null!==D.attrs&&dc(D,D.attrs,!1),null!==D.mergedAttrs&&dc(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(y,p,d,0,a,c,h):p.data[y];pi(D,!0);const C=D.mergedAttrs;null!==C&&Iu(v,b,C);const A=D.classes;null!==A&&Vf(v,b,A);const F=D.styles;null!==F&&kf(v,b,F),64!=(64&D.flags)&&Qu(p,d,b,D),0===function Eb(){return Ze.lFrame.elementDepthCount}()&&Mn(b,d),function Cb(){Ze.lFrame.elementDepthCount++}(),pl(D)&&(ih(p,d,D),function hv(s,a,c){if(vm(a)){const d=a.directiveEnd;for(let p=a.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,c[p],p)}}}(p,D,d)),null!==h&&oh(d,D)}function Cs(){let s=en();_l()?function Xd(){Ze.lFrame.isParent=!1}():(s=s.parent,pi(s,!1));const a=s;!function Ib(){Ze.lFrame.elementDepthCount--}();const c=ct();c.firstCreatePass&&(El(c,s),vm(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ye(s){return 0!=(16&s.flags)}(a)&&Do(c,a,he(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function oo(s){return 0!=(32&s.flags)}(a)&&Do(c,a,he(),a.stylesWithoutHost,!1)}function Eo(s,a,c,h){Oh(s,a,c,h),Cs()}function Oa(){return he()}function Io(s){return!!s&&"function"==typeof s.then}function Ap(s){return!!s&&"function"==typeof s.subscribe}const Rh=Ap;function Cc(s,a,c,h){const d=he(),p=ct(),y=en();return function Fh(s,a,c,h,d,p,y,v){const b=pl(h),C=s.firstCreatePass&&sp(s),A=a[8],F=Da(a);let U=!0;if(3&h.type||v){const we=Xn(h,a),Me=v?v(we):we,ae=F.length,ke=v?ut=>v(Xt(ut[h.index])):h.index;if(At(c)){let ut=null;if(!v&&b&&(ut=function Mp(s,a,c,h){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===c&&d[p+1]===h){const v=a[7],b=d[p+2];return v.length>b?v[b]:null}"string"==typeof y&&(p+=2)}return null}(s,a,d,h.index)),null!==ut)(ut.__ngLastListenerFn__||ut).__ngNextListenerFn__=p,ut.__ngLastListenerFn__=p,U=!1;else{p=Ph(h,a,A,p,!1);const Dt=c.listen(Me,d,p);F.push(p,Dt),C&&C.push(d,ke,ae,ae+1)}}else p=Ph(h,a,A,p,!0),Me.addEventListener(d,p,y),F.push(p),C&&C.push(d,ke,ae,y)}else p=Ph(h,a,A,p,!1);const te=h.outputs;let ve;if(U&&null!==te&&(ve=te[d])){const we=ve.length;if(we)for(let Me=0;Me<we;Me+=2){const Sr=a[ve[Me]][ve[Me+1]].subscribe(p),du=F.length;F.push(p,Sr),C&&C.push(d,h.index,du,-(du+1))}}}(p,d,d[11],y,s,a,!!c,h),Cc}function xp(s,a,c,h){try{return!1!==c(h)}catch(d){return mh(s,d),!1}}function Ph(s,a,c,h,d){return function p(y){if(y===Function)return h;const v=2&s.flags?er(s.index,a):a;0==(32&a[2])&&wa(v);let b=xp(a,0,h,y),D=p.__ngNextListenerFn__;for(;D;)b=xp(a,0,D,y)&&b,D=D.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Tc(s=1){return function of(s){return(Ze.lFrame.contextLView=function Um(s,a){for(;s>0;)a=a[15],s--;return a}(s,Ze.lFrame.contextLView))[8]}(s)}function e_(s,a,c,h,d){const p=s[c+1],y=null===a;let v=h?rr(p):ti(p),b=!1;for(;0!==v&&(!1===b||y);){const C=s[v+1];CD(s[v],a)&&(b=!0,s[v+1]=h?$f(C):Gf(C)),v=h?rr(C):ti(C)}b&&(s[c+1]=h?Gf(p):$f(p))}function CD(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Xo(s,a)>=0}function jh(s,a){return function Br(s,a,c,h){const d=he(),p=ct(),y=function Ui(s){const a=Ze.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}(2);p.firstUpdatePass&&function Vp(s,a,c,h){const d=s.data;if(null===d[c+1]){const p=d[tr()],y=function kp(s,a){return a>=s.expandoStartIndex}(s,c);(function Pa(s,a){return 0!=(s.flags&(a?16:32))})(p,h)&&null===a&&!y&&(a=!1),a=function r_(s,a,c,h){const d=function Lm(s){const a=Ze.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let p=h?a.residualClasses:a.residualStyles;if(null===d)0===(h?a.classBindings:a.styleBindings)&&(c=Ti(c=Gh(null,s,a,c,h),a.attrs,h),p=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==d)if(c=Gh(d,s,a,c,h),null===p){let b=function Bh(s,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==ti(h))return s[rr(h)]}(s,a,h);void 0!==b&&Array.isArray(b)&&(b=Gh(null,s,a,b[1],h),b=Ti(b,a.attrs,h),function TD(s,a,c,h){s[rr(c?a.classBindings:a.styleBindings)]=h}(s,a,h,b))}else p=function SD(s,a,c){let h;const d=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<d;p++)h=Ti(h,s[p].hostAttrs,c);return Ti(h,a.attrs,c)}(s,a,h)}return void 0!==p&&(h?a.residualClasses=p:a.residualStyles=p),c}(d,p,a,h),function DD(s,a,c,h,d,p){let y=p?a.classBindings:a.styleBindings,v=rr(y),b=ti(y);s[h]=c;let C,D=!1;if(Array.isArray(c)){const A=c;C=A[1],(null===C||Xo(A,C)>0)&&(D=!0)}else C=c;if(d)if(0!==b){const F=rr(s[v+1]);s[h+1]=Qe(F,v),0!==F&&(s[F+1]=Hf(s[F+1],h)),s[v+1]=function Ju(s,a){return 131071&s|a<<17}(s[v+1],h)}else s[h+1]=Qe(v,0),0!==v&&(s[v+1]=Hf(s[v+1],h)),v=h;else s[h+1]=Qe(b,0),0===v?v=h:s[b+1]=Hf(s[b+1],h),b=h;D&&(s[h+1]=Gf(s[h+1])),e_(s,C,h,!0),e_(s,C,h,!1),function ED(s,a,c,h,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof a&&Xo(p,a)>=0&&(c[h+1]=$f(c[h+1]))}(a,C,s,h,p),y=Qe(v,b),p?a.classBindings=y:a.styleBindings=y}(d,p,a,c,y,h)}}(p,s,y,h),a!==et&&Pn(d,y,a)&&function jp(s,a,c,h,d,p,y,v){if(!(3&a.type))return;const b=s.data,D=b[v+1];Oc(function ev(s){return 1==(1&s)}(D)?Ss(b,a,c,d,ti(D),y):void 0)||(Oc(p)||function Ql(s){return 2==(2&s)}(D)&&(p=Ss(b,null,c,d,v,y)),function Uw(s,a,c,h,d){const p=At(s);if(a)d?p?s.addClass(c,h):c.classList.add(h):p?s.removeClass(c,h):c.classList.remove(h);else{let y=-1===h.indexOf("-")?void 0:Xr.DashCase;if(null==d)p?s.removeStyle(c,h,y):c.style.removeProperty(h);else{const v="string"==typeof d&&d.endsWith("!important");v&&(d=d.slice(0,-10),y|=Xr.Important),p?s.setStyle(c,h,d,y):c.style.setProperty(h,d,v?"important":"")}}}(h,y,ml(tr(),c),d,p))}(p,p.data[tr()],d,d[11],s,d[y+1]=function i_(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=R(Zr(s)))),s}(a,c),h,y)}(s,a,null,!0),jh}function Gh(s,a,c,h,d){let p=null;const y=c.directiveEnd;let v=c.directiveStylingLast;for(-1===v?v=c.directiveStart:v++;v<y&&(p=a[v],h=Ti(h,p.hostAttrs,d),p!==s);)v++;return null!==s&&(c.directiveStylingLast=v),h}function Ti(s,a,c){const h=c?1:2;let d=-1;if(null!==a)for(let p=0;p<a.length;p++){const y=a[p];"number"==typeof y?d=y:d===h&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yr(s,y,!!c||a[++p]))}return void 0===s?null:s}function Ss(s,a,c,h,d,p){const y=null===a;let v;for(;d>0;){const b=s[d],D=Array.isArray(b),C=D?b[1]:b,A=null===C;let F=c[d+1];F===et&&(F=A?de:void 0);let U=A?Rl(F,h):C===h?F:void 0;if(D&&!Oc(U)&&(U=Rl(b,h)),Oc(U)&&(v=U,y))return v;const te=s[d+1];d=y?rr(te):ti(te)}if(null!==a){let b=p?a.residualClasses:a.residualStyles;null!=b&&(v=Rl(b,h))}return v}function Oc(s){return void 0!==s}function o_(s,a=""){const c=he(),h=ct(),d=s+20,p=h.firstCreatePass?Hi(h,d,1,a,null):h.data[d],y=c[d]=function Tf(s,a){return At(s)?s.createText(a):s.createTextNode(a)}(c[11],a);Qu(h,c,y,p),pi(p,!1)}function gn(s){return As("",s,""),gn}function As(s,a,c){const h=he(),d=function vs(s,a,c,h){return Pn(s,Ys(),c)?a+Se(c)+h:et}(h,s,a,c);return d!==et&&ii(h,tr(),d),As}const So=void 0;var ND=["en",[["a","p"],["AM","PM"],So],[["AM","PM"],So,So],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],So,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],So,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",So,"{1} 'at' {0}",So],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function y_(s){const c=Math.floor(Math.abs(s)),h=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let Ms={};function zp(s){const a=function mn(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=ka(a);if(c)return c;const h=a.split("-")[0];if(c=ka(h),c)return c;if("en"===h)return ND;throw new Error(`Missing locale data for the locale "${s}".`)}function v_(s){return zp(s)[Be.PluralCase]}function ka(s){return s in Ms||(Ms[s]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[s]),Ms[s]}var Be=(()=>((Be=Be||{})[Be.LocaleId=0]="LocaleId",Be[Be.DayPeriodsFormat=1]="DayPeriodsFormat",Be[Be.DayPeriodsStandalone=2]="DayPeriodsStandalone",Be[Be.DaysFormat=3]="DaysFormat",Be[Be.DaysStandalone=4]="DaysStandalone",Be[Be.MonthsFormat=5]="MonthsFormat",Be[Be.MonthsStandalone=6]="MonthsStandalone",Be[Be.Eras=7]="Eras",Be[Be.FirstDayOfWeek=8]="FirstDayOfWeek",Be[Be.WeekendRange=9]="WeekendRange",Be[Be.DateFormat=10]="DateFormat",Be[Be.TimeFormat=11]="TimeFormat",Be[Be.DateTimeFormat=12]="DateTimeFormat",Be[Be.NumberSymbols=13]="NumberSymbols",Be[Be.NumberFormats=14]="NumberFormats",Be[Be.CurrencyCode=15]="CurrencyCode",Be[Be.CurrencySymbol=16]="CurrencySymbol",Be[Be.CurrencyName=17]="CurrencyName",Be[Be.Currencies=18]="Currencies",Be[Be.Directionality=19]="Directionality",Be[Be.PluralCase=20]="PluralCase",Be[Be.ExtraData=21]="ExtraData",Be))();const Ao="en-US";let Kp=Ao;function td(s,a,c,h,d){if(s=ue(s),Array.isArray(s))for(let p=0;p<s.length;p++)td(s[p],a,c,h,d);else{const p=ct(),y=he();let v=gs(s)?s:ue(s.provide),b=yo(s);const D=en(),C=1048575&D.providerIndexes,A=D.directiveStart,F=D.providerIndexes>>20;if(gs(s)||!s.multi){const U=new Cl(b,d,Ec),te=No(v,a,d?C:C+F,A);-1===te?(Ol(Tu(D,y),p,v),Qa(p,s,a.length),a.push(v),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),c.push(U),y.push(U)):(c[te]=U,y[te]=U)}else{const U=No(v,a,C+F,A),te=No(v,a,C,C+F),ve=U>=0&&c[U],we=te>=0&&c[te];if(d&&!we||!d&&!ve){Ol(Tu(D,y),p,v);const Me=function j_(s,a,c,h,d){const p=new Cl(s,c,Ec);return p.multi=[],p.index=a,p.componentProviders=0,V_(p,d,h&&!c),p}(d?Oo:U_,c.length,d,h,b);!d&&we&&(c[te].providerFactory=Me),Qa(p,s,a.length,0),a.push(v),D.directiveStart++,D.directiveEnd++,d&&(D.providerIndexes+=1048576),c.push(Me),y.push(Me)}else Qa(p,s,U>-1?U:te,V_(c[d?te:U],b,!d&&h));!d&&h&&we&&c[te].componentProviders++}}}function Qa(s,a,c,h){const d=gs(a),p=function Ut(s){return!!s.useClass}(a);if(d||p){const b=(p?ue(a.useClass):a).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!d&&a.multi){const C=D.indexOf(c);-1===C?D.push(c,[h,b]):D[C+1].push(h,b)}else D.push(c,b)}}}function V_(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function No(s,a,c,h){for(let d=c;d<h;d++)if(a[d]===s)return d;return-1}function U_(s,a,c,h){return eo(this.multi,[])}function Oo(s,a,c,h){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=Mu(c,c[1],this.providerFactory.index,h);p=v.slice(0,y),eo(d,p);for(let b=y;b<v.length;b++)p.push(v[b])}else p=[],eo(d,p);return p}function eo(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function B_(s,a=[]){return c=>{c.providersResolver=(h,d)=>function Ya(s,a,c){const h=ct();if(h.firstCreatePass){const d=Kr(s);td(c,h.data,h.blueprint,d,!0),td(a,h.data,h.blueprint,d,!1)}}(h,d?d(s):s,a)}}class G_{}class H_{resolveComponentFactory(a){throw function qD(s){const a=Error(`No component factory found for ${R(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Hc=(()=>{class s{}return s.NULL=new H_,s})();function zD(){return Ns(en(),he())}function Ns(s,a){return new qr(Xn(s,a))}let qr=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=zD,s})();function nd(s){return s instanceof qr?s.nativeElement:s}class ug{}let cg=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function $c(){const s=he(),c=er(en().index,s);return function WD(s){return s[11]}(di(c)?c:s)}(),s})(),rd=(()=>{class s{}return s.\u0275prov=cn({token:s,providedIn:"root",factory:()=>null}),s})();class id{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const $_=new id("13.0.3"),od={};function sd(s,a,c,h,d=!1){for(;null!==c;){const p=a[c.index];if(null!==p&&h.push(Xt(p)),Wr(p))for(let v=10;v<p.length;v++){const b=p[v],D=b[1].firstChild;null!==D&&sd(b[1],b,D,h)}const y=c.type;if(8&y)sd(s,a,c.child,h);else if(32&y){const v=ql(c,a);let b;for(;b=v();)h.push(b)}else if(16&y){const v=Qy(a,c);if(Array.isArray(v))h.push(...v);else{const b=ga(a[16]);sd(b[1],b,v,h,!0)}}c=d?c.projectionNext:c.next}return h}class Za{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return sd(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Wr(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(Hn(a,h),ra(c,h))}this._attachedToViewContainer=!1}qy(this._lView[1],this._lView)}onDestroy(a){on(this._lView[1],this._lView,null,a)}markForCheck(){wa(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ph(this._lView[1],this._lView,this.context)}checkNoChanges(){!function cc(s,a,c){wl(!0);try{ph(s,a,c)}finally{wl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rw(s,a){Zu(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class KD extends Za{constructor(a){super(a),this._view=a}detectChanges(){ip(this._view)}checkNoChanges(){!function op(s){wl(!0);try{ip(s)}finally{wl(!1)}}(this._view)}get context(){return null}}class lg extends Hc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Tn(a);return new ad(c,this.ngModule)}}function hg(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}const q_=new $t("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Fy});class ad extends G_{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Bf(s){return s.map(cs).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return hg(this.componentDef.inputs)}get outputs(){return hg(this.componentDef.outputs)}create(a,c,h,d){const p=(d=d||this.ngModule)?function QD(s,a){return{get:(c,h,d)=>{const p=s.get(c,od,d);return p!==od||h===od?p:a.get(c,h,d)}}}(a,d.injector):a,y=p.get(ug,Sm),v=p.get(rd,null),b=y.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",C=h?function uh(s,a,c){if(At(s))return s.selectRootElement(a,c===fr.ShadowDom);let h="string"==typeof a?s.querySelector(a):a;return h.textContent="",h}(b,h,this.componentDef.encapsulation):zl(y.createRenderer(null,this.componentDef),D,function YD(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(D)),A=this.componentDef.onPush?576:528,F=function Pv(s,a){return{components:[],scheduler:s||Fy,clean:gh,playerHandler:a||null,flags:0}}(),U=ic(0,null,null,1,0,null,null,null,null,null),te=ho(null,U,F,A,null,null,y,b,v,p);let ve,we;nf(te);try{const Me=function Rv(s,a,c,h,d,p){const y=c[1];c[20]=s;const b=Hi(y,20,2,"#host",null),D=b.mergedAttrs=a.hostAttrs;null!==D&&(dc(b,D,!0),null!==s&&(Iu(d,s,D),null!==b.classes&&Vf(d,s,b.classes),null!==b.styles&&kf(d,s,b.styles)));const C=h.createRenderer(s,a),A=ho(c,sh(a),null,a.onPush?64:16,c[20],b,h,C,p||null,null);return y.firstCreatePass&&(Ol(Tu(b,c),y,a.type),_a(y,b),np(b,c.length,1)),mo(c,A),c[20]=A}(C,this.componentDef,te,y,b);if(C)if(h)Iu(b,C,["ng-version",$_.full]);else{const{attrs:ae,classes:ke}=function zw(s){const a=[],c=[];let h=1,d=2;for(;h<s.length;){let p=s[h];if("string"==typeof p)2===d?""!==p&&a.push(p,s[++h]):8===d&&c.push(p);else{if(!ei(d))break;d=p}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);ae&&Iu(b,C,ae),ke&&ke.length>0&&Vf(b,C,ke.join(" "))}if(we=Ks(U,20),void 0!==c){const ae=we.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const ut=c[ke];ae.push(null!=ut?Array.from(ut):null)}}ve=function Fv(s,a,c,h,d){const p=c[1],y=function Jf(s,a,c){const h=en();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),sc(s,h,a,fo(s,a,1,null),c));const d=Mu(a,s,h.directiveStart,h);Mn(d,a);const p=Xn(h,a);return p&&Mn(p,a),d}(p,c,a);if(h.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,a)),a.contentQueries){const b=en();a.contentQueries(1,y,b.directiveStart)}const v=en();return!p.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Qo(v.index),gv(c[1],v,0,v.directiveStart,v.directiveEnd,a),tp(a,y)),y}(Me,this.componentDef,te,F,[Dh]),hs(U,te,null)}finally{Dl()}return new Ja(this.componentType,ve,Ns(we,te),te,we)}}class Ja extends class $D{}{constructor(a,c,h,d,p){super(),this.location=h,this._rootLView=d,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new KD(d),this.componentType=a}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Os{}class dg{}const Xa=new Map;class K_ extends Os{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lg(this);const h=Or(a);this._bootstrapComponents=wi(h.bootstrap),this._r3Injector=ps(a,c,[{provide:Os,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],R(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=Fn.THROW_IF_NOT_FOUND,h=Je.Default){return a===Fn||a===Os||a===ds?this:this._r3Injector.get(a,c,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class fg extends dg{constructor(a){super(),this.moduleType=a,null!==Or(a)&&function JD(s){const a=new Set;!function c(h){const d=Or(h,!0),p=d.id;null!==p&&(function z_(s,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${s} - ${R(a)} vs ${R(a.name)}`)}(p,Xa.get(p),h),Xa.set(p,h));const y=wi(d.imports);for(const v of y)a.has(v)||(a.add(v),c(v))}(s)}(a)}create(a){return new K_(this.moduleType,a)}}function Y_(s,a,c){const h=function jn(){const s=Ze.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}()+s,d=he();return d[h]===et?function fn(s,a,c){return s[a]=c}(d,h,c?a.call(c):a()):function Sa(s,a){return s[a]}(d,h)}function yg(s){return a=>{setTimeout(s,void 0,a)}}const xi=class r0 extends m.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){var d,p,y;let v=a,b=c||(()=>null),D=h;if(a&&"object"==typeof a){const A=a;v=null===(d=A.next)||void 0===d?void 0:d.bind(A),b=null===(p=A.error)||void 0===p?void 0:p.bind(A),D=null===(y=A.complete)||void 0===y?void 0:y.bind(A)}this.__isAsync&&(b=yg(b),v&&(v=yg(v)),D&&(D=yg(D)));const C=super.subscribe({next:v,error:b,complete:D});return a instanceof Q.w&&a.add(C),C}};function oE(){return this._results[Ia()]()}class vg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Ia(),h=vg.prototype;h[c]||(h[c]=oE)}get changes(){return this._changes||(this._changes=new xi)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const d=Lr(a);(this._changesDetected=!function Gb(s,a,c){if(s.length!==a.length)return!1;for(let h=0;h<s.length;h++){let d=s[h],p=a[h];if(c&&(d=c(d),p=c(p)),p!==d)return!1}return!0}(h._results,d,c))&&(h._results=d,h.length=d.length,h.last=d[this.length-1],h.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wc=(()=>{class s{}return s.__NG_ELEMENT_ID__=dd,s})();const Kc=Wc,tu=class extends Kc{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a){const c=this._declarationTContainer.tViews,h=ho(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(h[19]=p.createEmbeddedView(c)),hs(c,h,a),new Za(h)}};function dd(){return Ro(en(),he())}function Ro(s,a){return 4&s.type?new tu(a,s,Ns(s,a)):null}let nu=(()=>{class s{}return s.__NG_ELEMENT_ID__=o0,s})();function o0(){return s0(en(),he())}const _g=nu,fd=class extends _g{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return Ns(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const a=Au(this._hostTNode,this._hostLView);if(Gm(a)){const c=Qs(a,this._hostLView),h=Bn(a);return new Xs(c[1].data[h+8],c)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=to(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){const d=a.createEmbeddedView(c||{});return this.insert(d,h),d}createComponent(a,c,h,d,p){const y=a&&!function Nu(s){return"function"==typeof s}(a);let v;if(y)v=c;else{const A=c||{};v=A.index,h=A.injector,d=A.projectableNodes,p=A.ngModuleRef}const b=y?a:new ad(Tn(a)),D=h||this.parentInjector;if(!p&&null==b.ngModule&&D){const A=D.get(Os,null);A&&(p=A)}const C=b.create(D,d,void 0,p);return this.insert(C.hostView,v),C}insert(a,c){const h=a._lView,d=h[1];if(function Mm(s){return Wr(s[3])}(h)){const C=this.indexOf(a);if(-1!==C)this.detach(C);else{const A=h[3],F=new fd(A,A[6],A[3]);F.detach(F.indexOf(a))}}const p=this._adjustIndex(c),y=this._lContainer;!function Hy(s,a,c,h){const d=10+h,p=c.length;h>0&&(c[d-1][4]=a),h<p-10?(a[4]=c[d],_i(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const y=a[17];null!==y&&c!==y&&function Pw(s,a){const c=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===c?s[9]=[a]:c.push(a)}(y,a);const v=a[19];null!==v&&v.insertView(s),a[2]|=128}(d,h,y,p);const v=Ff(p,y),b=h[11],D=Yu(b,y[7]);return null!==D&&function Ow(s,a,c,h,d,p){h[0]=d,h[6]=a,Zu(s,h,c,1,d,p)}(d,y[6],b,h,D,v),a.attachToViewContainerRef(),_i(pd(y),p,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=to(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=Hn(this._lContainer,c);h&&(ra(pd(this._lContainer),c),qy(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=Hn(this._lContainer,c);return h&&null!=ra(pd(this._lContainer),c)?new Za(h):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function to(s){return s[8]}function pd(s){return s[8]||(s[8]=[])}function s0(s,a){let c;const h=a[s.index];if(Wr(h))c=h;else{let d;if(8&s.type)d=Xt(h);else{const p=a[11];d=p.createComment("");const y=Xn(s,a);us(p,Yu(p,y),d,function Nf(s,a){return At(s)?s.nextSibling(a):a.nextSibling}(p,y),!1)}a[s.index]=c=rp(h,a,d,s),mo(a,c)}return new fd(c,s,a)}class gd{constructor(a){this.queryList=a,this.matches=null}clone(){return new gd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fo{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,d=[];for(let p=0;p<h;p++){const y=c.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Fo(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==vd(a,c).matches&&this.queries[c].setDirty()}}class wg{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class md{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const d=null!==c?c.length:0,p=this.getByIndex(h).embeddedTView(a,d);p&&(p.indexInDeclarationView=h,null!==c?c.push(p):c=[p])}return null!==c?new md(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Dg{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Dg(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let d=0;d<h.length;d++){const p=h[d];this.matchTNodeWithReadOption(a,c,uE(c,p)),this.matchTNodeWithReadOption(a,c,Zs(c,a,p,!1,!1))}else h===Wc?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Zs(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const d=this.metadata.read;if(null!==d)if(d===qr||d===nu||d===Wc&&4&c.type)this.addMatch(c.index,-2);else{const p=Zs(c,a,d,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function uE(s,a){const c=s.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function lE(s,a,c,h){return-1===c?function cE(s,a){return 11&s.type?Ns(s,a):4&s.type?Ro(s,a):null}(a,s):-2===c?function Eg(s,a,c){return c===qr?Ns(a,s):c===Wc?Ro(a,s):c===nu?s0(a,s):void 0}(s,a,h):Mu(s,s[1],c,a)}function Fs(s,a,c,h){const d=a[19].queries[h];if(null===d.matches){const p=s.data,y=c.matches,v=[];for(let b=0;b<y.length;b+=2){const D=y[b];v.push(D<0?null:lE(a,p[D],y[b+1],c.metadata.read))}d.matches=v}return d.matches}function Ni(s,a,c,h){const d=s.queries.getByIndex(c),p=d.matches;if(null!==p){const y=Fs(s,a,d,c);for(let v=0;v<p.length;v+=2){const b=p[v];if(b>0)h.push(y[v/2]);else{const D=p[v+1],C=a[-b];for(let A=10;A<C.length;A++){const F=C[A];F[17]===F[3]&&Ni(F[1],F,D,h)}if(null!==C[9]){const A=C[9];for(let F=0;F<A.length;F++){const U=A[F];Ni(U[1],U,D,h)}}}}}return h}function a0(s){const a=he(),c=ct(),h=Ab();tf(h+1);const d=vd(c,h);if(s.dirty&&Jd(a)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Ni(c,a,h,[]):Fs(c,a,d,h);s.reset(p,nd),s.notifyOnChanges()}return!0}return!1}function Cg(s,a,c,h){const d=ct();if(d.firstCreatePass){const p=en();(function c0(s,a,c){null===s.queries&&(s.queries=new md),s.queries.track(new Dg(a,c))})(d,new wg(a,c,h),p.index),function Tg(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(d,s),2==(2&c)&&(d.staticContentQueries=!0)}!function u0(s,a,c){const h=new vg(4==(4&c));on(s,a,h,h.destroy),null===a[19]&&(a[19]=new Fo),a[19].queries.push(new gd(h))}(d,he(),c)}function Ig(){return function yd(s,a){return s[19].queries[a].queryList}(he(),Ab())}function vd(s,a){return s.queries.getByIndex(a)}function Cd(...s){}const Id=new $t("Application Initializer");let ko=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Cd,this.reject=Cd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Io(p))c.push(p);else if(Rh(p)){const y=new Promise((v,b)=>{p.subscribe({complete:v,error:b})});c.push(y)}}Promise.all(c).then(()=>{h()}).catch(d=>{this.reject(d)}),0===c.length&&h(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(hn(Id,8))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const Zc=new $t("AppId"),Ug={provide:Zc,useFactory:function E0(){return`${Td()}${Td()}${Td()}`},deps:[]};function Td(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sd=new $t("Platform Initializer"),Ps=new $t("Platform ID"),jg=new $t("appBootstrapListener");let C0=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const Ls=new $t("LocaleId"),Bg=new $t("DefaultCurrencyCode");class ME{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Gg=(()=>{class s{compileModuleSync(c){return new fg(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),p=wi(Or(c).declarations).reduce((y,v)=>{const b=Tn(v);return b&&y.push(new ad(b)),y},[]);return new ME(h,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();const Hg=(()=>Promise.resolve(0))();function Ad(s){"undefined"==typeof Zone?Hg.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class lr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xi(!1),this.onMicrotaskEmpty=new xi(!1),this.onStable=new xi(!1),this.onError=new xi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!h&&c,d.shouldCoalesceRunChangeDetection=h,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function T0(){let s=M.requestAnimationFrame,a=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function A0(s){const a=()=>{!function S0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(M,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ks(s),s.isCheckStableRunning=!0,yt(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ks(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,d,p,y,v)=>{try{return jt(s),c.invokeTask(d,p,y,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&a(),Kn(s)}},onInvoke:(c,h,d,p,y,v,b)=>{try{return jt(s),c.invoke(d,p,y,v,b)}finally{s.shouldCoalesceRunChangeDetection&&a(),Kn(s)}},onHasTask:(c,h,d,p)=>{c.hasTask(d,p),h===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,ks(s),yt(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,h,d,p)=>(c.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(lr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,a,Md,Cd,Cd);try{return p.runTask(y,c,h)}finally{p.cancelTask(y)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const Md={};function yt(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ks(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function jt(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Kn(s){s._nesting--,yt(s)}class Vo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xi,this.onMicrotaskEmpty=new xi,this.onStable=new xi,this.onError=new xi}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,d){return a.apply(c,h)}}let $g=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lr.assertNotInAngularZone(),Ad(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ad(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,d){let p=-1;h&&h>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:d})}whenStable(c,h,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,h,d){return[]}}return s.\u0275fac=function(c){return new(c||s)(hn(lr))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})(),Jc=(()=>{class s{constructor(){this._applications=new Map,qg.addToWindow(this)}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return qg.findTestabilityInTree(this,c,h)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();class M0{addToWindow(a){}findTestabilityInTree(a,c,h){return null}}function x0(s){qg=s}let Un,qg=new M0;const un=new $t("AllowMultipleToken");class N0{constructor(a,c){this.name=a,this.token=c}}function zg(s,a,c=[]){const h=`Platform: ${a}`,d=new $t(h);return(p=[])=>{let y=Uo();if(!y||y.injector.get(un,!1))if(s)s(c.concat(p).concat({provide:d,useValue:!0}));else{const v=c.concat(p).concat({provide:d,useValue:!0},{provide:Ea,useValue:"platform"});!function O0(s){if(Un&&!Un.destroyed&&!Un.injector.get(un,!1))throw new _e("400","");Un=s.get(Xc);const a=s.get(Sd,null);a&&a.forEach(c=>c())}(Fn.create({providers:v,name:h}))}return function Ri(s){const a=Uo();if(!a)throw new _e("401","");return a}()}}function Uo(){return Un&&!Un.destroyed?Un:null}let Xc=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const v=function OE(s,a){let c;return c="noop"===s?new Vo:("zone.js"===s?void 0:s)||new lr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),b=[{provide:lr,useValue:v}];return v.run(()=>{const D=Fn.create({providers:b,parent:this.injector,name:c.moduleType.name}),C=c.create(D),A=C.injector.get(uo,null);if(!A)throw new _e("402","");return v.runOutsideAngular(()=>{const F=v.onError.subscribe({next:U=>{A.handleError(U)}});C.onDestroy(()=>{xd(this._modules,C),F.unsubscribe()})}),function RE(s,a,c){try{const h=c();return Io(h)?h.catch(d=>{throw a.runOutsideAngular(()=>s.handleError(d)),d}):h}catch(h){throw a.runOutsideAngular(()=>s.handleError(h)),h}}(A,v,()=>{const F=C.injector.get(ko);return F.runInitializers(),F.donePromise.then(()=>(function b_(s){bt(s,"Expected localeId to be defined"),"string"==typeof s&&(Kp=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Ls,Ao)||Ao),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,h=[]){const d=Wg({},h);return function NE(s,a,c){const h=new fg(c);return Promise.resolve(h)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(c){const h=c.injector.get(ou);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(d=>h.bootstrap(d));else{if(!c.instance.ngDoBootstrap)throw new _e("403","");c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e("404","");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(hn(Fn))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();function Wg(s,a){return Array.isArray(a)?a.reduce(Wg,s):Object.assign(Object.assign({},s),a)}let ou=(()=>{class s{constructor(c,h,d,p,y){this._zone=c,this._injector=h,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new le.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),b=new le.y(D=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{lr.assertNotInAngularZone(),Ad(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{lr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,X.T)(v,b.pipe(function x(){return s=>(0,ie.x)()(function K(s,a){return function(h){let d;if(d="function"==typeof s?s:function(){return s},"function"==typeof a)return h.lift(new ce(d,a));const p=Object.create(h,ne.N);return p.source=h,p.subjectFactory=d,p}}(H)(s))}()))}bootstrap(c,h){if(!this._initStatus.done)throw new _e("405","");let d;d=c instanceof G_?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(d.componentType);const p=function Zt(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Os),v=d.create(Fn.NULL,[],h||d.selector,p),b=v.location.nativeElement,D=v.injector.get($g,null),C=D&&v.injector.get(Jc);return D&&C&&C.registerApplication(b,D),v.onDestroy(()=>{this.detachView(v.hostView),xd(this.components,v),C&&C.unregisterApplication(b)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new _e("101","");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;xd(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(jg,[]).concat(this._bootstrapListeners).forEach(d=>d(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(hn(lr),hn(Fn),hn(uo),hn(Hc),hn(ko))},s.\u0275prov=cn({token:s,factory:s.\u0275fac}),s})();function xd(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}let el=!0,Nd=!1;function F0(){return Nd=!0,el}function FE(){if(Nd)throw new Error("Cannot enable prod mode after platform setup.");el=!1}let Kg=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yg,s})();function Yg(s){return function L0(s,a,c){if(Jn(s)&&!c){const h=er(s.index,a);return new Za(h,h)}return 47&s.type?new Za(a[16],a):null}(en(),he(),16==(16&s))}class Xg{constructor(){}supports(a){return Ta(a)}create(a){return new B0(a)}}const j0=(s,a)=>a;class B0{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||j0}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,d=0,p=null;for(;c||h;){const y=!h||c&&c.currentIndex<H0(h,d,p)?c:h,v=H0(y,d,p),b=y.currentIndex;if(y===h)d--,h=h._nextRemoved;else if(c=c._next,null==y.previousIndex)d++;else{p||(p=[]);const D=v-d,C=b-d;if(D!=C){for(let F=0;F<D;F++){const U=F<p.length?p[F]:p[F]=0,te=U+F;C<=te&&te<D&&(p[F]=U+1)}p[y.previousIndex]=C-D}}v!==b&&a(y,v,b)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Ta(a))throw new Error(`Error trying to diff '${R(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,p,y,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let v=0;v<this.length;v++)p=a[v],y=this._trackByFn(v,p),null!==c&&Object.is(c.trackById,y)?(h&&(c=this._verifyReinsertion(c,p,y,v)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,v),h=!0),c=c._next}else d=0,function Ih(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Ia()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,v=>{y=this._trackByFn(d,v),null!==c&&Object.is(c.trackById,y)?(h&&(c=this._verifyReinsertion(c,v,y,d)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,y,d),h=!0),c=c._next,d++}),this.length=d;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,d){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,p,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,d))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,p,d)):a=this._addAfter(new G0(c,h),p,d),a}_verifyReinsertion(a,c,h,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==p?a=this._reinsertAfter(p,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,p=a._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const d=null===c?this._itHead:c._next;return a._next=d,a._prev=c,null===d?this._itTail=a:d._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new rl),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rl),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class G0{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class em{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class rl{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new em,this.map.set(c,h)),h.add(a)}get(a,c){const d=this.map.get(a);return d?d.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function H0(s,a,c){const h=s.previousIndex;if(null===h)return h;let d=0;return c&&h<c.length&&(d=c[h]),h+a+d}class $0{constructor(){}supports(a){return a instanceof Map||Th(a)}create(){return new jo}}class jo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Th(a)))throw new Error(`Error trying to diff '${R(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,d)=>{if(c&&c.key===d)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(d,h);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,c);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const h=new Bs(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class Bs{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tm(){return new il([new Xg])}let il=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(null!=h){const d=h.factories.slice();c=c.concat(d)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||tm()),deps:[[s,new sa,new nt]]}}find(c){const h=this.factories.find(d=>d.supports(c));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function q0(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=cn({token:s,providedIn:"root",factory:tm}),s})();function cu(){return new lu([new $0])}let lu=(()=>{class s{constructor(c){this.factories=c}static create(c,h){if(h){const d=h.factories.slice();c=c.concat(d)}return new s(c)}static extend(c){return{provide:s,useFactory:h=>s.create(c,h||cu()),deps:[[s,new sa,new nt]]}}find(c){const h=this.factories.find(d=>d.supports(c));if(h)return h;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=cn({token:s,providedIn:"root",factory:cu}),s})();const BE=[new $0],W0=new il([new Xg]),K0=new lu(BE),Y0=zg(null,"core",[{provide:Ps,useValue:"unknown"},{provide:Xc,deps:[Fn]},{provide:Jc,deps:[]},{provide:C0,deps:[]}]),Pd=[{provide:ou,useClass:ou,deps:[lr,Fn,uo,Hc,ko]},{provide:q_,deps:[lr],useFactory:function Gs(s){let a=[];return s.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(c){a.push(c)}}},{provide:ko,useClass:ko,deps:[[new nt,Id]]},{provide:Gg,useClass:Gg,deps:[]},Ug,{provide:il,useFactory:function Fd(){return W0},deps:[]},{provide:lu,useFactory:function GE(){return K0},deps:[]},{provide:Ls,useFactory:function Q0(s){return s||function Z0(){return"undefined"!=typeof $localize&&$localize.locale||Ao}()},deps:[[new Qr(Ls),new nt,new sa]]},{provide:Bg,useValue:"USD"}];let Yn=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(hn(ou))},s.\u0275mod=qd({type:s}),s.\u0275inj=Go({providers:Pd}),s})()}},Ve=>{Ve(Ve.s=1954)}]);